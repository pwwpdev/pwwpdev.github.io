<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Smplrspace Viewer</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Load smplr.js and its styles -->
  </head>
  <style>
    body,
    html {
      height: 100vh !important;
      overflow: hidden;
      margin: 0;
      padding: 0;
    }
    button[title="Hide annotations"] {
  display: none !important;
}


/* Re-enable pointer events only for zoom controls (if they're separate elements) */
.smplr-zoom-controls,
button[title*="zoom" i],
button[title*="Zoom" i] {
  pointer-events: auto !important;
}

    #wrapper,
    #smplrspace-container {
      height: 100vh !important;
    }

    .text-size {
      font-size: 14px;
    }
    .strong-text {
      font-size: 18px; 
    }
  </style>
  <body>
    <script src="https://app.smplrspace.com/lib/smplr.js"></script>
    <link href="https://app.smplrspace.com/lib/smplr.css" rel="stylesheet" />

    <div id="wrapper">
      <div id="smplrspace-container"></div>
      <div
        id="custom-tooltip"
        style="
          position: absolute;
          top: 10px;
          left: 10px;
          background: white;
          border: 1px solid #ccc;
          border-radius: 6px;
          padding: 12px;
          box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
          z-index: 1000;
          display: none;
          min-width: 380px;
        "
      >
        <div id="tooltip-content"></div>
      </div>
    </div>

    <!-- Combined Legend Box -->
    <div id="legend-container" style="
      position: absolute;
      bottom: 6px;
      left: 54px;
      background: rgba(219, 218, 218, 0.492);
      border: 1px solid #ddd;
      border-radius: 6px;
      padding: 6px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      z-index: 1000;
      font-size: 12px;
      font-weight: 400;
      font-family: 'Inter', sans-serif;
      color: #333;
      min-width: 100px;
    ">
      <div style="padding: 4px 4px; text-align: center; border-bottom: 1px solid #ccc; margin-bottom: 4px;">
        Default View
      </div>
      <div style="padding: 4px 4px; text-align: center; border-bottom: 1px solid #ccc; margin-bottom: 4px;">
        Zoom IN
      </div>
      <div style="padding: 4px 4px; text-align: center; border-bottom: 1px solid #ccc; margin-bottom: 4px;">
        Zoom OUT
      </div>
      <div style="padding: 4px 4px; text-align: center;">
        Switch 2D/3D 
      </div>
    </div>

    <script>
      const API_ENDPOINT =
        "https://optimusc.flowfuse.cloud/lingnan-library-dos";

      const CLIENT_ID = "pub_45cf413215bd43f79621e0b28f8a815b";
      const SPACE_ID = "73242c82-a0e9-4c96-8d28-089829ecf3d0";

      const UPDATE_FREQUENCY = 60;

      const rooms = [];
      const desk_index = {
        "LRT01-S01": 0,
        "LRT01-S02": 1,
        "LRT01-S03": 2,
        "LRT01-S04": 3,
        "LRT01-S05": 4,
        "LRT01-S06": 5,
        "LRT01-S07": 6,
        "LRT01-S08": 7,
        "LRT01-S09": 8,
        "LRT01-S10": 9,
        "LRT02-S01": 10,
        "LRT02-S02": 11,
        "LRT02-S03": 12,
        "LRT02-S04": 13,
        "LRT02-S05": 14,
        "LRT02-S06": 15,
        "LRT02-S07": 16,
        "LRT02-S08": 17,
        "LRT02-S09": 18,
        "LRT02-S10": 19,
        "LRT03-S01": 20,
        "LRT03-S02": 21,
        "LRT03-S03": 22,
        "LRT03-S04": 23,
        "LRT03-S05": 24,
        "LRT03-S06": 25,
        "LRT03-S07": 26,
        "LRT03-S08": 27,
        "LRT03-S09": 28,
        "LRT03-S10": 29,
        "LRT04-S01": 30,
        "LRT04-S02": 31,
        "LRT04-S03": 32,
        "LRT04-S04": 33,
        "LRT04-S05": 34,
        "LRT04-S06": 35,
        "LRT04-S07": 36,
        "LRT04-S08": 37,
        "LRT04-S09": 38,
        "LRT04-S10": 39,
        "LRT05-S01": 40,
        "LRT05-S02": 41,
        "LRT05-S03": 42,
        "LRT05-S04": 43,
        "LRT05-S05": 44,
        "LRT05-S06": 45,
        "LRT05-S07": 46,
        "LRT05-S08": 47,
        "LRT05-S09": 48,
        "LRT05-S10": 49,
        "LRT06-S01": 50,
        "LRT06-S02": 51,
        "LRT06-S03": 52,
        "LRT06-S04": 53,
        "LRT06-S05": 54,
        "LRT06-S06": 55,
        "LRT06-S07": 56,
        "LRT06-S08": 57,
        "LRT06-S09": 58,
        "LRT06-S10": 59,
        "1FN-S01": 60,
        "1FN-S02": 61,
        "1FN-S03": 62,
        "1FN-S04": 63,
        "1FN-S05": 64,
        "1FS-S01": 65,
        "1FS-S02": 66,
        "1FS-S03": 67,
        "1FS-S04": 68,
        "1FS-S05": 69,
        "CPR2-S01": 70,
        "CPR2-S02": 71,
        "CPR2-S03": 72,
        "CPR2-S04": 73,
        "CPR2-S05": 74,
        "CPR2-S06": 75,
        "CPR2-S07": 76,
        "CPR2-S08": 77,
        "CPR2-S09": 78,
        "CPR2-S10": 79,
        "CPR2-S11": 80,
        "CPR2-S12": 81,
        "CPR2-S13": 82,
        "CPR2-S14": 83,
        "CPR2-S15": 84,
        "CPR2-S16": 85,
        "CPR2-S17": 86,
        "CPR2-S18": 87,
        "CPR2-S19": 88,
        "CPR2-S20": 89,
        "CPR2-S21": 90,
        "CPR2-S22": 91,
        "CPR2-S23": 92,
        "CPR2-S24": 93,
        "CPR2-S25": 94,
        "CPR2-S26": 95,
      };

      const desk_filter = {
        "LRT01-S01": "LRT01-S01",
        "LRT01-S02": "LRT01-S02",
        "LRT01-S03": "LRT01-S03",
        "LRT01-S04": "LRT01-S04",
        "LRT01-S05": "LRT01-S05",
        "LRT01-S06": "LRT01-S06",
        "LRT01-S07": "LRT01-S07",
        "LRT01-S08": "LRT01-S08",
        "LRT01-S09": "LRT01-S09",
        "LRT01-S10": "LRT01-S10",
        "LRT02-S01": "LRT02-S01",
        "LRT02-S02": "LRT02-S02",
        "LRT02-S03": "LRT02-S03",
        "LRT02-S04": "LRT02-S04",
        "LRT02-S05": "LRT02-S05",
        "LRT02-S06": "LRT02-S06",
        "LRT02-S07": "LRT02-S07",
        "LRT02-S08": "LRT02-S08",
        "LRT02-S09": "LRT02-S09",
        "LRT02-S10": "LRT02-S10",
        "LRT03-S01": "LRT03-S01",
        "LRT03-S02": "LRT03-S02",
        "LRT03-S03": "LRT03-S03",
        "LRT03-S04": "LRT03-S04",
        "LRT03-S05": "LRT03-S05",
        "LRT03-S06": "LRT03-S06",
        "LRT03-S07": "LRT03-S07",
        "LRT03-S08": "LRT03-S08",
        "LRT03-S09": "LRT03-S09",
        "LRT03-S10": "LRT03-S10",
        "LRT04-S01": "LRT04-S01",
        "LRT04-S02": "LRT04-S02",
        "LRT04-S03": "LRT04-S03",
        "LRT04-S04": "LRT04-S04",
        "LRT04-S05": "LRT04-S05",
        "LRT04-S06": "LRT04-S06",
        "LRT04-S07": "LRT04-S07",
        "LRT04-S08": "LRT04-S08",
        "LRT04-S09": "LRT04-S09",
        "LRT04-S10": "LRT04-S10",
        "LRT05-S01": "LRT05-S01",
        "LRT05-S02": "LRT05-S02",
        "LRT05-S03": "LRT05-S03",
        "LRT05-S04": "LRT05-S04",
        "LRT05-S05": "LRT05-S05",
        "LRT05-S06": "LRT05-S06",
        "LRT05-S07": "LRT05-S07",
        "LRT05-S08": "LRT05-S08",
        "LRT05-S09": "LRT05-S09",
        "LRT05-S10": "LRT05-S10",
        "LRT06-S01": "LRT06-S01",
        "LRT06-S02": "LRT06-S02",
        "LRT06-S03": "LRT06-S03",
        "LRT06-S04": "LRT06-S04",
        "LRT06-S05": "LRT06-S05",
        "LRT06-S06": "LRT06-S06",
        "LRT06-S07": "LRT06-S07",
        "LRT06-S08": "LRT06-S08",
        "LRT06-S09": "LRT06-S09",
        "LRT06-S10": "LRT06-S10",
        "1FN-S01": "1FN-S01",
        "1FN-S02": "1FN-S02",
        "1FN-S03": "1FN-S03",
        "1FN-S04": "1FN-S04",
        "1FN-S05": "1FN-S05",
        "1FS-S01": "1FS-S01",
        "1FS-S02": "1FS-S02",
        "1FS-S03": "1FS-S03",
        "1FS-S04": "1FS-S04",
        "1FS-S05": "1FS-S05",
        "CPR2-S01": "CPR2-S01",
        "CPR2-S02": "CPR2-S02",
        "CPR2-S03": "CPR2-S03",
        "CPR2-S04": "CPR2-S04",
        "CPR2-S05": "CPR2-S05",
        "CPR2-S06": "CPR2-S06",
        "CPR2-S07": "CPR2-S07",
        "CPR2-S08": "CPR2-S08",
        "CPR2-S09": "CPR2-S09",
        "CPR2-S10": "CPR2-S10",
        "CPR2-S11": "CPR2-S11",
        "CPR2-S12": "CPR2-S12",
        "CPR2-S13": "CPR2-S13",
        "CPR2-S14": "CPR2-S14",
        "CPR2-S15": "CPR2-S15",
        "CPR2-S16": "CPR2-S16",
        "CPR2-S17": "CPR2-S17",
        "CPR2-S18": "CPR2-S18",
        "CPR2-S19": "CPR2-S19",
        "CPR2-S20": "CPR2-S20",
        "CPR2-S21": "CPR2-S21",
        "CPR2-S22": "CPR2-S22",
        "CPR2-S23": "CPR2-S23",
        "CPR2-S24": "CPR2-S24",
        "CPR2-S25": "CPR2-S25",
        "CPR2-S26": "CPR2-S26",
      };

      const room_index = {
        "Group Study Room 9": 0,
        "Individual Study Room 1": 1,
        "Individual Study Room 2": 2,
        "Individual Study Room 3": 3,
        "Group Study Room 8": 4,
      };

      const room_filter = {
        "1FC-GS9": "Group Study Room 9",
        "1FC-IS1": "Individual Study Room 1",
        "1FC-IS2": "Individual Study Room 2",
        "1FC-IS3": "Individual Study Room 3",
        "1FC-GS8": "Group Study Room 8",
      };

      // Updated for new color overlays
      const color_overlay_index = {
        1: 0,
        2: 1,
        3: 2,
        Study1: 3,
        Study2: 4,
        Study3: 5,
      };

      const color_overlay_filter = {
        "1FC-UA1": "1",
        "1FC-UA2": "2",
        "1FC-UA3": "3",
        "1FC-IS1": "Study1",
        "1FC-IS2": "Study2",
        "1FC-IS3": "Study3",
      };

      const dict = [
        {
          id: "97bb9348-8841-42ea-91f2-f0589f05473c",
          name: "LRR Desk",
          type: "furniture",
          assets: [
            {
              id: "2a4af663-0eee-42b1-a569-5ac13b4daae3",
              name: "LRT01-S01",
              furnitureId: "51d6eb0c-930c-4feb-8c8f-e39b2db2ffee",
              layerType: "furniture",
            },
            {
              id: "c25407a9-69e2-4580-9baa-cd3037801a8d",
              name: "LRT01-S02",
              furnitureId: "507326d2-077a-4135-accb-40eb588c3ef9",
              layerType: "furniture",
            },
            {
              id: "4c59265f-81ba-4256-99b7-1d3e9c91db93",
              name: "LRT01-S03",
              furnitureId: "f526ce1c-570f-43b7-aae5-1207bb1f43ab",
              layerType: "furniture",
            },
            {
              id: "a7051fac-2793-4047-b5ea-dc2335276b14",
              name: "LRT01-S04",
              furnitureId: "7d12c239-b79a-4ff7-bde2-252453c739ae",
              layerType: "furniture",
            },
            {
              id: "e8b5f525-4447-40ba-9e03-f0513b96ed89",
              name: "LRT01-S05",
              furnitureId: "6920090d-50cc-4f2c-bcf7-416c1db91fce",
              layerType: "furniture",
            },
            {
              id: "5613a796-9986-4075-bfae-770e70736b80",
              name: "LRT01-S06",
              furnitureId: "f686ca38-d98b-4f06-b570-9ea4552bce68",
              layerType: "furniture",
            },
            {
              id: "34ca1218-0977-462a-9365-5bb409b63185",
              name: "LRT01-S07",
              furnitureId: "d3e1902e-ae77-41cf-9663-7a101f3e6399",
              layerType: "furniture",
            },
            {
              id: "0994c26f-6749-4909-896d-17bf227fca25",
              name: "LRT01-S08",
              furnitureId: "6178b0d1-99c4-4652-990e-12f8bac8658f",
              layerType: "furniture",
            },
            {
              id: "61855b20-8359-486a-ab92-e51e2347e645",
              name: "LRT01-S09",
              furnitureId: "dc50398d-a6f8-4c43-8ca9-badb08cd1603",
              layerType: "furniture",
            },
            {
              id: "4e4f525c-8540-45d1-a3ee-1f646353ffd3",
              name: "LRT01-S10",
              furnitureId: "a9962b6b-26ce-436a-9af5-0f73b1f88d98",
              layerType: "furniture",
            },
            {
              id: "ca314bfd-6190-4f03-8d58-e1ef1007ade6",
              name: "LRT02-S01",
              furnitureId: "e7860d0a-4d66-4f4d-9c6b-7d30ac8de382",
              layerType: "furniture",
            },
            {
              id: "a6e8f32c-ca3e-43fb-a937-60a84bf400ca",
              name: "LRT02-S02",
              furnitureId: "7909d6d8-221c-476f-921d-e910d8c1264b",
              layerType: "furniture",
            },
            {
              id: "7dbffb04-1264-405a-b61a-26ad9deff4b2",
              name: "LRT02-S03",
              furnitureId: "7c97bb4b-b99f-4d23-a796-f5f9eb84620b",
              layerType: "furniture",
            },
            {
              id: "4cef2109-693d-4ac8-b6de-108dcee4af37",
              name: "LRT02-S04",
              furnitureId: "aabc277b-7a91-4057-ae5f-013e6179974a",
              layerType: "furniture",
            },
            {
              id: "67325ee2-a533-443f-a23e-721ee071de50",
              name: "LRT02-S05",
              furnitureId: "79b7e004-9575-43a1-8abf-2e99d6be655c",
              layerType: "furniture",
            },
            {
              id: "c5f8d077-e848-4cdf-a4d3-0c9d0f2a3bc4",
              name: "LRT02-S06",
              furnitureId: "fb7e3f21-4141-4fba-bdb5-77ea9effe175",
              layerType: "furniture",
            },
            {
              id: "d41dc8c6-a716-479d-bd29-5b3602794750",
              name: "LRT02-S07",
              furnitureId: "3c568152-7874-4439-9213-cbcb48aca31f",
              layerType: "furniture",
            },
            {
              id: "3ae03ab5-5179-41c2-9060-9c05ef6ba3ff",
              name: "LRT02-S08",
              furnitureId: "7e71c43c-3674-45c5-9367-3d92b8ca90fb",
              layerType: "furniture",
            },
            {
              id: "cf2cc9a6-2f63-41d4-9f91-449455cf1f2b",
              name: "LRT02-S09",
              furnitureId: "8e6aeec2-19f4-4f98-bb4e-4d12bb2c79dd",
              layerType: "furniture",
            },
            {
              id: "a0b88db3-cf40-4390-8e21-4362a0070a56",
              name: "LRT02-S10",
              furnitureId: "ab10d1ff-210d-4318-934e-c7c42fbabad4",
              layerType: "furniture",
            },
            {
              id: "1fff8614-28d8-471b-804d-7c729a87b79c",
              name: "LRT03-S01",
              furnitureId: "73e36729-5c27-4c04-aebf-a42d613d87fd",
              layerType: "furniture",
            },
            {
              id: "dcd0d6e6-9376-4a2c-a8b0-ced2238fd870",
              name: "LRT03-S02",
              furnitureId: "43a6e8b2-9ba3-474e-aff2-7549605c9b6a",
              layerType: "furniture",
            },
            {
              id: "e1b9ce38-d03e-41eb-80c6-ea3e808627e2",
              name: "LRT03-S03",
              furnitureId: "c6846a03-b76f-4387-ac11-ec8c06c90fcf",
              layerType: "furniture",
            },
            {
              id: "69b1a8e5-cdb7-49e4-810e-dfb1e438c90e",
              name: "LRT03-S04",
              furnitureId: "b5621b3c-8efc-4455-ac19-e003a0ae1cee",
              layerType: "furniture",
            },
            {
              id: "40f35036-373f-4640-84a1-cebab2788bb2",
              name: "LRT03-S05",
              furnitureId: "6cff29c6-ec8f-4be0-811a-057de9dbc74a",
              layerType: "furniture",
            },
            {
              id: "95c7395a-1742-4153-9e77-db2b365bbfdc",
              name: "LRT03-S06",
              furnitureId: "191ee9ff-678c-4ba1-a39b-31bca6d5c36d",
              layerType: "furniture",
            },
            {
              id: "0455a87f-e3bc-4679-860d-b8fee335af48",
              name: "LRT03-S07",
              furnitureId: "2543a1f7-412c-4ddf-93a5-ed07e5c9d898",
              layerType: "furniture",
            },
            {
              id: "3a4d5d94-5910-457c-b02f-794cfa2f1bf9",
              name: "LRT03-S08",
              furnitureId: "5d3f14e1-2f29-486a-9ece-247787869aa7",
              layerType: "furniture",
            },
            {
              id: "5de0c526-bed0-407a-88e0-d335408284f9",
              name: "LRT03-S09",
              furnitureId: "b4735137-e041-416f-b123-bdc259eaa843",
              layerType: "furniture",
            },
            {
              id: "f419d856-4d56-48ed-a44d-b296017af2cd",
              name: "LRT03-S10",
              furnitureId: "be402c15-4498-47d8-880a-b32e7def61f3",
              layerType: "furniture",
            },
            {
              id: "9ab7041d-f45d-4736-b5ce-e669dfb6313b",
              name: "LRT04-S01",
              furnitureId: "70bd46dc-0e00-4188-a9ba-894c1497bbbe",
              layerType: "furniture",
            },
            {
              id: "c3432109-cf33-4a29-bff7-bbfd9632f148",
              name: "LRT04-S02",
              furnitureId: "d519eaf2-5f9a-4edd-a7fe-d80906efc40a",
              layerType: "furniture",
            },
            {
              id: "e563b7bf-e688-4fe6-aff3-b60b2f98b2f2",
              name: "LRT04-S03",
              furnitureId: "974896da-5a83-40e9-982e-97ef85fe2456",
              layerType: "furniture",
            },
            {
              id: "a95be06c-fd42-46cd-924e-83136442b31b",
              name: "LRT04-S04",
              furnitureId: "08ca4067-6c2c-4c19-b5a1-5fc6b2ee5061",
              layerType: "furniture",
            },
            {
              id: "100af926-5529-46b2-bb15-d94b72c6b4c7",
              name: "LRT04-S05",
              furnitureId: "19093d2c-b06a-41fe-9e2d-ef3e4a7fe43e",
              layerType: "furniture",
            },
            {
              id: "de64f929-9530-49de-a37e-faa676f178dc",
              name: "LRT04-S06",
              furnitureId: "b06add29-dba6-41df-bcb3-e76061162d69",
              layerType: "furniture",
            },
            {
              id: "e14e617f-0a1e-4411-8111-429ad2e8045f",
              name: "LRT04-S07",
              furnitureId: "148a5a19-e567-487a-a25c-9bf512183642",
              layerType: "furniture",
            },
            {
              id: "dd3758d1-c6a8-4489-89fb-2814c784c5d5",
              name: "LRT04-S08",
              furnitureId: "2ddf9be5-8d15-4af6-9229-f5c858e07b69",
              layerType: "furniture",
            },
            {
              id: "5854e452-a9b7-4e36-97b9-a1320734656a",
              name: "LRT04-S09",
              furnitureId: "46c3ded6-53b4-4636-b617-b604b2d10a42",
              layerType: "furniture",
            },
            {
              id: "d1b91ecc-eda2-4674-a263-c3a17dc4de24",
              name: "LRT04-S10",
              furnitureId: "418657a0-1922-476d-bb2c-e8ca14266958",
              layerType: "furniture",
            },
            {
              id: "39964306-eb35-4745-bdd0-3e2eb9603b5a",
              name: "LRT05-S01",
              furnitureId: "6eb1e034-169c-4f8c-952d-9576b92de369",
              layerType: "furniture",
            },
            {
              id: "49be04c0-6eb7-4663-bd86-aa3f882e6c0b",
              name: "LRT05-S02",
              furnitureId: "ec9782fa-db9e-4af0-8fcd-cbd9b29b40bf",
              layerType: "furniture",
            },
            {
              id: "b7771164-3ceb-479b-9659-8a48e0f38586",
              name: "LRT05-S03",
              furnitureId: "a3727d19-f033-49c6-ac5c-3c0c5de31c75",
              layerType: "furniture",
            },
            {
              id: "c6d2d8d2-b760-49d0-bbac-564c2c48ea73",
              name: "LRT05-S04",
              furnitureId: "712ffe41-b9cb-413b-ad43-5398ba17e414",
              layerType: "furniture",
            },
            {
              id: "091a782f-ffda-4649-b609-aadb0b64a5d8",
              name: "LRT05-S05",
              furnitureId: "1948ff48-0752-458d-aea4-7a9453b19a48",
              layerType: "furniture",
            },
            {
              id: "07f7eff6-d6a0-43ad-b128-b619275f87ee",
              name: "LRT05-S06",
              furnitureId: "8a4bc8f3-0b98-4a0f-ac52-f88e4ba57ac8",
              layerType: "furniture",
            },
            {
              id: "a3ba8f96-8467-48d1-8021-763112125673",
              name: "LRT05-S07",
              furnitureId: "83382964-e41a-463f-b0e8-bf572b366a92",
              layerType: "furniture",
            },
            {
              id: "902e54b9-d99f-49b7-85c6-9a4ce0892427",
              name: "LRT05-S08",
              furnitureId: "583159f9-35fa-445f-8160-d8f487ca905f",
              layerType: "furniture",
            },
            {
              id: "ba3725df-9918-480e-bd36-92d73c55030f",
              name: "LRT05-S09",
              furnitureId: "6b90208e-015c-43f8-9681-62a282ae0560",
              layerType: "furniture",
            },
            {
              id: "40dc991a-bf01-411c-866e-ce428dd7fb23",
              name: "LRT05-S10",
              furnitureId: "19da1798-801a-4d1d-a539-d18286d32342",
              layerType: "furniture",
            },
            {
              id: "e07b0433-6dd4-4ee4-890c-f041860b4617",
              name: "LRT06-S01",
              furnitureId: "de5295c8-3708-444b-8146-8c3a2a7aa497",
              layerType: "furniture",
            },
            {
              id: "8de75d56-73e0-41fb-a877-c83055e9793e",
              name: "LRT06-S02",
              furnitureId: "e4863045-0369-4ea7-a569-05e1e9563c2a",
              layerType: "furniture",
            },
            {
              id: "9cd8ed21-5c7c-48e0-a60a-f2d8a9678b6d",
              name: "LRT06-S03",
              furnitureId: "d9a9baa3-8a6f-4ff1-a03d-3806ec50b1e1",
              layerType: "furniture",
            },
            {
              id: "f9247401-2ba2-4896-b31c-8d4e6927125f",
              name: "LRT06-S04",
              furnitureId: "7508be4a-aa73-418b-97ff-01fd2ea97ad6",
              layerType: "furniture",
            },
            {
              id: "9c53d86f-bfaa-4899-b7bd-d4aecff1d1aa",
              name: "LRT06-S05",
              furnitureId: "3b6402eb-7253-4ec7-9590-4c887ece8327",
              layerType: "furniture",
            },
            {
              id: "e1680f72-a5e0-4e37-a0e6-8c851dd5bc1f",
              name: "LRT06-S06",
              furnitureId: "af2a06a5-fe89-4fc2-b10e-bd6201610f11",
              layerType: "furniture",
            },
            {
              id: "05b730dc-30d1-465b-bce3-32aa509f8bc0",
              name: "LRT06-S07",
              furnitureId: "ed3f8463-b1c2-4bfd-a402-d7a2f5da302d",
              layerType: "furniture",
            },
            {
              id: "fd020198-efb6-4599-8186-450bceaf8586",
              name: "LRT06-S08",
              furnitureId: "4414b411-c46d-4591-84de-c6425550e7f6",
              layerType: "furniture",
            },
            {
              id: "eb0ca871-ad7c-4ca4-ae98-bd4deef602ab",
              name: "LRT06-S09",
              furnitureId: "cdcb4775-b712-4a16-a963-d1eccd922422",
              layerType: "furniture",
            },
            {
              id: "02e16118-e7f0-4b62-bbec-3fef12a66f4b",
              name: "LRT06-S10",
              furnitureId: "42cdb803-a7eb-4c08-8788-868b386b8fca",
              layerType: "furniture",
            },
          ],
        },
        {
          id: "161eabd8-3a08-4b1a-b297-2829cf8b31ea",
          name: "NonAccessibleArea",
          type: "polygon",
          assets: [
            {
              id: "031bae15-7140-44c3-b06a-eb777de0ee23",
              name: "1",
              levelIndex: 0,
              coordinates: [
                [
                  {
                    x: 126.477,
                    z: -57.205,
                    levelIndex: 0,
                  },
                  {
                    x: 129.655,
                    z: -57.233,
                    levelIndex: 0,
                  },
                  {
                    x: 129.603,
                    z: -29.791,
                    levelIndex: 0,
                  },
                  {
                    x: 126.771,
                    z: -29.849,
                    levelIndex: 0,
                  },
                  {
                    x: 126.741,
                    z: -48.307,
                    levelIndex: 0,
                  },
                  {
                    x: 126.533,
                    z: -48.392,
                    levelIndex: 0,
                  },
                  {
                    x: 126.449,
                    z: -56.376,
                    levelIndex: 0,
                  },
                ],
              ],
              layerType: "polygon",
              mapped: true,
            },
            {
              id: "b8da8833-ac95-423a-a02b-04aa399172b0",
              name: "2",
              levelIndex: 0,
              coordinates: [
                [
                  {
                    x: 98.375,
                    z: -52.608,
                    levelIndex: 0,
                  },
                  {
                    x: 98.389,
                    z: -56.918,
                    levelIndex: 0,
                  },
                  {
                    x: 99.036,
                    z: -57.007,
                    levelIndex: 0,
                  },
                  {
                    x: 99.113,
                    z: -57.253,
                    levelIndex: 0,
                  },
                  {
                    x: 108.742,
                    z: -57.208,
                    levelIndex: 0,
                  },
                  {
                    x: 108.448,
                    z: -56.509,
                    levelIndex: 0,
                  },
                  {
                    x: 108.664,
                    z: -56.579,
                    levelIndex: 0,
                  },
                  {
                    x: 108.708,
                    z: -54.039,
                    levelIndex: 0,
                  },
                  {
                    x: 103.068,
                    z: -54.118,
                    levelIndex: 0,
                  },
                  {
                    x: 102.926,
                    z: -52.613,
                    levelIndex: 0,
                  },
                ],
              ],
              layerType: "polygon",
              mapped: true,
            },
            {
              id: "064c5862-54b8-4c31-bb23-13e50b27b5e4",
              name: "4",
              levelIndex: 0,
              coordinates: [
                [
                  {
                    x: 54.05,
                    z: -34.736,
                    levelIndex: 0,
                  },
                  {
                    x: 51.705,
                    z: -33.127,
                    levelIndex: 0,
                  },
                  {
                    x: 39.737,
                    z: -33.203,
                    levelIndex: 0,
                  },
                  {
                    x: 39.689,
                    z: -34.756,
                    levelIndex: 0,
                  },
                ],
              ],
              layerType: "polygon",
              mapped: true,
            },
            {
              id: "4e7221ef-19ee-44e6-84ea-8a8ad43bfd4f",
              name: "5",
              levelIndex: 0,
              coordinates: [
                [
                  {
                    x: 30.966,
                    z: -57.213,
                    levelIndex: 0,
                  },
                  {
                    x: 30.961,
                    z: -56.465,
                    levelIndex: 0,
                  },
                  {
                    x: 30.76,
                    z: -56.425,
                    levelIndex: 0,
                  },
                  {
                    x: 30.709,
                    z: -54.063,
                    levelIndex: 0,
                  },
                  {
                    x: 38.26,
                    z: -54.039,
                    levelIndex: 0,
                  },
                  {
                    x: 38.228,
                    z: -52.627,
                    levelIndex: 0,
                  },
                  {
                    x: 43.798,
                    z: -52.584,
                    levelIndex: 0,
                  },
                  {
                    x: 43.799,
                    z: -54.003,
                    levelIndex: 0,
                  },
                  {
                    x: 43.045,
                    z: -54.107,
                    levelIndex: 0,
                  },
                  {
                    x: 43.036,
                    z: -56.912,
                    levelIndex: 0,
                  },
                  {
                    x: 40.013,
                    z: -56.935,
                    levelIndex: 0,
                  },
                  {
                    x: 39.987,
                    z: -57.271,
                    levelIndex: 0,
                  },
                ],
              ],
              layerType: "polygon",
              mapped: true,
            },
            {
              id: "2e5718f5-8b5e-4337-ba4f-c8aa3470488a",
              name: "6",
              levelIndex: 0,
              coordinates: [
                [
                  {
                    x: 90.582,
                    z: -61.883,
                    levelIndex: 0,
                  },
                  {
                    x: 90.582,
                    z: -58.519,
                    levelIndex: 0,
                  },
                  {
                    x: 90.133,
                    z: -58.519,
                    levelIndex: 0,
                  },
                  {
                    x: 87.838,
                    z: -58.519,
                    levelIndex: 0,
                  },
                  {
                    x: 87.838,
                    z: -61.883,
                    levelIndex: 0,
                  },
                  {
                    x: 90.582,
                    z: -61.883,
                    levelIndex: 0,
                  },
                ],
              ],
              layerType: "polygon",
              mapped: true,
            },
            {
              id: "5a9bbacf-986a-4ec8-ba38-837e646edba8",
              name: "7",
              levelIndex: 0,
              coordinates: [
                [
                  {
                    x: 112.699,
                    z: -56.973,
                    levelIndex: 0,
                  },
                  {
                    x: 112.624,
                    z: -54.035,
                    levelIndex: 0,
                  },
                  {
                    x: 113.684,
                    z: -54.015,
                    levelIndex: 0,
                  },
                  {
                    x: 113.671,
                    z: -56.988,
                    levelIndex: 0,
                  },
                ],
              ],
              layerType: "polygon",
              mapped: true,
            },
            {
              id: "4666b2f4-5a2a-413a-82fc-8264607e0296",
              name: "3",
              levelIndex: 0,
              coordinates: [
                [
                  {
                    x: 99.768,
                    z: -33.183,
                    levelIndex: 0,
                  },
                  {
                    x: 99.768,
                    z: -34.704,
                    levelIndex: 0,
                  },
                  {
                    x: 85.744,
                    z: -34.658,
                    levelIndex: 0,
                  },
                  {
                    x: 87.792,
                    z: -33.167,
                    levelIndex: 0,
                  },
                ],
              ],
              layerType: "polygon",
              mapped: true,
            },
          ],
        },
        {
          id: "ccb6b67b-5390-4fee-86da-e9b6719a7abf",
          name: "Study Carrel",
          type: "furniture",
          assets: [
            {
              id: "42bdca4d-fc80-4f55-a796-5bd031316ecf",
              name: "1FN-S01",
              furnitureId: "0462759d-67ad-4298-b03d-108aec5aa3df",
              layerType: "furniture",
            },
            {
              id: "8e4fbab5-9ba8-47dc-918a-af62fa1d947d",
              name: "1FN-S02",
              furnitureId: "825c9447-4ce0-43e9-9422-8640c2fe0889",
              layerType: "furniture",
            },
            {
              id: "0b4311cd-1db5-4f0f-b82e-dbacb09081dd",
              name: "1FN-S03",
              furnitureId: "0a8d7ecd-cbf4-4ab2-a79f-79ea51922e11",
              layerType: "furniture",
            },
            {
              id: "b5e712e1-d66a-403f-9cd8-27442d7f1ca0",
              name: "1FN-S04",
              furnitureId: "1fca3da0-2a42-4f4c-a24c-8accb0e02ade",
              layerType: "furniture",
            },
            {
              id: "1d656bd2-ef02-4dda-bb68-c2b7b6d7dda7",
              name: "1FN-S05",
              furnitureId: "7bea9b11-b08e-4181-8846-ad1963e992f5",
              layerType: "furniture",
            },
            {
              id: "6da6a986-cd38-4f29-9388-ccf290629c0e",
              name: "1FS-S01",
              furnitureId: "8dc6f5ee-7b9e-4b6a-8e2e-9ce9b72978f3",
              layerType: "furniture",
            },
            {
              id: "09b0f796-65a6-414e-8e6f-67f20f3c8f82",
              name: "1FS-S02",
              furnitureId: "eb1b8273-acb5-4c98-860f-df11379a460c",
              layerType: "furniture",
            },
            {
              id: "30ac0798-2e69-4f28-b03f-070086801fe0",
              name: "1FS-S03",
              furnitureId: "7f3a0e20-d8be-4c8a-9020-22a4bd1775b0",
              layerType: "furniture",
            },
            {
              id: "49f1be74-7048-4bd8-b79d-36dff73974fe",
              name: "1FS-S04",
              furnitureId: "26259612-d093-4f6d-bafd-f577161bf300",
              layerType: "furniture",
            },
            {
              id: "1d56a21a-d29f-44da-aed5-62070e1c0a10",
              name: "1FS-S05",
              furnitureId: "54fa9a6d-0602-404b-b0db-bd66cc58f082",
              layerType: "furniture",
            },
            {
              id: "e70fa992-b1aa-471d-9a49-815e214e1dc4",
              name: "CPR2-S01",
              furnitureId: "b99e16d8-2015-4b1c-b93b-32c9376d6e86",
              layerType: "furniture",
            },
            {
              id: "85128b09-e0b1-41df-a66d-4c318c5c3d7c",
              name: "CPR2-S02",
              furnitureId: "7adc37bb-7307-443c-892f-5c4285e2558c",
              layerType: "furniture",
            },
            {
              id: "0ac2b782-68e9-4e2b-a75d-2be29e458433",
              name: "CPR2-S03",
              furnitureId: "05c94e26-47e7-407a-a2af-e5ab367c1f68",
              layerType: "furniture",
            },
            {
              id: "80d2f67b-1f50-4666-97ac-aee27dec15b5",
              name: "CPR2-S04",
              furnitureId: "b7f89e8a-bb70-4491-a603-9e5ffa97875c",
              layerType: "furniture",
            },
            {
              id: "cd12f3e1-4e45-47c8-8a87-387547cd0aad",
              name: "CPR2-S05",
              furnitureId: "31756558-5f42-4eb0-9f5c-27f5d05ac206",
              layerType: "furniture",
            },
            {
              id: "a52c4736-af47-420e-9121-76e19f539f18",
              name: "CPR2-S06",
              furnitureId: "aaf7e27e-dad7-439a-aa44-5f1735e1448e",
              layerType: "furniture",
            },
            {
              id: "1eb2f908-f18e-4a17-8b99-0fb1b0814e45",
              name: "CPR2-S07",
              furnitureId: "57769669-3790-4e03-80b9-a8e36987687b",
              layerType: "furniture",
            },
            {
              id: "68c552d1-f68b-41d1-aab4-180691b25db0",
              name: "CPR2-S08",
              furnitureId: "8f499835-77d7-4733-a1d5-4938441a43ef",
              layerType: "furniture",
            },
            {
              id: "b445e34f-c0d6-40d1-8662-9c84900f5ba2",
              name: "CPR2-S09",
              furnitureId: "287c7ec5-2e6b-4cf4-94a1-4bbfc6f0a74c",
              layerType: "furniture",
            },
            {
              id: "45c0c8c5-ecc3-4027-a76e-2f50bc35d887",
              name: "CPR2-S10",
              furnitureId: "712e9b44-38e9-4e92-961a-f05b440c0378",
              layerType: "furniture",
            },
            {
              id: "1ca08a3d-b48d-44a7-a2ab-819e89d35321",
              name: "CPR2-S11",
              furnitureId: "1beec305-6f25-48b1-8930-d0efa26cad25",
              layerType: "furniture",
            },
            {
              id: "052088a6-512e-4b9a-bada-62208be0c794",
              name: "CPR2-S12",
              furnitureId: "7c5b258c-adac-40b3-881b-333a9f232ebd",
              layerType: "furniture",
            },
            {
              id: "7ab865b3-5108-4d3d-84c5-bab89522eea9",
              name: "CPR2-S13",
              furnitureId: "6aa0c305-f960-43ac-ab8f-3fda4085f542",
              layerType: "furniture",
            },
            {
              id: "ba3e3c63-88d4-42b0-ac39-62ac26bc53d0",
              name: "CPR2-S14",
              furnitureId: "f87e587f-8e8f-46f8-bc79-a2e2132bfed9",
              layerType: "furniture",
            },
            {
              id: "18332415-f6b7-4de9-aa10-1ddadddde3ad",
              name: "CPR2-S15",
              furnitureId: "171671c2-a799-4387-97c8-511f31fb5aad",
              layerType: "furniture",
            },
            {
              id: "4818d95a-1832-453e-95a3-df093008ddf4",
              name: "CPR2-S16",
              furnitureId: "7c42a50b-99a8-4ba9-8c2f-2211c52438b3",
              layerType: "furniture",
            },
            {
              id: "535702ed-6a93-481d-a3e9-6c896267e93e",
              name: "CPR2-S17",
              furnitureId: "31d5f9a5-99bb-4d54-beaa-e6737a0304a6",
              layerType: "furniture",
            },
            {
              id: "a006abea-66cd-4992-b278-02c09eb8de3f",
              name: "CPR2-S18",
              furnitureId: "14fc669d-ffa6-4557-831d-a1741d0faedd",
              layerType: "furniture",
            },
            {
              id: "9feacc01-062e-491c-9dc7-ef05bf8b1e8c",
              name: "CPR2-S19",
              furnitureId: "7f638fe5-db19-4ce6-9333-0915a5c78414",
              layerType: "furniture",
            },
            {
              id: "d3a0c02a-2c6f-45b1-abbf-2c7698754b46",
              name: "CPR2-S22",
              furnitureId: "294f5b13-a461-4bdf-b676-eec2b4fa072f",
              layerType: "furniture",
            },
            {
              id: "170cf3d1-7880-4a2e-9212-752d266fdae0",
              name: "CPR2-S23",
              furnitureId: "820f3f69-e48b-49ed-9853-ecbff99f5944",
              layerType: "furniture",
            },
            {
              id: "ee7f03a1-25a2-413b-96dd-e57398e02633",
              name: "CPR2-S24",
              furnitureId: "3f244aa7-9844-43b7-8641-678af3a203bd",
              layerType: "furniture",
            },
            {
              id: "fe0c88f1-3707-449a-b913-4f4bb29ff29b",
              name: "CPR2-S25",
              furnitureId: "919a333c-c8d2-4105-b0cb-78af945efffb",
              layerType: "furniture",
            },
            {
              id: "d9505390-aa44-4a55-afd4-46f4ee9e6f80",
              name: "CPR2-S26",
              furnitureId: "22550d33-2611-4a95-b418-906787b86512",
              layerType: "furniture",
            },
            {
              id: "9989c5ca-c115-4751-86ad-faaec1215da7",
              name: "CPR2-S20",
              furnitureId: "08a042a9-1c0a-4419-b616-eb54cd010d34",
              layerType: "furniture",
            },
            {
              id: "4c84eb50-7360-40e8-a0dc-9687e33cdd0e",
              name: "CPR2-S21",
              furnitureId: "35a73412-07e5-4c6c-bd85-1f4acde72fd1",
              layerType: "furniture",
            },
          ],
        },
         {
    "id": "d3eecdbc-aa2d-4d4c-bdab-3a62e548810f",
    "name": "facilities_list",
    "type": "polygon",
    "assets": [
      {
        "id": "8eabb130-bc01-471c-bc05-f68b6f5328cd",
        "name": "Books A-DS776 (1/F Zone A)",
        "levelIndex": 0,
        "coordinates": [
          [
            {
              "x": 119.711,
              "z": -31.47,
              "levelIndex": 0
            },
            {
              "x": 125.619,
              "z": -31.517,
              "levelIndex": 0
            },
            {
              "x": 125.574,
              "z": -38.015,
              "levelIndex": 0
            },
            {
              "x": 119.916,
              "z": -38.074,
              "levelIndex": 0
            },
            {
              "x": 119.736,
              "z": -49.083,
              "levelIndex": 0
            },
            {
              "x": 124.114,
              "z": -49.088,
              "levelIndex": 0
            },
            {
              "x": 124.132,
              "z": -52.929,
              "levelIndex": 0
            },
            {
              "x": 117.526,
              "z": -52.876,
              "levelIndex": 0
            },
            {
              "x": 117.536,
              "z": -49.081,
              "levelIndex": 0
            },
            {
              "x": 119.579,
              "z": -49.087,
              "levelIndex": 0
            },
            {
              "x": 119.681,
              "z": -45.711,
              "levelIndex": 0
            },
            {
              "x": 116.318,
              "z": -45.654,
              "levelIndex": 0
            },
            {
              "x": 116.269,
              "z": -48.255,
              "levelIndex": 0
            },
            {
              "x": 111.911,
              "z": -48.269,
              "levelIndex": 0
            },
            {
              "x": 111.822,
              "z": -52.757,
              "levelIndex": 0
            },
            {
              "x": 109.922,
              "z": -52.775,
              "levelIndex": 0
            },
            {
              "x": 109.891,
              "z": -45.712,
              "levelIndex": 0
            },
            {
              "x": 107.188,
              "z": -45.703,
              "levelIndex": 0
            },
            {
              "x": 107.177,
              "z": -52.844,
              "levelIndex": 0
            },
            {
              "x": 104.046,
              "z": -52.801,
              "levelIndex": 0
            },
            {
              "x": 104.038,
              "z": -51.841,
              "levelIndex": 0
            },
            {
              "x": 98.116,
              "z": -51.795,
              "levelIndex": 0
            },
            {
              "x": 92.046,
              "z": -51.697,
              "levelIndex": 0
            },
            {
              "x": 91.966,
              "z": -46.249,
              "levelIndex": 0
            },
            {
              "x": 89.551,
              "z": -46.267,
              "levelIndex": 0
            },
            {
              "x": 89.563,
              "z": -43.384,
              "levelIndex": 0
            },
            {
              "x": 101.006,
              "z": -43.438,
              "levelIndex": 0
            },
            {
              "x": 100.963,
              "z": -47.177,
              "levelIndex": 0
            },
            {
              "x": 98.101,
              "z": -47.141,
              "levelIndex": 0
            },
            {
              "x": 98.041,
              "z": -49.879,
              "levelIndex": 0
            },
            {
              "x": 102.398,
              "z": -49.912,
              "levelIndex": 0
            },
            {
              "x": 102.434,
              "z": -43.46,
              "levelIndex": 0
            },
            {
              "x": 103.126,
              "z": -43.388,
              "levelIndex": 0
            },
            {
              "x": 103.106,
              "z": -45.32,
              "levelIndex": 0
            },
            {
              "x": 107.326,
              "z": -45.355,
              "levelIndex": 0
            },
            {
              "x": 116.277,
              "z": -45.399,
              "levelIndex": 0
            },
            {
              "x": 119.69,
              "z": -45.477,
              "levelIndex": 0
            },
            {
              "x": 119.718,
              "z": -37.654,
              "levelIndex": 0
            }
          ]
        ],
        "layerType": "polygon",
        "mapped": true
      },
      {
        "id": "4e979083-7039-413f-ae3a-a9a9c2d8354b",
        "name": "Service Counter (1/F Zone A)",
        "levelIndex": 0,
        "coordinates": [
          [
            {
              "x": 87.349,
              "z": -40.956,
              "levelIndex": 0
            },
            {
              "x": 87.327,
              "z": -37.442,
              "levelIndex": 0
            },
            {
              "x": 84.075,
              "z": -37.451,
              "levelIndex": 0
            },
            {
              "x": 84.006,
              "z": -40.956,
              "levelIndex": 0
            }
          ]
        ],
        "layerType": "polygon",
        "mapped": true
      },
      {
        "id": "b0fffa25-4d5e-4644-8da8-6202babdd322",
        "name": "Books DS777-HJ (1/F Zone C)",
        "levelIndex": 0,
        "coordinates": [
          [
            {
              "x": 13.924,
              "z": -31.245,
              "levelIndex": 0
            },
            {
              "x": 31.741,
              "z": -31.258,
              "levelIndex": 0
            },
            {
              "x": 31.722,
              "z": -30.494,
              "levelIndex": 0
            },
            {
              "x": 37.501,
              "z": -30.431,
              "levelIndex": 0
            },
            {
              "x": 37.476,
              "z": -39.729,
              "levelIndex": 0
            },
            {
              "x": 40.924,
              "z": -39.741,
              "levelIndex": 0
            },
            {
              "x": 40.935,
              "z": -36.212,
              "levelIndex": 0
            },
            {
              "x": 49.911,
              "z": -36.168,
              "levelIndex": 0
            },
            {
              "x": 49.844,
              "z": -35.396,
              "levelIndex": 0
            },
            {
              "x": 53.249,
              "z": -35.435,
              "levelIndex": 0
            },
            {
              "x": 53.256,
              "z": -36.484,
              "levelIndex": 0
            },
            {
              "x": 54.539,
              "z": -36.354,
              "levelIndex": 0
            },
            {
              "x": 54.565,
              "z": -42.042,
              "levelIndex": 0
            },
            {
              "x": 47.002,
              "z": -42.001,
              "levelIndex": 0
            },
            {
              "x": 46.991,
              "z": -42.755,
              "levelIndex": 0
            },
            {
              "x": 40.936,
              "z": -42.778,
              "levelIndex": 0
            },
            {
              "x": 40.919,
              "z": -39.877,
              "levelIndex": 0
            },
            {
              "x": 31.8,
              "z": -39.721,
              "levelIndex": 0
            },
            {
              "x": 31.733,
              "z": -37.634,
              "levelIndex": 0
            },
            {
              "x": 20.069,
              "z": -37.694,
              "levelIndex": 0
            },
            {
              "x": 20.027,
              "z": -50.01,
              "levelIndex": 0
            },
            {
              "x": 32.354,
              "z": -50.042,
              "levelIndex": 0
            },
            {
              "x": 32.316,
              "z": -48.181,
              "levelIndex": 0
            },
            {
              "x": 36.956,
              "z": -48.174,
              "levelIndex": 0
            },
            {
              "x": 36.984,
              "z": -51.534,
              "levelIndex": 0
            },
            {
              "x": 50.644,
              "z": -51.484,
              "levelIndex": 0
            },
            {
              "x": 50.674,
              "z": -48.09,
              "levelIndex": 0
            },
            {
              "x": 50.76,
              "z": -47.738,
              "levelIndex": 0
            },
            {
              "x": 55.308,
              "z": -47.81,
              "levelIndex": 0
            },
            {
              "x": 55.263,
              "z": -51.596,
              "levelIndex": 0
            },
            {
              "x": 50.587,
              "z": -51.543,
              "levelIndex": 0
            },
            {
              "x": 44.41,
              "z": -51.598,
              "levelIndex": 0
            },
            {
              "x": 36.962,
              "z": -51.593,
              "levelIndex": 0
            },
            {
              "x": 36.953,
              "z": -52.934,
              "levelIndex": 0
            },
            {
              "x": 14.684,
              "z": -52.981,
              "levelIndex": 0
            },
            {
              "x": 14.69,
              "z": -50.96,
              "levelIndex": 0
            },
            {
              "x": 19.87,
              "z": -50.981,
              "levelIndex": 0
            },
            {
              "x": 19.85,
              "z": -49.973,
              "levelIndex": 0
            },
            {
              "x": 19.903,
              "z": -37.729,
              "levelIndex": 0
            },
            {
              "x": 15.115,
              "z": -37.682,
              "levelIndex": 0
            },
            {
              "x": 13.878,
              "z": -37.681,
              "levelIndex": 0
            },
            {
              "x": 13.844,
              "z": -35.547,
              "levelIndex": 0
            },
            {
              "x": 13.851,
              "z": -32.987,
              "levelIndex": 0
            },
            {
              "x": 13.859,
              "z": -31.499,
              "levelIndex": 0
            },
            {
              "x": 13.859,
              "z": -31.315,
              "levelIndex": 0
            },
            {
              "x": 13.812,
              "z": -31.452,
              "levelIndex": 0
            }
          ]
        ],
        "layerType": "polygon",
        "mapped": true
      },
      {
        "id": "b9742b16-2e75-48e8-80f3-30741701b9d7",
        "name": "Course Reserves (1/F Zone A)",
        "levelIndex": 0,
        "coordinates": [
          [
            {
              "x": 98.315,
              "z": -56.821,
              "levelIndex": 0
            },
            {
              "x": 98.42,
              "z": -52.622,
              "levelIndex": 0
            },
            {
              "x": 92.182,
              "z": -52.669,
              "levelIndex": 0
            },
            {
              "x": 92.21,
              "z": -56.848,
              "levelIndex": 0
            }
          ]
        ],
        "layerType": "polygon",
        "mapped": true
      },
      {
        "id": "dd2cfc47-0d25-4c92-8c00-28184126a7b7",
        "name": "Good Reads, New Arrivals (1/F Zone B)",
        "levelIndex": 0,
        "coordinates": [
          [
            {
              "x": 79.794,
              "z": -47.928,
              "levelIndex": 0
            },
            {
              "x": 79.83,
              "z": -47.266,
              "levelIndex": 0
            },
            {
              "x": 75.248,
              "z": -47.261,
              "levelIndex": 0
            },
            {
              "x": 75.304,
              "z": -48.02,
              "levelIndex": 0
            },
            {
              "x": 79.897,
              "z": -47.986,
              "levelIndex": 0
            },
            {
              "x": 79.853,
              "z": -48.04,
              "levelIndex": 0
            }
          ]
        ],
        "layerType": "polygon",
        "mapped": true
      },
      {
        "id": "105cf21f-aaa2-465c-afd0-9c7a33f32d37",
        "name": "High Use Books (1/F Zone B)",
        "levelIndex": 0,
        "coordinates": [
          [
            {
              "x": 57.208,
              "z": -49.805,
              "levelIndex": 0
            },
            {
              "x": 57.329,
              "z": -56.841,
              "levelIndex": 0
            },
            {
              "x": 81.561,
              "z": -56.897,
              "levelIndex": 0
            },
            {
              "x": 81.444,
              "z": -49.538,
              "levelIndex": 0
            },
            {
              "x": 81.45,
              "z": -49.246,
              "levelIndex": 0
            },
            {
              "x": 75.703,
              "z": -49.224,
              "levelIndex": 0
            },
            {
              "x": 75.607,
              "z": -48.698,
              "levelIndex": 0
            },
            {
              "x": 75.583,
              "z": -48.083,
              "levelIndex": 0
            },
            {
              "x": 75.916,
              "z": -47.965,
              "levelIndex": 0
            },
            {
              "x": 79.899,
              "z": -47.92,
              "levelIndex": 0
            },
            {
              "x": 79.894,
              "z": -47.247,
              "levelIndex": 0
            },
            {
              "x": 64.193,
              "z": -47.261,
              "levelIndex": 0
            },
            {
              "x": 64.214,
              "z": -48.13,
              "levelIndex": 0
            },
            {
              "x": 75.623,
              "z": -48.049,
              "levelIndex": 0
            },
            {
              "x": 75.657,
              "z": -49.17,
              "levelIndex": 0
            },
            {
              "x": 75.673,
              "z": -49.643,
              "levelIndex": 0
            },
            {
              "x": 80.82,
              "z": -49.663,
              "levelIndex": 0
            },
            {
              "x": 80.878,
              "z": -56.215,
              "levelIndex": 0
            },
            {
              "x": 57.907,
              "z": -56.347,
              "levelIndex": 0
            },
            {
              "x": 57.866,
              "z": -50.137,
              "levelIndex": 0
            },
            {
              "x": 61.743,
              "z": -50.11,
              "levelIndex": 0
            },
            {
              "x": 61.753,
              "z": -49.413,
              "levelIndex": 0
            },
            {
              "x": 57.971,
              "z": -49.844,
              "levelIndex": 0
            }
          ]
        ],
        "layerType": "polygon",
        "mapped": true
      },
      {
        "id": "adbe21f3-e422-40b1-9ee8-6de4a9dd9eda",
        "name": "Category III Multimedia  Ask at Service Counter (1/F Zone A)",
        "levelIndex": 0,
        "coordinates": [
          [
            {
              "x": 87.338,
              "z": -40.872,
              "levelIndex": 0
            },
            {
              "x": 87.036,
              "z": -40.865,
              "levelIndex": 0
            },
            {
              "x": 87.093,
              "z": -37.554,
              "levelIndex": 0
            },
            {
              "x": 87.406,
              "z": -37.516,
              "levelIndex": 0
            }
          ]
        ],
        "layerType": "polygon",
        "mapped": true
      },
      {
        "id": "8af4da12-d126-4709-91d1-ebdd945b3297",
        "name": "Staff Publications (1/F Zone B)",
        "levelIndex": 0,
        "coordinates": [
          [
            {
              "x": 73.396,
              "z": -47.264,
              "levelIndex": 0
            },
            {
              "x": 64.301,
              "z": -47.28,
              "levelIndex": 0
            },
            {
              "x": 64.247,
              "z": -47.703,
              "levelIndex": 0
            },
            {
              "x": 73.356,
              "z": -47.892,
              "levelIndex": 0
            }
          ]
        ],
        "layerType": "polygon",
        "mapped": true
      },
      {
        "id": "e02c5df4-47f8-4ddb-a72f-57f487eb9769",
        "name": "Chiang Chen Information Commons (1/F Zone A)",
        "levelIndex": 0,
        "coordinates": [
          [
            {
              "x": 98.305,
              "z": -41.32,
              "levelIndex": 0
            },
            {
              "x": 98.319,
              "z": -35.8,
              "levelIndex": 0
            },
            {
              "x": 95.823,
              "z": -35.77,
              "levelIndex": 0
            },
            {
              "x": 95.802,
              "z": -38.826,
              "levelIndex": 0
            },
            {
              "x": 94.135,
              "z": -38.839,
              "levelIndex": 0
            },
            {
              "x": 94.112,
              "z": -35.757,
              "levelIndex": 0
            },
            {
              "x": 91.43,
              "z": -35.728,
              "levelIndex": 0
            },
            {
              "x": 91.34,
              "z": -41.332,
              "levelIndex": 0
            },
            {
              "x": 94.162,
              "z": -41.373,
              "levelIndex": 0
            },
            {
              "x": 94.135,
              "z": -38.913,
              "levelIndex": 0
            },
            {
              "x": 95.791,
              "z": -38.928,
              "levelIndex": 0
            },
            {
              "x": 95.787,
              "z": -41.287,
              "levelIndex": 0
            }
          ]
        ],
        "layerType": "polygon",
        "mapped": true
      },
      {
        "id": "91eca3a2-4ab9-4e59-94fd-1f2838f8bf30",
        "name": "Computer Room 2(1/F Zone B)",
        "levelIndex": 0,
        "coordinates": [
          [
            {
              "x": 87.836,
              "z": -62.018,
              "levelIndex": 0
            },
            {
              "x": 90.53,
              "z": -61.989,
              "levelIndex": 0
            },
            {
              "x": 90.565,
              "z": -58.496,
              "levelIndex": 0
            },
            {
              "x": 90.726,
              "z": -55.315,
              "levelIndex": 0
            },
            {
              "x": 91.004,
              "z": -55.218,
              "levelIndex": 0
            },
            {
              "x": 91.021,
              "z": -52.518,
              "levelIndex": 0
            },
            {
              "x": 81.565,
              "z": -52.606,
              "levelIndex": 0
            },
            {
              "x": 81.757,
              "z": -62.044,
              "levelIndex": 0
            },
            {
              "x": 81.818,
              "z": -61.976,
              "levelIndex": 0
            },
            {
              "x": 87.832,
              "z": -62.099,
              "levelIndex": 0
            }
          ]
        ],
        "layerType": "polygon",
        "mapped": true
      },
      {
        "id": "58e3b3bc-c7e0-4792-834b-a0acd95b30dd",
        "name": "SEN Workstation 1 (1/F Zone B)",
        "levelIndex": 0,
        "coordinates": [
          [
            {
              "x": 87.839,
              "z": -62.04,
              "levelIndex": 0
            },
            {
              "x": 87.821,
              "z": -60.794,
              "levelIndex": 0
            },
            {
              "x": 86.543,
              "z": -60.752,
              "levelIndex": 0
            },
            {
              "x": 86.548,
              "z": -62.019,
              "levelIndex": 0
            }
          ]
        ],
        "layerType": "polygon",
        "mapped": true
      },
      {
        "id": "66fe8cfe-7064-407f-bb15-07e51ef34241",
        "name": "SEN Workstation 2 (1/F Zone C)",
        "levelIndex": 0,
        "coordinates": [
          [
            {
              "x": 40.42,
              "z": -48.722,
              "levelIndex": 0
            },
            {
              "x": 39.134,
              "z": -48.682,
              "levelIndex": 0
            },
            {
              "x": 39.13,
              "z": -49.893,
              "levelIndex": 0
            },
            {
              "x": 40.42,
              "z": -49.909,
              "levelIndex": 0
            }
          ]
        ],
        "layerType": "polygon",
        "mapped": true
      },
      {
        "id": "34591980-9858-4f69-9fd3-564efa471f47",
        "name": "Bloomberg Terminal - Database Workstation (1/F Zone B)",
        "levelIndex": 0,
        "coordinates": [
          [
            {
              "x": 85.568,
              "z": -61.821,
              "levelIndex": 0
            },
            {
              "x": 85.536,
              "z": -60.927,
              "levelIndex": 0
            },
            {
              "x": 84.598,
              "z": -60.894,
              "levelIndex": 0
            },
            {
              "x": 84.651,
              "z": -61.792,
              "levelIndex": 0
            }
          ]
        ],
        "layerType": "polygon",
        "mapped": true
      },
      {
        "id": "f01851b9-36f0-42fd-850c-54242e0406f9",
        "name": "LSEG Workspace (1/F Zone B)",
        "levelIndex": 0,
        "coordinates": [
          [
            {
              "x": 85.527,
              "z": -60.926,
              "levelIndex": 0
            },
            {
              "x": 84.603,
              "z": -60.925,
              "levelIndex": 0
            },
            {
              "x": 84.598,
              "z": -60.214,
              "levelIndex": 0
            },
            {
              "x": 85.528,
              "z": -60.223,
              "levelIndex": 0
            }
          ]
        ],
        "layerType": "polygon",
        "mapped": true
      },
      {
        "id": "0f801a83-b1db-4de1-a0e4-cf1323684b4d",
        "name": "WIND  (1/F Zone B)",
        "levelIndex": 0,
        "coordinates": [
          [
            {
              "x": 85.552,
              "z": -60.234,
              "levelIndex": 0
            },
            {
              "x": 84.61,
              "z": -60.19,
              "levelIndex": 0
            },
            {
              "x": 84.633,
              "z": -59.41,
              "levelIndex": 0
            },
            {
              "x": 85.553,
              "z": -59.438,
              "levelIndex": 0
            }
          ]
        ],
        "layerType": "polygon",
        "mapped": true
      },
      {
        "id": "bcde2b79-a2b7-4545-8cf8-23707194140b",
        "name": "11-13 (1/F Zone A)",
        "levelIndex": 0,
        "coordinates": [
          [
            {
              "x": 90.51,
              "z": -38.612,
              "levelIndex": 0
            },
            {
              "x": 90.496,
              "z": -37.472,
              "levelIndex": 0
            },
            {
              "x": 89.232,
              "z": -37.464,
              "levelIndex": 0
            },
            {
              "x": 89.262,
              "z": -38.611,
              "levelIndex": 0
            }
          ]
        ],
        "layerType": "polygon",
        "mapped": true
      },
      {
        "id": "35cf415d-fad0-4475-9baf-4aa5e8468d0c",
        "name": "14-16BW (1/F Zone B)",
        "levelIndex": 0,
        "coordinates": [
          [
            {
              "x": 55.011,
              "z": -53.756,
              "levelIndex": 0
            },
            {
              "x": 55.069,
              "z": -52.571,
              "levelIndex": 0
            },
            {
              "x": 52.585,
              "z": -52.595,
              "levelIndex": 0
            },
            {
              "x": 52.607,
              "z": -53.79,
              "levelIndex": 0
            },
            {
              "x": 53.217,
              "z": -53.782,
              "levelIndex": 0
            }
          ]
        ],
        "layerType": "polygon",
        "mapped": true
      },
      {
        "id": "189f3c16-af29-4cef-983e-e0db9211b145",
        "name": "Individual Study Rooms 1  7 (1/F Zone C)",
        "levelIndex": 0,
        "coordinates": [
          [
            {
              "x": 26.835,
              "z": -54.033,
              "levelIndex": 0
            },
            {
              "x": 26.802,
              "z": -55.845,
              "levelIndex": 0
            },
            {
              "x": 26.864,
              "z": -56.954,
              "levelIndex": 0
            },
            {
              "x": 12.883,
              "z": -56.953,
              "levelIndex": 0
            },
            {
              "x": 12.858,
              "z": -54.02,
              "levelIndex": 0
            }
          ]
        ],
        "layerType": "polygon",
        "mapped": true
      },
      {
        "id": "fea82132-a02e-4f76-a681-04c7beb47c81",
        "name": "Individual Study Rooms 8 (1/F Zone C)",
        "levelIndex": 0,
        "coordinates": [
          [
            {
              "x": 45.145,
              "z": -52.621,
              "levelIndex": 0
            },
            {
              "x": 43.839,
              "z": -52.641,
              "levelIndex": 0
            },
            {
              "x": 43.847,
              "z": -54.126,
              "levelIndex": 0
            },
            {
              "x": 43.142,
              "z": -54.11,
              "levelIndex": 0
            },
            {
              "x": 43.136,
              "z": -56.917,
              "levelIndex": 0
            },
            {
              "x": 45.075,
              "z": -56.865,
              "levelIndex": 0
            }
          ]
        ],
        "layerType": "polygon",
        "mapped": true
      },
      {
        "id": "73f476ff-8e30-48e8-a0c9-21e0e1cbf642",
        "name": "Individual Study Rooms 9  11 (1/F Zone A)",
        "levelIndex": 0,
        "coordinates": [
          [
            {
              "x": 122.783,
              "z": -56.965,
              "levelIndex": 0
            },
            {
              "x": 122.807,
              "z": -54.013,
              "levelIndex": 0
            },
            {
              "x": 117.367,
              "z": -54.034,
              "levelIndex": 0
            },
            {
              "x": 117.391,
              "z": -56.961,
              "levelIndex": 0
            }
          ]
        ],
        "layerType": "polygon",
        "mapped": true
      },
      {
        "id": "d99d78b8-e98f-4833-a312-9eae30281a5d",
        "name": "Group Study Rooms 1  4 (1/F Zone C)",
        "levelIndex": 0,
        "coordinates": [
          [
            {
              "x": 23.209,
              "z": -46.325,
              "levelIndex": 0
            },
            {
              "x": 29.101,
              "z": -46.37,
              "levelIndex": 0
            },
            {
              "x": 29.08,
              "z": -41.149,
              "levelIndex": 0
            },
            {
              "x": 23.191,
              "z": -41.074,
              "levelIndex": 0
            }
          ]
        ],
        "layerType": "polygon",
        "mapped": true
      },
      {
        "id": "3b25ff8c-0de8-4d72-b1ff-0135ff6d9959",
        "name": "Group Study Room 5 (1/F Zone C)",
        "levelIndex": 0,
        "coordinates": [
          [
            {
              "x": 26.847,
              "z": -54.023,
              "levelIndex": 0
            },
            {
              "x": 26.814,
              "z": -56.996,
              "levelIndex": 0
            },
            {
              "x": 30.764,
              "z": -56.971,
              "levelIndex": 0
            },
            {
              "x": 30.749,
              "z": -54.011,
              "levelIndex": 0
            }
          ]
        ],
        "layerType": "polygon",
        "mapped": true
      },
      {
        "id": "f56a0186-a08c-49a5-8121-7bb306d70875",
        "name": "Group Study Rooms 8  9 (1/F Zone A)",
        "levelIndex": 0,
        "coordinates": [
          [
            {
              "x": 122.792,
              "z": -54.002,
              "levelIndex": 0
            },
            {
              "x": 126.464,
              "z": -54.065,
              "levelIndex": 0
            },
            {
              "x": 126.468,
              "z": -56.969,
              "levelIndex": 0
            },
            {
              "x": 113.726,
              "z": -57.001,
              "levelIndex": 0
            },
            {
              "x": 113.68,
              "z": -54.069,
              "levelIndex": 0
            },
            {
              "x": 117.349,
              "z": -54.094,
              "levelIndex": 0
            },
            {
              "x": 117.402,
              "z": -56.977,
              "levelIndex": 0
            },
            {
              "x": 122.842,
              "z": -56.982,
              "levelIndex": 0
            }
          ]
        ],
        "layerType": "polygon",
        "mapped": true
      },
      {
        "id": "518bf59e-372d-40b9-b5d4-426c1c5848a0",
        "name": "Postgraduate Research Carrels (1/F Zone B)",
        "levelIndex": 0,
        "coordinates": [
          [
            {
              "x": 80.348,
              "z": -62.3,
              "levelIndex": 0
            },
            {
              "x": 80.335,
              "z": -67.435,
              "levelIndex": 0
            },
            {
              "x": 83.021,
              "z": -67.435,
              "levelIndex": 0
            },
            {
              "x": 83.061,
              "z": -65.573,
              "levelIndex": 0
            },
            {
              "x": 89.322,
              "z": -65.553,
              "levelIndex": 0
            },
            {
              "x": 89.332,
              "z": -67.538,
              "levelIndex": 0
            },
            {
              "x": 91.983,
              "z": -67.456,
              "levelIndex": 0
            },
            {
              "x": 92.042,
              "z": -62.261,
              "levelIndex": 0
            },
            {
              "x": 90.537,
              "z": -62.213,
              "levelIndex": 0
            },
            {
              "x": 90.549,
              "z": -61.952,
              "levelIndex": 0
            },
            {
              "x": 81.688,
              "z": -61.978,
              "levelIndex": 0
            },
            {
              "x": 81.715,
              "z": -62.28,
              "levelIndex": 0
            }
          ]
        ],
        "layerType": "polygon",
        "mapped": true
      },
      {
        "id": "ef77d032-50b5-4afd-aab7-c67548335e42",
        "name": "Individual Study Carrels (1/F Zone A)",
        "levelIndex": 0,
        "coordinates": [
          [
            {
              "x": 126.403,
              "z": -52.815,
              "levelIndex": 0
            },
            {
              "x": 125.192,
              "z": -52.87,
              "levelIndex": 0
            },
            {
              "x": 125.118,
              "z": -48.472,
              "levelIndex": 0
            },
            {
              "x": 126.414,
              "z": -48.475,
              "levelIndex": 0
            }
          ]
        ],
        "layerType": "polygon",
        "mapped": true
      },
      {
        "id": "6d2fffd7-96a3-46c7-ab8d-039dd033ce82",
        "name": "Individual Study Carrels (1/F Zone C)",
        "levelIndex": 0,
        "coordinates": [
          [
            {
              "x": 14.935,
              "z": -48.226,
              "levelIndex": 0
            },
            {
              "x": 14.979,
              "z": -49.422,
              "levelIndex": 0
            },
            {
              "x": 19.136,
              "z": -49.39,
              "levelIndex": 0
            },
            {
              "x": 19.115,
              "z": -48.179,
              "levelIndex": 0
            }
          ]
        ],
        "layerType": "polygon",
        "mapped": true
      },
      {
        "id": "7d2ea75b-e44b-4a29-959f-b0442695d083",
        "name": "Activity Room (1/F Zone A)",
        "levelIndex": 0,
        "coordinates": [
          [
            {
              "x": 117.016,
              "z": -42.471,
              "levelIndex": 0
            },
            {
              "x": 110.875,
              "z": -42.477,
              "levelIndex": 0
            },
            {
              "x": 110.898,
              "z": -34.265,
              "levelIndex": 0
            },
            {
              "x": 116.95,
              "z": -34.264,
              "levelIndex": 0
            }
          ]
        ],
        "layerType": "polygon",
        "mapped": true
      },
      {
        "id": "c0617015-57c4-44a9-9712-a5f3968dab19",
        "name": "Caf (1/F Zone A)",
        "levelIndex": 0,
        "coordinates": [
          [
            {
              "x": 108.332,
              "z": -36.71,
              "levelIndex": 0
            },
            {
              "x": 108.341,
              "z": -30.139,
              "levelIndex": 0
            },
            {
              "x": 99.711,
              "z": -30.172,
              "levelIndex": 0
            },
            {
              "x": 99.833,
              "z": -34.799,
              "levelIndex": 0
            },
            {
              "x": 102.018,
              "z": -34.799,
              "levelIndex": 0
            },
            {
              "x": 102.065,
              "z": -36.711,
              "levelIndex": 0
            },
            {
              "x": 105.52,
              "z": -36.724,
              "levelIndex": 0
            }
          ]
        ],
        "layerType": "polygon",
        "mapped": true
      },
      {
        "id": "01f0550a-f30e-4268-8134-c978eeea974c",
        "name": "Computer Rooms 1 & 2 (1/F Zone B)",
        "levelIndex": 0,
        "coordinates": [
          [
            {
              "x": 57.443,
              "z": -56.591,
              "levelIndex": 0
            },
            {
              "x": 57.479,
              "z": -55.276,
              "levelIndex": 0
            },
            {
              "x": 56.779,
              "z": -55.17,
              "levelIndex": 0
            },
            {
              "x": 56.704,
              "z": -53.725,
              "levelIndex": 0
            },
            {
              "x": 55.312,
              "z": -53.732,
              "levelIndex": 0
            },
            {
              "x": 55.322,
              "z": -52.599,
              "levelIndex": 0
            },
            {
              "x": 50.611,
              "z": -52.531,
              "levelIndex": 0
            },
            {
              "x": 50.629,
              "z": -53.697,
              "levelIndex": 0
            },
            {
              "x": 48.61,
              "z": -53.65,
              "levelIndex": 0
            },
            {
              "x": 48.591,
              "z": -55.268,
              "levelIndex": 0
            },
            {
              "x": 49.27,
              "z": -55.321,
              "levelIndex": 0
            },
            {
              "x": 49.307,
              "z": -56.902,
              "levelIndex": 0
            },
            {
              "x": 48.843,
              "z": -56.914,
              "levelIndex": 0
            },
            {
              "x": 48.777,
              "z": -67.417,
              "levelIndex": 0
            },
            {
              "x": 50.126,
              "z": -67.466,
              "levelIndex": 0
            },
            {
              "x": 50.122,
              "z": -65.608,
              "levelIndex": 0
            },
            {
              "x": 56.258,
              "z": -65.589,
              "levelIndex": 0
            },
            {
              "x": 56.43,
              "z": -67.369,
              "levelIndex": 0
            },
            {
              "x": 57.574,
              "z": -67.44,
              "levelIndex": 0
            },
            {
              "x": 57.586,
              "z": -56.868,
              "levelIndex": 0
            },
            {
              "x": 81.625,
              "z": -56.939,
              "levelIndex": 0
            },
            {
              "x": 81.742,
              "z": -62.179,
              "levelIndex": 0
            },
            {
              "x": 90.591,
              "z": -62.24,
              "levelIndex": 0
            },
            {
              "x": 90.264,
              "z": -55.527,
              "levelIndex": 0
            },
            {
              "x": 91.274,
              "z": -55.45,
              "levelIndex": 0
            },
            {
              "x": 91.174,
              "z": -52.661,
              "levelIndex": 0
            },
            {
              "x": 81.459,
              "z": -52.624,
              "levelIndex": 0
            },
            {
              "x": 81.539,
              "z": -56.671,
              "levelIndex": 0
            }
          ]
        ],
        "layerType": "polygon",
        "mapped": true
      },
      {
        "id": "b4c8b792-7bfb-4fca-b431-d2fcbc21d75a",
        "name": "1/F (1/F Zone B)",
        "levelIndex": 0,
        "coordinates": [
          [
            {
              "x": 81.831,
              "z": -54.975,
              "levelIndex": 0
            },
            {
              "x": 82.418,
              "z": -54.969,
              "levelIndex": 0
            },
            {
              "x": 82.418,
              "z": -55.252,
              "levelIndex": 0
            },
            {
              "x": 81.838,
              "z": -55.245,
              "levelIndex": 0
            }
          ]
        ],
        "layerType": "polygon",
        "mapped": true
      },
      {
        "id": "38ff9505-f83e-4984-b823-2ace5a33be1a",
        "name": "1/F Male & Female (Zone A )",
        "levelIndex": 0,
        "coordinates": [
          [
            {
              "x": 126.746,
              "z": -38.987,
              "levelIndex": 0
            },
            {
              "x": 120.184,
              "z": -39.052,
              "levelIndex": 0
            },
            {
              "x": 120.258,
              "z": -40.823,
              "levelIndex": 0
            },
            {
              "x": 121.549,
              "z": -40.856,
              "levelIndex": 0
            },
            {
              "x": 121.576,
              "z": -41.978,
              "levelIndex": 0
            },
            {
              "x": 123.27,
              "z": -42.014,
              "levelIndex": 0
            },
            {
              "x": 123.258,
              "z": -43.909,
              "levelIndex": 0
            },
            {
              "x": 121.578,
              "z": -43.958,
              "levelIndex": 0
            },
            {
              "x": 121.555,
              "z": -46.348,
              "levelIndex": 0
            },
            {
              "x": 120.22,
              "z": -46.327,
              "levelIndex": 0
            },
            {
              "x": 120.198,
              "z": -48.091,
              "levelIndex": 0
            },
            {
              "x": 126.741,
              "z": -48.085,
              "levelIndex": 0
            },
            {
              "x": 126.721,
              "z": -44.083,
              "levelIndex": 0
            },
            {
              "x": 126.802,
              "z": -43.795,
              "levelIndex": 0
            }
          ]
        ],
        "layerType": "polygon",
        "mapped": true
      },
      {
        "id": "c2147e3f-df78-4349-b9f0-156c2b848c95",
        "name": "1/F Male & Female ( Zone C)",
        "levelIndex": 0,
        "coordinates": [
          [
            {
              "x": 19.362,
              "z": -38.93,
              "levelIndex": 0
            },
            {
              "x": 12.769,
              "z": -38.963,
              "levelIndex": 0
            },
            {
              "x": 12.826,
              "z": -48.098,
              "levelIndex": 0
            },
            {
              "x": 19.4,
              "z": -48.08,
              "levelIndex": 0
            },
            {
              "x": 19.322,
              "z": -46.278,
              "levelIndex": 0
            },
            {
              "x": 17.978,
              "z": -46.278,
              "levelIndex": 0
            },
            {
              "x": 18.016,
              "z": -43.857,
              "levelIndex": 0
            },
            {
              "x": 16.254,
              "z": -43.853,
              "levelIndex": 0
            },
            {
              "x": 16.269,
              "z": -41.958,
              "levelIndex": 0
            },
            {
              "x": 18.016,
              "z": -41.957,
              "levelIndex": 0
            },
            {
              "x": 18.023,
              "z": -40.77,
              "levelIndex": 0
            },
            {
              "x": 19.4,
              "z": -40.797,
              "levelIndex": 0
            },
            {
              "x": 19.371,
              "z": -40.241,
              "levelIndex": 0
            },
            {
              "x": 19.401,
              "z": -40.521,
              "levelIndex": 0
            }
          ]
        ],
        "layerType": "polygon",
        "mapped": true
      },
      {
        "id": "64ad1506-1d62-4522-9c9d-6a98e6776221",
        "name": "1/F Unisex  Available during Overnight Study Period (Zone B)",
        "levelIndex": 0,
        "coordinates": [
          [
            {
              "x": 45.063,
              "z": -56.956,
              "levelIndex": 0
            },
            {
              "x": 45.085,
              "z": -52.66,
              "levelIndex": 0
            },
            {
              "x": 49.126,
              "z": -52.66,
              "levelIndex": 0
            },
            {
              "x": 49.129,
              "z": -53.691,
              "levelIndex": 0
            },
            {
              "x": 48.617,
              "z": -53.733,
              "levelIndex": 0
            },
            {
              "x": 48.579,
              "z": -55.25,
              "levelIndex": 0
            },
            {
              "x": 49.175,
              "z": -55.262,
              "levelIndex": 0
            },
            {
              "x": 49.201,
              "z": -56.14,
              "levelIndex": 0
            },
            {
              "x": 48.13,
              "z": -56.134,
              "levelIndex": 0
            },
            {
              "x": 48.102,
              "z": -56.991,
              "levelIndex": 0
            }
          ]
        ],
        "layerType": "polygon",
        "mapped": true
      },
      {
        "id": "70605524-2b5b-4932-ab0b-3f87a5db0818",
        "name": "1/F Accessible Toilets (Zone C)",
        "levelIndex": 0,
        "coordinates": [
          [
            {
              "x": 16.239,
              "z": -43.863,
              "levelIndex": 0
            },
            {
              "x": 18.016,
              "z": -43.891,
              "levelIndex": 0
            },
            {
              "x": 18.009,
              "z": -41.962,
              "levelIndex": 0
            },
            {
              "x": 16.264,
              "z": -41.942,
              "levelIndex": 0
            }
          ]
        ],
        "layerType": "polygon",
        "mapped": true
      },
      {
        "id": "7284e274-62cf-4b13-96ea-eb6fc45a6606",
        "name": "1/F Accessible Toilets (Zone A)",
        "levelIndex": 0,
        "coordinates": [
          [
            {
              "x": 121.542,
              "z": -43.963,
              "levelIndex": 0
            },
            {
              "x": 123.257,
              "z": -43.92,
              "levelIndex": 0
            },
            {
              "x": 123.271,
              "z": -42.007,
              "levelIndex": 0
            },
            {
              "x": 121.525,
              "z": -41.995,
              "levelIndex": 0
            },
            {
              "x": 121.531,
              "z": -42.794,
              "levelIndex": 0
            },
            {
              "x": 121.531,
              "z": -43.257,
              "levelIndex": 0
            }
          ]
        ],
        "layerType": "polygon",
        "mapped": true
      },
      {
        "id": "f6de3312-c59f-4f2a-ab76-ba1e99bdb5af",
        "name": "Book Drop (1/F Zone B)",
        "levelIndex": 0,
        "coordinates": [
          [
            {
              "x": 66.968,
              "z": -39.507,
              "levelIndex": 0
            },
            {
              "x": 66.98,
              "z": -40.301,
              "levelIndex": 0
            },
            {
              "x": 67.713,
              "z": -40.285,
              "levelIndex": 0
            },
            {
              "x": 67.695,
              "z": -39.498,
              "levelIndex": 0
            }
          ]
        ],
        "layerType": "polygon",
        "mapped": true
      },
      {
        "id": "e4414eb6-7a52-4e27-833a-035b1f711752",
        "name": "Book Sterilizer (1/ F Zone B)",
        "levelIndex": 0,
        "coordinates": [
          [
            {
              "x": 79.804,
              "z": -46.4,
              "levelIndex": 0
            },
            {
              "x": 78.718,
              "z": -46.398,
              "levelIndex": 0
            },
            {
              "x": 78.689,
              "z": -45.27,
              "levelIndex": 0
            },
            {
              "x": 79.834,
              "z": -45.265,
              "levelIndex": 0
            }
          ]
        ],
        "layerType": "polygon",
        "mapped": true
      },
      {
        "id": "2b15faa1-0a7f-489e-adb3-05b0954532bd",
        "name": "Self-Checkout Machine (1/F Zone A & Zone B)",
        "levelIndex": 0,
        "coordinates": [
          [
            {
              "x": 78.633,
              "z": -44.098,
              "levelIndex": 0
            },
            {
              "x": 79.775,
              "z": -44.111,
              "levelIndex": 0
            },
            {
              "x": 79.78,
              "z": -45.231,
              "levelIndex": 0
            },
            {
              "x": 78.612,
              "z": -45.28,
              "levelIndex": 0
            }
          ]
        ],
        "layerType": "polygon",
        "mapped": true
      },
      {
        "id": "7b343b35-04bc-442f-b769-5c1f737175ac",
        "name": "Self-Pickup Locker (1/F Zone B)",
        "levelIndex": 0,
        "coordinates": [
          [
            {
              "x": 62.805,
              "z": -45.052,
              "levelIndex": 0
            },
            {
              "x": 62.812,
              "z": -44.483,
              "levelIndex": 0
            },
            {
              "x": 60.529,
              "z": -44.502,
              "levelIndex": 0
            },
            {
              "x": 60.531,
              "z": -45.056,
              "levelIndex": 0
            }
          ]
        ],
        "layerType": "polygon",
        "mapped": true
      },
      {
        "id": "d67f0a01-4e82-4706-b206-1c1fc6f711a5",
        "name": "SEN Equipment  Service Counter (1/F Zone B)",
        "levelIndex": 0,
        "coordinates": [
          [
            {
              "x": 84.847,
              "z": -37.744,
              "levelIndex": 0
            },
            {
              "x": 84.869,
              "z": -40.569,
              "levelIndex": 0
            },
            {
              "x": 84.016,
              "z": -40.566,
              "levelIndex": 0
            },
            {
              "x": 84.058,
              "z": -37.733,
              "levelIndex": 0
            }
          ]
        ],
        "layerType": "polygon",
        "mapped": true
      },
      {
        "id": "7e0c30e3-6098-49bd-8a4f-207d916590c6",
        "name": "Laser Cutter / Engraver  LU Barn (Makerspace) Maker Room (1/F Zone A)",
        "levelIndex": 0,
        "coordinates": [
          [
            {
              "x": 111.881,
              "z": -56.949,
              "levelIndex": 0
            },
            {
              "x": 111.89,
              "z": -55.971,
              "levelIndex": 0
            },
            {
              "x": 112.668,
              "z": -55.98,
              "levelIndex": 0
            },
            {
              "x": 112.672,
              "z": -54.008,
              "levelIndex": 0
            },
            {
              "x": 108.725,
              "z": -54.025,
              "levelIndex": 0
            },
            {
              "x": 108.714,
              "z": -56.469,
              "levelIndex": 0
            },
            {
              "x": 109.076,
              "z": -56.495,
              "levelIndex": 0
            },
            {
              "x": 109.005,
              "z": -56.995,
              "levelIndex": 0
            }
          ]
        ],
        "layerType": "polygon",
        "mapped": true
      },
      {
        "id": "52412747-42c1-4b10-aaf9-77f7a36dfd01",
        "name": "Lift (1/F Zone B)",
        "levelIndex": 0,
        "coordinates": [
          [
            {
              "x": 63.342,
              "z": -47.467,
              "levelIndex": 0
            },
            {
              "x": 63.301,
              "z": -45.164,
              "levelIndex": 0
            },
            {
              "x": 60.374,
              "z": -45.164,
              "levelIndex": 0
            },
            {
              "x": 60.409,
              "z": -47.544,
              "levelIndex": 0
            }
          ]
        ],
        "layerType": "polygon",
        "mapped": true
      },
      {
        "id": "06c2e1b1-ee7d-4267-b30c-917b416fafb7",
        "name": "Late Reading Room (1/F Zone B)",
        "levelIndex": 0,
        "coordinates": [
          [
            {
              "x": 80.955,
              "z": -56.256,
              "levelIndex": 0
            },
            {
              "x": 80.799,
              "z": -49.711,
              "levelIndex": 0
            },
            {
              "x": 57.872,
              "z": -50.166,
              "levelIndex": 0
            },
            {
              "x": 57.974,
              "z": -56.361,
              "levelIndex": 0
            }
          ]
        ],
        "layerType": "polygon",
        "mapped": true
      }
    ]
  },
  {
    "id": "61955cf2-1cd6-4fe9-ba8b-a4b816d95b60",
    "name": "facilities_demo",
    "type": "polygon",
    "assets": [
      {
        "id": "5fdbdc2e-2461-403d-a038-4a42e1500ca4",
        "name": "Drinking water station 1F (1F/Zone B)",
        "levelIndex": 0,
        "coordinates": [
          [
            {
              "x": 82.416,
              "z": -55.277,
              "levelIndex": 0
            },
            {
              "x": 82.418,
              "z": -54.926,
              "levelIndex": 0
            },
            {
              "x": 81.779,
              "z": -54.932,
              "levelIndex": 0
            },
            {
              "x": 81.777,
              "z": -55.271,
              "levelIndex": 0
            }
          ]
        ],
        "layerType": "polygon",
        "mapped": true
      },
      {
        "id": "b67fbf3b-382b-4a1b-8c14-11caa973a5a3",
        "name": "Service Counter (1/F Zone A)",
        "levelIndex": 0,
        "coordinates": [
          [
            {
              "x": 87.497,
              "z": -40.895,
              "levelIndex": 0
            },
            {
              "x": 87.487,
              "z": -37.511,
              "levelIndex": 0
            },
            {
              "x": 84.017,
              "z": -37.456,
              "levelIndex": 0
            },
            {
              "x": 84.024,
              "z": -40.919,
              "levelIndex": 0
            },
            {
              "x": 87.508,
              "z": -40.916,
              "levelIndex": 0
            }
          ]
        ],
        "layerType": "polygon",
        "mapped": true
      },
      {
        "id": "d283c740-b483-43b2-abe8-2a35f9dc47a2",
        "name": "Lift (1/F Zone B)",
        "levelIndex": 0,
        "coordinates": [
          [
            {
              "x": 60.386,
              "z": -45.158,
              "levelIndex": 0
            },
            {
              "x": 60.44,
              "z": -47.509,
              "levelIndex": 0
            },
            {
              "x": 63.386,
              "z": -47.536,
              "levelIndex": 0
            },
            {
              "x": 63.388,
              "z": -45.151,
              "levelIndex": 0
            }
          ]
        ],
        "layerType": "polygon",
        "mapped": true
      },
      {
        "id": "9f4fec45-5420-4b57-b79d-7af998e96ece",
        "name": "Laser Cutter / Engraver  LU Barn (Makerspace) Maker Room (1/F Zone A)",
        "levelIndex": 0,
        "coordinates": [
          [
            {
              "x": 111.832,
              "z": -56.924,
              "levelIndex": 0
            },
            {
              "x": 111.833,
              "z": -55.884,
              "levelIndex": 0
            },
            {
              "x": 112.621,
              "z": -55.876,
              "levelIndex": 0
            },
            {
              "x": 112.655,
              "z": -54.053,
              "levelIndex": 0
            },
            {
              "x": 108.701,
              "z": -54.055,
              "levelIndex": 0
            },
            {
              "x": 108.695,
              "z": -57.208,
              "levelIndex": 0
            },
            {
              "x": 109.242,
              "z": -57.264,
              "levelIndex": 0
            },
            {
              "x": 109.307,
              "z": -56.912,
              "levelIndex": 0
            }
          ]
        ],
        "layerType": "polygon",
        "mapped": true
      },
      {
        "id": "21ed8b4d-c15b-4837-ad1a-eab600069ca4",
        "name": "SEN Equipment  Service Counter (1/F Zone B)",
        "levelIndex": 0,
        "coordinates": [
          [
            {
              "x": 84.719,
              "z": -37.503,
              "levelIndex": 0
            },
            {
              "x": 83.983,
              "z": -37.46,
              "levelIndex": 0
            },
            {
              "x": 84.009,
              "z": -40.922,
              "levelIndex": 0
            },
            {
              "x": 84.784,
              "z": -40.905,
              "levelIndex": 0
            }
          ]
        ],
        "layerType": "polygon",
        "mapped": true
      },
      {
        "id": "d2f5a585-036b-4087-8915-3aedaedc608f",
        "name": "Book Sterilizer (1/ F Zone B)",
        "levelIndex": 0,
        "coordinates": [
          [
            {
              "x": 79.761,
              "z": -46.464,
              "levelIndex": 0
            },
            {
              "x": 79.777,
              "z": -45.384,
              "levelIndex": 0
            },
            {
              "x": 78.686,
              "z": -45.356,
              "levelIndex": 0
            },
            {
              "x": 78.678,
              "z": -46.458,
              "levelIndex": 0
            }
          ]
        ],
        "layerType": "polygon",
        "mapped": true
      },
      {
        "id": "88f10fd7-5ee4-4c49-8ef6-60398b71c53c",
        "name": "Self-Checkout Machine (1/F Zone A & Zone B)",
        "levelIndex": 0,
        "coordinates": [
          [
            {
              "x": 79.71,
              "z": -45.259,
              "levelIndex": 0
            },
            {
              "x": 79.678,
              "z": -44.075,
              "levelIndex": 0
            },
            {
              "x": 78.663,
              "z": -44.066,
              "levelIndex": 0
            },
            {
              "x": 78.668,
              "z": -45.262,
              "levelIndex": 0
            }
          ]
        ],
        "layerType": "polygon",
        "mapped": true
      },
      {
        "id": "81b1d768-017c-40c1-b3b5-e02d1fb4ce2a",
        "name": "Self-Pickup Locker (1/F Zone B)",
        "levelIndex": 0,
        "coordinates": [
          [
            {
              "x": 62.875,
              "z": -45.054,
              "levelIndex": 0
            },
            {
              "x": 62.842,
              "z": -44.483,
              "levelIndex": 0
            },
            {
              "x": 60.5,
              "z": -44.477,
              "levelIndex": 0
            },
            {
              "x": 60.501,
              "z": -45.04,
              "levelIndex": 0
            },
            {
              "x": 62.786,
              "z": -45.039,
              "levelIndex": 0
            }
          ]
        ],
        "layerType": "polygon",
        "mapped": true
      }
    ]
  },
      ];

      const color_dict = {
        occupied: "#ff3f34",
        countdown: "#ff3f34",
        vacant: "#3aa655",
        free: "#3aa655",
        unoccupied: "#3aa655",
        passive_occupied: "#ffbf00",
        away: "#ffbf00",
        demo: "#E566FF",
        unavailable: "#768590",
      };

async function refreshFacilityData() {
  console.log('Refreshing facility data...');
  await fetchFacilityData();
  console.log('Facility data refreshed:', facilityAPIData);
}

      // Fetch facility data from API
let facilityAPIData = null;

async function fetchFacilityData() {
  try {
    const response = await fetch('https://facility-search-dot-optimus-lnu.df.r.appspot.com/library_facilities');
    const data = await response.json();
    facilityAPIData = data.library_facilities;
    console.log('Facility data loaded:', facilityAPIData);
  } catch (error) {
    console.error('Failed to fetch facility data:', error);
    facilityAPIData = [];
  }
}

// Function to find facility info by name
function findFacilityInfo(facilityName) {
  if (!facilityAPIData) return null;
  
  // Search through all levels
  for (const firstLevel of facilityAPIData) {
    if (firstLevel.name === facilityName) {
      return {
        description: firstLevel.description,
        image: firstLevel.image,
        name: firstLevel.name
      };
    }
    
    for (const secondLevel of firstLevel.second_levels || []) {
      if (secondLevel.name === facilityName) {
        return {
          description: secondLevel.description,
          image: secondLevel.image,
          name: secondLevel.name
        };
      }
      
      for (const thirdLevel of secondLevel.third_levels || []) {
        if (thirdLevel.name === facilityName) {
          return {
            description: thirdLevel.description,
            image: thirdLevel.image,
            name: thirdLevel.name
          };
        }
      }
    }
  }
  return null;
}

// Generic facility handler
function handleGenericFacility(facilityAsset, facilityName) {
  let facilityInfo = findFacilityInfo(facilityName);
  
  // If facility not found, try refreshing data first
  if (!facilityInfo) {
    console.log('Facility not found, refreshing data...');
    refreshFacilityData().then(() => {
      facilityInfo = findFacilityInfo(facilityName);
      updateFacilityDisplay(facilityAsset, facilityName, facilityInfo);
    });
    return;
  }
  
  updateFacilityDisplay(facilityAsset, facilityName, facilityInfo);
}

// Extract display logic
function updateFacilityDisplay(facilityAsset, facilityName, facilityInfo) {
  const room = {
    id: facilityAsset.id,
    name: facilityAsset.name,
    levelIndex: facilityAsset.levelIndex,
    coordinates: facilityAsset.coordinates,
    layerType: facilityAsset.layerType,
    mapped: facilityAsset.mapped,
    height: getFacilityHeight(facilityName),
    color: "#E566FF",
    available: "Available",
    description: facilityInfo?.description || "Available for use"
  };
  
  rooms.push(room);
  
  setTimeout(() => {
    if (spc && spc.space) {
      spc.updateMapForFacility();
    }
  }, 2000);
  
  setTimeout(() => {
    if (spc && spc.space) {
      spc.setCameraForFacility && spc.setCameraForFacility(facilityName);
    }
  }, 3000);
  
  setTimeout(() => showGenericTooltip(facilityName), 2500);
}

// Handle special facilities not in facilities_list
function handleSpecialFacility(facility) {
  if (facility === "Study Rooms") {
    rooms.push({
      id: "2c742e1d-1ab7-4600-8376-76626e90c084",
      name: "Individual Study Room 1",
      levelIndex: 0,
      coordinates: [
        [
          { x: 117.426, z: -56.963, levelIndex: 0 },
          { x: 119.377, z: -56.963, levelIndex: 0 },
          { x: 119.377, z: -54.059, levelIndex: 0 },
          { x: 117.426, z: -54.059, levelIndex: 0 },
          { x: 117.426, z: -56.963, levelIndex: 0 }
        ]
      ],
      layerType: "polygon",
      mapped: true
    });
  }
  // Add other special cases here if needed
}

// Get appropriate height for different facility types
function getFacilityHeight(facilityName) {
  const heightMap = {
    "Lift": 2.4,
    "Service Counter": 0.3,
    "Drinking Water": 0.3,
    "SEN Equipment": 0.1,
    "Self-Pickup Locker": 1.3,
    "Laser Cutter": 1.4,
    "Books DS777-HJ (1/F Zone C)": 3.0
  };
  
  for (const [key, height] of Object.entries(heightMap)) {
    if (facilityName.includes(key)) return height;
  }
  return 2.4; // default height
}

// Generic tooltip function using API data
function showGenericTooltip(facilityName) {
  const tooltipDiv = document.getElementById("custom-tooltip");
  const contentDiv = document.getElementById("tooltip-content");
  
  if (tooltipDiv && contentDiv) {
    const facilityInfo = findFacilityInfo(facilityName);
    
    const description = facilityInfo?.description || "Library facility available for use";
    const imageUrl = facilityInfo?.image || "https://images.unsplash.com/photo-1481627834876-b7833e8f5570?w=300&h=200&fit=crop";
    
    const content = `
      <div style="padding: 0; margin: 0; line-height: 1.2;">
        <div style="font-weight: bold; margin-bottom: 8px; font-size: 16px; color: #000;">${facilityName}</div>
        <div style="margin-bottom: 8px; font-size: 14px;">${description}</div>
        <img src="${imageUrl}" 
             style="width: 120px; height: 80px; border-radius: 4px; display: block; object-fit: cover;" 
             onerror="this.src='https://images.unsplash.com/photo-1481627834876-b7833e8f5570?w=300&h=200&fit=crop'" />
      </div>
    `;
    
    contentDiv.innerHTML = content;
    tooltipDiv.style.display = "block";
  }
}

      // smplrspace-script.js
      class Space {
        constructor(
          spaceId,
          clientToken,
          desks,
          rooms,
          sensors,
          Notaccessible,
          toiletAreas
        ) {
          this.spaceId = spaceId;
          this.clientToken = clientToken;
          this.space = null;
          this.rooms = rooms;
          this.desks = desks;
          this.sensors = sensors;
          this.Notaccessible = Notaccessible;
          this.toiletAreas = toiletAreas;
        }

        initSpace(smplr) {
          this.space = new smplr.Space({
            spaceId: this.spaceId,
            clientToken: this.clientToken,
            containerId: "smplrspace-container",
          });
          this.space.startViewer({
            preview: false,
            allowModeChange: true,
            disableCameraRotation: true,
            loadingMessage: "Loading...",
            cameraPlacement: {
              alpha: 1.5737549088615568,
              beta: 0.7099240223592374,
              radius: 185.49815361318093,
              target: { x: 70.43070629934955, y: 1, z: -48.22815466523894 },
            },
            onReady: () => this.fetchAll(),
            onError: (error) => console.error("Could not start viewer", error),
          });
        }

        updateDataLayers() {
          // remove previous layers if any
          this.space.removeDataLayer("rooms");
          this.space.removeDataLayer("desks");
          this.space.removeDataLayer("Notaccessible");

          const isRoomsEmpty = !this.rooms || this.rooms.length === 0;
          const isDesksEmpty = !this.desks || this.desks.length === 0;
          const isNotaccessibleEmpty =
            !this.Notaccessible || this.Notaccessible.length === 0;
          const isToiletAreasEmpty =
            !this.toiletAreas || this.toiletAreas.length === 0;

          if (!isRoomsEmpty) {
            // add new layers
            this.space.addDataLayer({
              id: "rooms",
              type: "polygon",
              data: this.rooms,

              color: (d) => d.color,
              alpha: 2.2,
              height: 2.4,
            });
          }

          if (!isDesksEmpty) {
            this.space.addDataLayer({
              id: "desks",
              type: "furniture",
              data: this.desks,
              color: (d) => d.color,
            });
          }

          if (!isNotaccessibleEmpty) {
            this.space.addDataLayer({
              id: "Notaccessible",
              type: "polygon",
              data: this.Notaccessible,
              color: (d) => d.color,
              alpha: 2.6,
              height: (d) => d.height,
            });
          }
          // Add click handlers for custom tooltip
          this.space.on("click", (event) => {
            if (event.data) {
              const tooltipDiv = document.getElementById("custom-tooltip");
              const contentDiv = document.getElementById("tooltip-content");

              if (event.data.name && tooltipDiv && contentDiv) {
                // Create custom tooltip content
                let content = `
        <div style="padding: 0; margin: 0; line-height: 1.2;">
          <div style="font-weight: bold; margin-bottom: 8px; font-size: 14px;">${
            event.data.name
          }</div>
          <div style="margin-bottom: 8px; font-size: 12px;">Status: ${
            event.data.available || "Unknown"
          }</div>
          <img src="https://www.wn-int.com/storage/resized/1052/1200x/%E9%A6%99%E6%B8%AF%E5%B6%BA%E5%8D%97%E5%A4%A7%E5%AD%B8%E5%9C%96%E6%9B%B8%E9%A4%A87.jpeg" 
               style="width: 80px; height: auto; border-radius: 4px; display: block;" />
        </div>
      `;

                contentDiv.innerHTML = content;
                tooltipDiv.style.display = "block";
              }
            }
          });
        }
        updateMapForFacility() {
          this.updateDataLayers();
        }


        fetchAll() {
          this.fetchData();
        }

        fetchData() {
          fetch(API_ENDPOINT)
            .then((res) => res.json())
            .then((data) => {
              let occupancy = {};
              for (let i = 0; i < data.length; i++) {
                let value = data[i];
                let loc = value.area;
                let timestamp = value.timestamp;
                let available = value.occupancy;

                let color = color_dict.hasOwnProperty(available)
                  ? color_dict[available]
                  : "#ffa500";

                if (!occupancy.hasOwnProperty(loc)) {
                  occupancy[loc] = {
                    timestamp: timestamp,
                    available: available,
                    occupancy: value.occupancy,
                    color: color,
                  };
                } else if (occupancy[loc].timestamp < timestamp) {
                  occupancy[loc] = {
                    timestamp: timestamp,
                    available: available,
                    occupancy: value.occupancy,
                    color: color,
                  };
                }
              }

              for (let key in occupancy) {
                if (
                  occupancy.hasOwnProperty(key) &&
                  desk_filter.hasOwnProperty(key)
                ) {
                  const jsonKey = desk_filter[key];
                  const _index = desk_index[jsonKey];

                  this.desks[_index]["available"] = occupancy[key]["available"];
                  this.desks[_index]["color"] = occupancy[key]["color"];
                } else if (
                  occupancy.hasOwnProperty(key) &&
                  room_filter.hasOwnProperty(key)
                ) {
                  const jsonKey = room_filter[key];
                  const _index = room_index[jsonKey];

                  if (this.rooms && this.rooms[_index]) {
                    this.rooms[_index]["available"] =
                      occupancy[key]["available"];
                    this.rooms[_index]["numberOfPeople"] =
                      occupancy[key]["numberOfPeople"];
                    this.rooms[_index]["color"] = occupancy[key]["color"];
                  }
                } else if (
                  occupancy.hasOwnProperty(key) &&
                  color_overlay_filter.hasOwnProperty(key)
                ) {
                  const jsonKey = color_overlay_filter[key];
                  const _index = color_overlay_index[jsonKey];

                  if (this.Notaccessible && this.Notaccessible[_index]) {
                    this.Notaccessible[_index]["available"] =
                      occupancy[key]["available"];
                    this.Notaccessible[_index]["color"] =
                      occupancy[key]["color"];
                  }
                }
              }
              this.updateDataLayers();
            });
        }
      }

      const customHeightIds = [
        "031bae15-7140-44c3-b06a-eb777de0ee23",
        "5a9bbacf-986a-4ec8-ba38-837e646edba8",
      ];

      const Notaccessible = dict[1]["assets"].map((area) => {
        return {
          ...area,
          available: "Not Accessible",
          color: color_dict["unavailable"],
          height: customHeightIds.includes(area.id) ? 3.0 : 1.0,
        };
      });

      // Get the current URL
      const currentUrl = window.location.href;

      // Create a URL object
      const url = new URL(currentUrl);

      // Use URLSearchParams to get query parameters
      const params = new URLSearchParams(url.search);

      const facility = params.get("facility");

      if (!!facility) {
  // Check both facilities_list (dict[3]) and facilities_demo (dict[4])
  let facilityAsset = dict[3].assets.find(asset => asset.name === facility);
  if (!facilityAsset) {
    facilityAsset = dict[4].assets.find(asset => asset.name === facility);
  }
  
  if (facilityAsset) {
    handleGenericFacility(facilityAsset, facility);
  } else {
    // For API-only facilities, just show tooltip without adding to map
    console.log('Facility coordinates not found, will show tooltip only');
    setTimeout(() => showGenericTooltip(facility), 2500);
  }
}

      // Function to show tooltip for selected facility when loaded via URL
      if (!!facility) {
        function showFacilityTooltip() {
          const tooltipDiv = document.getElementById("custom-tooltip");
          const contentDiv = document.getElementById("tooltip-content");

          if (tooltipDiv && contentDiv) {
            let content = `
        <div style="padding: 0; margin: 0; line-height: 1.2;">
          <div style="font-weight: bold; margin-bottom: 8px; font-size: 16px;">${facility}</div>
          <div style="margin-bottom: 8px; font-size: 14px;">Selected from menu</div>
          <img src="https://www.wn-int.com/storage/resized/1052/1200x/%E9%A6%99%E6%B8%AF%E5%B6%BA%E5%8D%97%E5%A4%A7%E5%AD%B8%E5%9C%96%E6%9B%B8%E9%A4%A87.jpeg" 
               style="width: 100px; height: auto; border-radius: 4px; display: block;" />
        </div>
      `;

            contentDiv.innerHTML = content;
            tooltipDiv.style.display = "block";
          }
        }

        // Show tooltip after map loads
        setTimeout(showFacilityTooltip, 1500);
      }

      // Create the Space instance with the updated parameters
      spc = new Space(
  SPACE_ID,
  CLIENT_ID,
  [...dict[0]["assets"], ...dict[2]["assets"]],
  rooms,
  [],
  Notaccessible
);

     // delete dict;

      async function wait() {
        return new Promise((resolve) => {
          setTimeout(() => {
            resolve();
          }, 500);
        });
      }

      async function start() {
  while (typeof smplr === "undefined") {
    await wait();
  }
  
  // Fetch facility data first
  await fetchFacilityData();
  
  spc.initSpace(smplr);
  setInterval(() => {
    spc.fetchAll();
  }, UPDATE_FREQUENCY * 1000);
}

      start();
    </script>
  </body>
</html>
