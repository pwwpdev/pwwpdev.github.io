<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Smplrspace Viewer</title>
    <!-- Load smplr.js and its styles -->
  </head>
  <style>
    body,
    html {
      height: 100vh !important;
      overflow: hidden;
    }
    #wrapper,
    #smplrspace-container {
      height: 100vh !important;
    }
  </style>
  <body>
    <script src="https://app.smplrspace.com/lib/smplr.js"></script>
    <link href="https://app.smplrspace.com/lib/smplr.css" rel="stylesheet" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />

    <div id="wrapper">
      <div id="smplrspace-container"></div>
    </div>

    <script>
      const API_ENDPOINT =
        "https://optimusc.flowfuse.cloud/lingnan-library-dos";

      const CLIENT_ID = "pub_45cf413215bd43f79621e0b28f8a815b";
      const SPACE_ID = "73242c82-a0e9-4c96-8d28-089829ecf3d0";

      const UPDATE_FREQUENCY = 60;

      const desk_index = {
        "LRT01-S01": 0,
        "LRT01-S02": 1,
        "LRT01-S03": 2,
        "LRT01-S04": 3,
        "LRT01-S05": 4,
        "LRT01-S06": 5,
        "LRT01-S07": 6,
        "LRT01-S08": 7,
        "LRT01-S09": 8,
        "LRT01-S10": 9,
        "LRT02-S01": 10,
        "LRT02-S02": 11,
        "LRT02-S03": 12,
        "LRT02-S04": 13,
        "LRT02-S05": 14,
        "LRT02-S06": 15,
        "LRT02-S07": 16,
        "LRT02-S08": 17,
        "LRT02-S09": 18,
        "LRT02-S10": 19,
        "LRT03-S01": 20,
        "LRT03-S02": 21,
        "LRT03-S03": 22,
        "LRT03-S04": 23,
        "LRT03-S05": 24,
        "LRT03-S06": 25,
        "LRT03-S07": 26,
        "LRT03-S08": 27,
        "LRT03-S09": 28,
        "LRT03-S10": 29,
        "LRT04-S01": 30,
        "LRT04-S02": 31,
        "LRT04-S03": 32,
        "LRT04-S04": 33,
        "LRT04-S05": 34,
        "LRT04-S06": 35,
        "LRT04-S07": 36,
        "LRT04-S08": 37,
        "LRT04-S09": 38,
        "LRT04-S10": 39,
        "LRT05-S01": 40,
        "LRT05-S02": 41,
        "LRT05-S03": 42,
        "LRT05-S04": 43,
        "LRT05-S05": 44,
        "LRT05-S06": 45,
        "LRT05-S07": 46,
        "LRT05-S08": 47,
        "LRT05-S09": 48,
        "LRT05-S10": 49,
        "LRT06-S01": 50,
        "LRT06-S02": 51,
        "LRT06-S03": 52,
        "LRT06-S04": 53,
        "LRT06-S05": 54,
        "LRT06-S06": 55,
        "LRT06-S07": 56,
        "LRT06-S08": 57,
        "LRT06-S09": 58,
        "LRT06-S10": 59,
        "1FN-S01": 60,
        "1FN-S02": 61,
        "1FN-S03": 62,
        "1FN-S04": 63,
        "1FN-S05": 64,
        "1FS-S01": 65,
        "1FS-S02": 66,
        "1FS-S03": 67,
        "1FS-S04": 68,
        "1FS-S05": 69,
        "CPR2-S01": 70,
        "CPR2-S02": 71,
        "CPR2-S03": 72,
        "CPR2-S04": 73,
        "CPR2-S05": 74,
        "CPR2-S06": 75,
        "CPR2-S07": 76,
        "CPR2-S08": 77,
        "CPR2-S09": 78,
        "CPR2-S10": 79,
        "CPR2-S11": 80,
        "CPR2-S12": 81,
        "CPR2-S13": 82,
        "CPR2-S14": 83,
        "CPR2-S15": 84,
        "CPR2-S16": 85,
        "CPR2-S17": 86,
        "CPR2-S18": 87,
        "CPR2-S19": 88,
        "CPR2-S20": 89,
        "CPR2-S21": 90,
        "CPR2-S22": 91,
        "CPR2-S23": 92,
        "CPR2-S24": 93,
        "CPR2-S25": 94,
        "CPR2-S26": 95,
      };

      const desk_filter = {
        "LRT01-S01": "LRT01-S01",
        "LRT01-S02": "LRT01-S02",
        "LRT01-S03": "LRT01-S03",
        "LRT01-S04": "LRT01-S04",
        "LRT01-S05": "LRT01-S05",
        "LRT01-S06": "LRT01-S06",
        "LRT01-S07": "LRT01-S07",
        "LRT01-S08": "LRT01-S08",
        "LRT01-S09": "LRT01-S09",
        "LRT01-S10": "LRT01-S10",
        "LRT02-S01": "LRT02-S01",
        "LRT02-S02": "LRT02-S02",
        "LRT02-S03": "LRT02-S03",
        "LRT02-S04": "LRT02-S04",
        "LRT02-S05": "LRT02-S05",
        "LRT02-S06": "LRT02-S06",
        "LRT02-S07": "LRT02-S07",
        "LRT02-S08": "LRT02-S08",
        "LRT02-S09": "LRT02-S09",
        "LRT02-S10": "LRT02-S10",
        "LRT03-S01": "LRT03-S01",
        "LRT03-S02": "LRT03-S02",
        "LRT03-S03": "LRT03-S03",
        "LRT03-S04": "LRT03-S04",
        "LRT03-S05": "LRT03-S05",
        "LRT03-S06": "LRT03-S06",
        "LRT03-S07": "LRT03-S07",
        "LRT03-S08": "LRT03-S08",
        "LRT03-S09": "LRT03-S09",
        "LRT03-S10": "LRT03-S10",
        "LRT04-S01": "LRT04-S01",
        "LRT04-S02": "LRT04-S02",
        "LRT04-S03": "LRT04-S03",
        "LRT04-S04": "LRT04-S04",
        "LRT04-S05": "LRT04-S05",
        "LRT04-S06": "LRT04-S06",
        "LRT04-S07": "LRT04-S07",
        "LRT04-S08": "LRT04-S08",
        "LRT04-S09": "LRT04-S09",
        "LRT04-S10": "LRT04-S10",
        "LRT05-S01": "LRT05-S01",
        "LRT05-S02": "LRT05-S02",
        "LRT05-S03": "LRT05-S03",
        "LRT05-S04": "LRT05-S04",
        "LRT05-S05": "LRT05-S05",
        "LRT05-S06": "LRT05-S06",
        "LRT05-S07": "LRT05-S07",
        "LRT05-S08": "LRT05-S08",
        "LRT05-S09": "LRT05-S09",
        "LRT05-S10": "LRT05-S10",
        "LRT06-S01": "LRT06-S01",
        "LRT06-S02": "LRT06-S02",
        "LRT06-S03": "LRT06-S03",
        "LRT06-S04": "LRT06-S04",
        "LRT06-S05": "LRT06-S05",
        "LRT06-S06": "LRT06-S06",
        "LRT06-S07": "LRT06-S07",
        "LRT06-S08": "LRT06-S08",
        "LRT06-S09": "LRT06-S09",
        "LRT06-S10": "LRT06-S10",
        "1FN-S01": "1FN-S01",
        "1FN-S02": "1FN-S02",
        "1FN-S03": "1FN-S03",
        "1FN-S04": "1FN-S04",
        "1FN-S05": "1FN-S05",
        "1FS-S01": "1FS-S01",
        "1FS-S02": "1FS-S02",
        "1FS-S03": "1FS-S03",
        "1FS-S04": "1FS-S04",
        "1FS-S05": "1FS-S05",
        "CPR2-S01": "CPR2-S01",
        "CPR2-S02": "CPR2-S02",
        "CPR2-S03": "CPR2-S03",
        "CPR2-S04": "CPR2-S04",
        "CPR2-S05": "CPR2-S05",
        "CPR2-S06": "CPR2-S06",
        "CPR2-S07": "CPR2-S07",
        "CPR2-S08": "CPR2-S08",
        "CPR2-S09": "CPR2-S09",
        "CPR2-S10": "CPR2-S10",
        "CPR2-S11": "CPR2-S11",
        "CPR2-S12": "CPR2-S12",
        "CPR2-S13": "CPR2-S13",
        "CPR2-S14": "CPR2-S14",
        "CPR2-S15": "CPR2-S15",
        "CPR2-S16": "CPR2-S16",
        "CPR2-S17": "CPR2-S17",
        "CPR2-S18": "CPR2-S18",
        "CPR2-S19": "CPR2-S19",
        "CPR2-S20": "CPR2-S20",
        "CPR2-S21": "CPR2-S21",
        "CPR2-S22": "CPR2-S22",
        "CPR2-S23": "CPR2-S23",
        "CPR2-S24": "CPR2-S24",
        "CPR2-S25": "CPR2-S25",
        "CPR2-S26": "CPR2-S26",
      };

      const room_index = {
        "Group Study Room 9": 0,
        "Individual Study Room 1": 1,
        "Individual Study Room 2": 2,
        "Individual Study Room 3": 3,
        "Group Study Room 8": 4,
      };

      const room_filter = {
        "1FC-GS9": "Group Study Room 9",
        "1FC-IS1": "Individual Study Room 1",
        "1FC-IS2": "Individual Study Room 2",
        "1FC-IS3": "Individual Study Room 3",
        "1FC-GS8": "Group Study Room 8",
      };

      // Updated for new color overlays
      const color_overlay_index = {
        1: 0,
        2: 1,
        3: 2,
        Study1: 3,
        Study2: 4,
        Study3: 5,
      };

      const color_overlay_filter = {
        "1FC-UA1": "1",
        "1FC-UA2": "2",
        "1FC-UA3": "3",
        "1FC-IS1": "Study1",
        "1FC-IS2": "Study2",
        "1FC-IS3": "Study3",
      };

       const dict = [
        {
          id: "97bb9348-8841-42ea-91f2-f0589f05473c",
          name: "LRR Desk",
          type: "furniture",
          assets: [
            {
              id: "2a4af663-0eee-42b1-a569-5ac13b4daae3",
              name: "LRT01-S01",
              furnitureId: "51d6eb0c-930c-4feb-8c8f-e39b2db2ffee",
              layerType: "furniture",
            },
            {
              id: "c25407a9-69e2-4580-9baa-cd3037801a8d",
              name: "LRT01-S02",
              furnitureId: "507326d2-077a-4135-accb-40eb588c3ef9",
              layerType: "furniture",
            },
            {
              id: "4c59265f-81ba-4256-99b7-1d3e9c91db93",
              name: "LRT01-S03",
              furnitureId: "f526ce1c-570f-43b7-aae5-1207bb1f43ab",
              layerType: "furniture",
            },
            {
              id: "a7051fac-2793-4047-b5ea-dc2335276b14",
              name: "LRT01-S04",
              furnitureId: "7d12c239-b79a-4ff7-bde2-252453c739ae",
              layerType: "furniture",
            },
            {
              id: "e8b5f525-4447-40ba-9e03-f0513b96ed89",
              name: "LRT01-S05",
              furnitureId: "6920090d-50cc-4f2c-bcf7-416c1db91fce",
              layerType: "furniture",
            },
            {
              id: "5613a796-9986-4075-bfae-770e70736b80",
              name: "LRT01-S06",
              furnitureId: "f686ca38-d98b-4f06-b570-9ea4552bce68",
              layerType: "furniture",
            },
            {
              id: "34ca1218-0977-462a-9365-5bb409b63185",
              name: "LRT01-S07",
              furnitureId: "d3e1902e-ae77-41cf-9663-7a101f3e6399",
              layerType: "furniture",
            },
            {
              id: "0994c26f-6749-4909-896d-17bf227fca25",
              name: "LRT01-S08",
              furnitureId: "6178b0d1-99c4-4652-990e-12f8bac8658f",
              layerType: "furniture",
            },
            {
              id: "61855b20-8359-486a-ab92-e51e2347e645",
              name: "LRT01-S09",
              furnitureId: "dc50398d-a6f8-4c43-8ca9-badb08cd1603",
              layerType: "furniture",
            },
            {
              id: "4e4f525c-8540-45d1-a3ee-1f646353ffd3",
              name: "LRT01-S10",
              furnitureId: "a9962b6b-26ce-436a-9af5-0f73b1f88d98",
              layerType: "furniture",
            },
            {
              id: "ca314bfd-6190-4f03-8d58-e1ef1007ade6",
              name: "LRT02-S01",
              furnitureId: "e7860d0a-4d66-4f4d-9c6b-7d30ac8de382",
              layerType: "furniture",
            },
            {
              id: "a6e8f32c-ca3e-43fb-a937-60a84bf400ca",
              name: "LRT02-S02",
              furnitureId: "7909d6d8-221c-476f-921d-e910d8c1264b",
              layerType: "furniture",
            },
            {
              id: "7dbffb04-1264-405a-b61a-26ad9deff4b2",
              name: "LRT02-S03",
              furnitureId: "7c97bb4b-b99f-4d23-a796-f5f9eb84620b",
              layerType: "furniture",
            },
            {
              id: "4cef2109-693d-4ac8-b6de-108dcee4af37",
              name: "LRT02-S04",
              furnitureId: "aabc277b-7a91-4057-ae5f-013e6179974a",
              layerType: "furniture",
            },
            {
              id: "67325ee2-a533-443f-a23e-721ee071de50",
              name: "LRT02-S05",
              furnitureId: "79b7e004-9575-43a1-8abf-2e99d6be655c",
              layerType: "furniture",
            },
            {
              id: "c5f8d077-e848-4cdf-a4d3-0c9d0f2a3bc4",
              name: "LRT02-S06",
              furnitureId: "fb7e3f21-4141-4fba-bdb5-77ea9effe175",
              layerType: "furniture",
            },
            {
              id: "d41dc8c6-a716-479d-bd29-5b3602794750",
              name: "LRT02-S07",
              furnitureId: "3c568152-7874-4439-9213-cbcb48aca31f",
              layerType: "furniture",
            },
            {
              id: "3ae03ab5-5179-41c2-9060-9c05ef6ba3ff",
              name: "LRT02-S08",
              furnitureId: "7e71c43c-3674-45c5-9367-3d92b8ca90fb",
              layerType: "furniture",
            },
            {
              id: "cf2cc9a6-2f63-41d4-9f91-449455cf1f2b",
              name: "LRT02-S09",
              furnitureId: "8e6aeec2-19f4-4f98-bb4e-4d12bb2c79dd",
              layerType: "furniture",
            },
            {
              id: "a0b88db3-cf40-4390-8e21-4362a0070a56",
              name: "LRT02-S10",
              furnitureId: "ab10d1ff-210d-4318-934e-c7c42fbabad4",
              layerType: "furniture",
            },
            {
              id: "1fff8614-28d8-471b-804d-7c729a87b79c",
              name: "LRT03-S01",
              furnitureId: "73e36729-5c27-4c04-aebf-a42d613d87fd",
              layerType: "furniture",
            },
            {
              id: "dcd0d6e6-9376-4a2c-a8b0-ced2238fd870",
              name: "LRT03-S02",
              furnitureId: "43a6e8b2-9ba3-474e-aff2-7549605c9b6a",
              layerType: "furniture",
            },
            {
              id: "e1b9ce38-d03e-41eb-80c6-ea3e808627e2",
              name: "LRT03-S03",
              furnitureId: "c6846a03-b76f-4387-ac11-ec8c06c90fcf",
              layerType: "furniture",
            },
            {
              id: "69b1a8e5-cdb7-49e4-810e-dfb1e438c90e",
              name: "LRT03-S04",
              furnitureId: "b5621b3c-8efc-4455-ac19-e003a0ae1cee",
              layerType: "furniture",
            },
            {
              id: "40f35036-373f-4640-84a1-cebab2788bb2",
              name: "LRT03-S05",
              furnitureId: "6cff29c6-ec8f-4be0-811a-057de9dbc74a",
              layerType: "furniture",
            },
            {
              id: "95c7395a-1742-4153-9e77-db2b365bbfdc",
              name: "LRT03-S06",
              furnitureId: "191ee9ff-678c-4ba1-a39b-31bca6d5c36d",
              layerType: "furniture",
            },
            {
              id: "0455a87f-e3bc-4679-860d-b8fee335af48",
              name: "LRT03-S07",
              furnitureId: "2543a1f7-412c-4ddf-93a5-ed07e5c9d898",
              layerType: "furniture",
            },
            {
              id: "3a4d5d94-5910-457c-b02f-794cfa2f1bf9",
              name: "LRT03-S08",
              furnitureId: "5d3f14e1-2f29-486a-9ece-247787869aa7",
              layerType: "furniture",
            },
            {
              id: "5de0c526-bed0-407a-88e0-d335408284f9",
              name: "LRT03-S09",
              furnitureId: "b4735137-e041-416f-b123-bdc259eaa843",
              layerType: "furniture",
            },
            {
              id: "f419d856-4d56-48ed-a44d-b296017af2cd",
              name: "LRT03-S10",
              furnitureId: "be402c15-4498-47d8-880a-b32e7def61f3",
              layerType: "furniture",
            },
            {
              id: "9ab7041d-f45d-4736-b5ce-e669dfb6313b",
              name: "LRT04-S01",
              furnitureId: "70bd46dc-0e00-4188-a9ba-894c1497bbbe",
              layerType: "furniture",
            },
            {
              id: "c3432109-cf33-4a29-bff7-bbfd9632f148",
              name: "LRT04-S02",
              furnitureId: "d519eaf2-5f9a-4edd-a7fe-d80906efc40a",
              layerType: "furniture",
            },
            {
              id: "e563b7bf-e688-4fe6-aff3-b60b2f98b2f2",
              name: "LRT04-S03",
              furnitureId: "974896da-5a83-40e9-982e-97ef85fe2456",
              layerType: "furniture",
            },
            {
              id: "a95be06c-fd42-46cd-924e-83136442b31b",
              name: "LRT04-S04",
              furnitureId: "08ca4067-6c2c-4c19-b5a1-5fc6b2ee5061",
              layerType: "furniture",
            },
            {
              id: "100af926-5529-46b2-bb15-d94b72c6b4c7",
              name: "LRT04-S05",
              furnitureId: "19093d2c-b06a-41fe-9e2d-ef3e4a7fe43e",
              layerType: "furniture",
            },
            {
              id: "de64f929-9530-49de-a37e-faa676f178dc",
              name: "LRT04-S06",
              furnitureId: "b06add29-dba6-41df-bcb3-e76061162d69",
              layerType: "furniture",
            },
            {
              id: "e14e617f-0a1e-4411-8111-429ad2e8045f",
              name: "LRT04-S07",
              furnitureId: "148a5a19-e567-487a-a25c-9bf512183642",
              layerType: "furniture",
            },
            {
              id: "dd3758d1-c6a8-4489-89fb-2814c784c5d5",
              name: "LRT04-S08",
              furnitureId: "2ddf9be5-8d15-4af6-9229-f5c858e07b69",
              layerType: "furniture",
            },
            {
              id: "5854e452-a9b7-4e36-97b9-a1320734656a",
              name: "LRT04-S09",
              furnitureId: "46c3ded6-53b4-4636-b617-b604b2d10a42",
              layerType: "furniture",
            },
            {
              id: "d1b91ecc-eda2-4674-a263-c3a17dc4de24",
              name: "LRT04-S10",
              furnitureId: "418657a0-1922-476d-bb2c-e8ca14266958",
              layerType: "furniture",
            },
            {
              id: "39964306-eb35-4745-bdd0-3e2eb9603b5a",
              name: "LRT05-S01",
              furnitureId: "6eb1e034-169c-4f8c-952d-9576b92de369",
              layerType: "furniture",
            },
            {
              id: "49be04c0-6eb7-4663-bd86-aa3f882e6c0b",
              name: "LRT05-S02",
              furnitureId: "ec9782fa-db9e-4af0-8fcd-cbd9b29b40bf",
              layerType: "furniture",
            },
            {
              id: "b7771164-3ceb-479b-9659-8a48e0f38586",
              name: "LRT05-S03",
              furnitureId: "a3727d19-f033-49c6-ac5c-3c0c5de31c75",
              layerType: "furniture",
            },
            {
              id: "c6d2d8d2-b760-49d0-bbac-564c2c48ea73",
              name: "LRT05-S04",
              furnitureId: "712ffe41-b9cb-413b-ad43-5398ba17e414",
              layerType: "furniture",
            },
            {
              id: "091a782f-ffda-4649-b609-aadb0b64a5d8",
              name: "LRT05-S05",
              furnitureId: "1948ff48-0752-458d-aea4-7a9453b19a48",
              layerType: "furniture",
            },
            {
              id: "07f7eff6-d6a0-43ad-b128-b619275f87ee",
              name: "LRT05-S06",
              furnitureId: "8a4bc8f3-0b98-4a0f-ac52-f88e4ba57ac8",
              layerType: "furniture",
            },
            {
              id: "a3ba8f96-8467-48d1-8021-763112125673",
              name: "LRT05-S07",
              furnitureId: "83382964-e41a-463f-b0e8-bf572b366a92",
              layerType: "furniture",
            },
            {
              id: "902e54b9-d99f-49b7-85c6-9a4ce0892427",
              name: "LRT05-S08",
              furnitureId: "583159f9-35fa-445f-8160-d8f487ca905f",
              layerType: "furniture",
            },
            {
              id: "ba3725df-9918-480e-bd36-92d73c55030f",
              name: "LRT05-S09",
              furnitureId: "6b90208e-015c-43f8-9681-62a282ae0560",
              layerType: "furniture",
            },
            {
              id: "40dc991a-bf01-411c-866e-ce428dd7fb23",
              name: "LRT05-S10",
              furnitureId: "19da1798-801a-4d1d-a539-d18286d32342",
              layerType: "furniture",
            },
            {
              id: "e07b0433-6dd4-4ee4-890c-f041860b4617",
              name: "LRT06-S01",
              furnitureId: "de5295c8-3708-444b-8146-8c3a2a7aa497",
              layerType: "furniture",
            },
            {
              id: "8de75d56-73e0-41fb-a877-c83055e9793e",
              name: "LRT06-S02",
              furnitureId: "e4863045-0369-4ea7-a569-05e1e9563c2a",
              layerType: "furniture",
            },
            {
              id: "9cd8ed21-5c7c-48e0-a60a-f2d8a9678b6d",
              name: "LRT06-S03",
              furnitureId: "d9a9baa3-8a6f-4ff1-a03d-3806ec50b1e1",
              layerType: "furniture",
            },
            {
              id: "f9247401-2ba2-4896-b31c-8d4e6927125f",
              name: "LRT06-S04",
              furnitureId: "7508be4a-aa73-418b-97ff-01fd2ea97ad6",
              layerType: "furniture",
            },
            {
              id: "9c53d86f-bfaa-4899-b7bd-d4aecff1d1aa",
              name: "LRT06-S05",
              furnitureId: "3b6402eb-7253-4ec7-9590-4c887ece8327",
              layerType: "furniture",
            },
            {
              id: "e1680f72-a5e0-4e37-a0e6-8c851dd5bc1f",
              name: "LRT06-S06",
              furnitureId: "af2a06a5-fe89-4fc2-b10e-bd6201610f11",
              layerType: "furniture",
            },
            {
              id: "05b730dc-30d1-465b-bce3-32aa509f8bc0",
              name: "LRT06-S07",
              furnitureId: "ed3f8463-b1c2-4bfd-a402-d7a2f5da302d",
              layerType: "furniture",
            },
            {
              id: "fd020198-efb6-4599-8186-450bceaf8586",
              name: "LRT06-S08",
              furnitureId: "4414b411-c46d-4591-84de-c6425550e7f6",
              layerType: "furniture",
            },
            {
              id: "eb0ca871-ad7c-4ca4-ae98-bd4deef602ab",
              name: "LRT06-S09",
              furnitureId: "cdcb4775-b712-4a16-a963-d1eccd922422",
              layerType: "furniture",
            },
            {
              id: "02e16118-e7f0-4b62-bbec-3fef12a66f4b",
              name: "LRT06-S10",
              furnitureId: "42cdb803-a7eb-4c08-8788-868b386b8fca",
              layerType: "furniture",
            },
          ],
        },
        {
          id: "161eabd8-3a08-4b1a-b297-2829cf8b31ea",
          name: "NonAccessibleArea",
          type: "polygon",
          assets: [
            {
              id: "031bae15-7140-44c3-b06a-eb777de0ee23",
              name: "1",
              levelIndex: 0,
              coordinates: [
                [
                  {
                    x: 126.477,
                    z: -57.205,
                    levelIndex: 0,
                  },
                  {
                    x: 129.655,
                    z: -57.233,
                    levelIndex: 0,
                  },
                  {
                    x: 129.603,
                    z: -29.791,
                    levelIndex: 0,
                  },
                  {
                    x: 126.771,
                    z: -29.849,
                    levelIndex: 0,
                  },
                  {
                    x: 126.741,
                    z: -48.307,
                    levelIndex: 0,
                  },
                  {
                    x: 126.533,
                    z: -48.392,
                    levelIndex: 0,
                  },
                  {
                    x: 126.449,
                    z: -56.376,
                    levelIndex: 0,
                  },
                ],
              ],
              layerType: "polygon",
              mapped: true,
            },
            {
              id: "b8da8833-ac95-423a-a02b-04aa399172b0",
              name: "2",
              levelIndex: 0,
              coordinates: [
                [
                  {
                    x: 98.375,
                    z: -52.608,
                    levelIndex: 0,
                  },
                  {
                    x: 98.389,
                    z: -56.918,
                    levelIndex: 0,
                  },
                  {
                    x: 99.036,
                    z: -57.007,
                    levelIndex: 0,
                  },
                  {
                    x: 99.113,
                    z: -57.253,
                    levelIndex: 0,
                  },
                  {
                    x: 108.742,
                    z: -57.208,
                    levelIndex: 0,
                  },
                  {
                    x: 108.448,
                    z: -56.509,
                    levelIndex: 0,
                  },
                  {
                    x: 108.664,
                    z: -56.579,
                    levelIndex: 0,
                  },
                  {
                    x: 108.708,
                    z: -54.039,
                    levelIndex: 0,
                  },
                  {
                    x: 103.068,
                    z: -54.118,
                    levelIndex: 0,
                  },
                  {
                    x: 102.926,
                    z: -52.613,
                    levelIndex: 0,
                  },
                ],
              ],
              layerType: "polygon",
              mapped: true,
            },
            {
              id: "064c5862-54b8-4c31-bb23-13e50b27b5e4",
              name: "4",
              levelIndex: 0,
              coordinates: [
                [
                  {
                    x: 54.05,
                    z: -34.736,
                    levelIndex: 0,
                  },
                  {
                    x: 51.705,
                    z: -33.127,
                    levelIndex: 0,
                  },
                  {
                    x: 39.737,
                    z: -33.203,
                    levelIndex: 0,
                  },
                  {
                    x: 39.689,
                    z: -34.756,
                    levelIndex: 0,
                  },
                ],
              ],
              layerType: "polygon",
              mapped: true,
            },
            {
              id: "4e7221ef-19ee-44e6-84ea-8a8ad43bfd4f",
              name: "5",
              levelIndex: 0,
              coordinates: [
                [
                  {
                    x: 30.966,
                    z: -57.213,
                    levelIndex: 0,
                  },
                  {
                    x: 30.961,
                    z: -56.465,
                    levelIndex: 0,
                  },
                  {
                    x: 30.76,
                    z: -56.425,
                    levelIndex: 0,
                  },
                  {
                    x: 30.709,
                    z: -54.063,
                    levelIndex: 0,
                  },
                  {
                    x: 38.26,
                    z: -54.039,
                    levelIndex: 0,
                  },
                  {
                    x: 38.228,
                    z: -52.627,
                    levelIndex: 0,
                  },
                  {
                    x: 43.798,
                    z: -52.584,
                    levelIndex: 0,
                  },
                  {
                    x: 43.799,
                    z: -54.003,
                    levelIndex: 0,
                  },
                  {
                    x: 43.045,
                    z: -54.107,
                    levelIndex: 0,
                  },
                  {
                    x: 43.036,
                    z: -56.912,
                    levelIndex: 0,
                  },
                  {
                    x: 40.013,
                    z: -56.935,
                    levelIndex: 0,
                  },
                  {
                    x: 39.987,
                    z: -57.271,
                    levelIndex: 0,
                  },
                ],
              ],
              layerType: "polygon",
              mapped: true,
            },
            {
              id: "2e5718f5-8b5e-4337-ba4f-c8aa3470488a",
              name: "6",
              levelIndex: 0,
              coordinates: [
                [
                  {
                    x: 90.582,
                    z: -61.883,
                    levelIndex: 0,
                  },
                  {
                    x: 90.582,
                    z: -58.519,
                    levelIndex: 0,
                  },
                  {
                    x: 90.133,
                    z: -58.519,
                    levelIndex: 0,
                  },
                  {
                    x: 87.838,
                    z: -58.519,
                    levelIndex: 0,
                  },
                  {
                    x: 87.838,
                    z: -61.883,
                    levelIndex: 0,
                  },
                  {
                    x: 90.582,
                    z: -61.883,
                    levelIndex: 0,
                  },
                ],
              ],
              layerType: "polygon",
              mapped: true,
            },
            {
              id: "5a9bbacf-986a-4ec8-ba38-837e646edba8",
              name: "7",
              levelIndex: 0,
              coordinates: [
                [
                  {
                    x: 112.699,
                    z: -56.973,
                    levelIndex: 0,
                  },
                  {
                    x: 112.624,
                    z: -54.035,
                    levelIndex: 0,
                  },
                  {
                    x: 113.684,
                    z: -54.015,
                    levelIndex: 0,
                  },
                  {
                    x: 113.671,
                    z: -56.988,
                    levelIndex: 0,
                  },
                ],
              ],
              layerType: "polygon",
              mapped: true,
            },
            {
              id: "4666b2f4-5a2a-413a-82fc-8264607e0296",
              name: "3",
              levelIndex: 0,
              coordinates: [
                [
                  {
                    x: 99.768,
                    z: -33.183,
                    levelIndex: 0,
                  },
                  {
                    x: 99.768,
                    z: -34.704,
                    levelIndex: 0,
                  },
                  {
                    x: 85.744,
                    z: -34.658,
                    levelIndex: 0,
                  },
                  {
                    x: 87.792,
                    z: -33.167,
                    levelIndex: 0,
                  },
                ],
              ],
              layerType: "polygon",
              mapped: true,
            },
          ],
        },
        {
          id: "ccb6b67b-5390-4fee-86da-e9b6719a7abf",
          name: "Study Carrel",
          type: "furniture",
          assets: [
            {
              id: "42bdca4d-fc80-4f55-a796-5bd031316ecf",
              name: "1FN-S01",
              furnitureId: "0462759d-67ad-4298-b03d-108aec5aa3df",
              layerType: "furniture",
            },
            {
              id: "8e4fbab5-9ba8-47dc-918a-af62fa1d947d",
              name: "1FN-S02",
              furnitureId: "825c9447-4ce0-43e9-9422-8640c2fe0889",
              layerType: "furniture",
            },
            {
              id: "0b4311cd-1db5-4f0f-b82e-dbacb09081dd",
              name: "1FN-S03",
              furnitureId: "0a8d7ecd-cbf4-4ab2-a79f-79ea51922e11",
              layerType: "furniture",
            },
            {
              id: "b5e712e1-d66a-403f-9cd8-27442d7f1ca0",
              name: "1FN-S04",
              furnitureId: "1fca3da0-2a42-4f4c-a24c-8accb0e02ade",
              layerType: "furniture",
            },
            {
              id: "1d656bd2-ef02-4dda-bb68-c2b7b6d7dda7",
              name: "1FN-S05",
              furnitureId: "7bea9b11-b08e-4181-8846-ad1963e992f5",
              layerType: "furniture",
            },
            {
              id: "6da6a986-cd38-4f29-9388-ccf290629c0e",
              name: "1FS-S01",
              furnitureId: "8dc6f5ee-7b9e-4b6a-8e2e-9ce9b72978f3",
              layerType: "furniture",
            },
            {
              id: "09b0f796-65a6-414e-8e6f-67f20f3c8f82",
              name: "1FS-S02",
              furnitureId: "eb1b8273-acb5-4c98-860f-df11379a460c",
              layerType: "furniture",
            },
            {
              id: "30ac0798-2e69-4f28-b03f-070086801fe0",
              name: "1FS-S03",
              furnitureId: "7f3a0e20-d8be-4c8a-9020-22a4bd1775b0",
              layerType: "furniture",
            },
            {
              id: "49f1be74-7048-4bd8-b79d-36dff73974fe",
              name: "1FS-S04",
              furnitureId: "26259612-d093-4f6d-bafd-f577161bf300",
              layerType: "furniture",
            },
            {
              id: "1d56a21a-d29f-44da-aed5-62070e1c0a10",
              name: "1FS-S05",
              furnitureId: "54fa9a6d-0602-404b-b0db-bd66cc58f082",
              layerType: "furniture",
            },
            {
              id: "e70fa992-b1aa-471d-9a49-815e214e1dc4",
              name: "CPR2-S01",
              furnitureId: "b99e16d8-2015-4b1c-b93b-32c9376d6e86",
              layerType: "furniture",
            },
            {
              id: "85128b09-e0b1-41df-a66d-4c318c5c3d7c",
              name: "CPR2-S02",
              furnitureId: "7adc37bb-7307-443c-892f-5c4285e2558c",
              layerType: "furniture",
            },
            {
              id: "0ac2b782-68e9-4e2b-a75d-2be29e458433",
              name: "CPR2-S03",
              furnitureId: "05c94e26-47e7-407a-a2af-e5ab367c1f68",
              layerType: "furniture",
            },
            {
              id: "80d2f67b-1f50-4666-97ac-aee27dec15b5",
              name: "CPR2-S04",
              furnitureId: "b7f89e8a-bb70-4491-a603-9e5ffa97875c",
              layerType: "furniture",
            },
            {
              id: "cd12f3e1-4e45-47c8-8a87-387547cd0aad",
              name: "CPR2-S05",
              furnitureId: "31756558-5f42-4eb0-9f5c-27f5d05ac206",
              layerType: "furniture",
            },
            {
              id: "a52c4736-af47-420e-9121-76e19f539f18",
              name: "CPR2-S06",
              furnitureId: "aaf7e27e-dad7-439a-aa44-5f1735e1448e",
              layerType: "furniture",
            },
            {
              id: "1eb2f908-f18e-4a17-8b99-0fb1b0814e45",
              name: "CPR2-S07",
              furnitureId: "57769669-3790-4e03-80b9-a8e36987687b",
              layerType: "furniture",
            },
            {
              id: "68c552d1-f68b-41d1-aab4-180691b25db0",
              name: "CPR2-S08",
              furnitureId: "8f499835-77d7-4733-a1d5-4938441a43ef",
              layerType: "furniture",
            },
            {
              id: "b445e34f-c0d6-40d1-8662-9c84900f5ba2",
              name: "CPR2-S09",
              furnitureId: "287c7ec5-2e6b-4cf4-94a1-4bbfc6f0a74c",
              layerType: "furniture",
            },
            {
              id: "45c0c8c5-ecc3-4027-a76e-2f50bc35d887",
              name: "CPR2-S10",
              furnitureId: "712e9b44-38e9-4e92-961a-f05b440c0378",
              layerType: "furniture",
            },
            {
              id: "1ca08a3d-b48d-44a7-a2ab-819e89d35321",
              name: "CPR2-S11",
              furnitureId: "1beec305-6f25-48b1-8930-d0efa26cad25",
              layerType: "furniture",
            },
            {
              id: "052088a6-512e-4b9a-bada-62208be0c794",
              name: "CPR2-S12",
              furnitureId: "7c5b258c-adac-40b3-881b-333a9f232ebd",
              layerType: "furniture",
            },
            {
              id: "7ab865b3-5108-4d3d-84c5-bab89522eea9",
              name: "CPR2-S13",
              furnitureId: "6aa0c305-f960-43ac-ab8f-3fda4085f542",
              layerType: "furniture",
            },
            {
              id: "ba3e3c63-88d4-42b0-ac39-62ac26bc53d0",
              name: "CPR2-S14",
              furnitureId: "f87e587f-8e8f-46f8-bc79-a2e2132bfed9",
              layerType: "furniture",
            },
            {
              id: "18332415-f6b7-4de9-aa10-1ddadddde3ad",
              name: "CPR2-S15",
              furnitureId: "171671c2-a799-4387-97c8-511f31fb5aad",
              layerType: "furniture",
            },
            {
              id: "4818d95a-1832-453e-95a3-df093008ddf4",
              name: "CPR2-S16",
              furnitureId: "7c42a50b-99a8-4ba9-8c2f-2211c52438b3",
              layerType: "furniture",
            },
            {
              id: "535702ed-6a93-481d-a3e9-6c896267e93e",
              name: "CPR2-S17",
              furnitureId: "31d5f9a5-99bb-4d54-beaa-e6737a0304a6",
              layerType: "furniture",
            },
            {
              id: "a006abea-66cd-4992-b278-02c09eb8de3f",
              name: "CPR2-S18",
              furnitureId: "14fc669d-ffa6-4557-831d-a1741d0faedd",
              layerType: "furniture",
            },
            {
              id: "9feacc01-062e-491c-9dc7-ef05bf8b1e8c",
              name: "CPR2-S19",
              furnitureId: "7f638fe5-db19-4ce6-9333-0915a5c78414",
              layerType: "furniture",
            },
            {
              id: "d3a0c02a-2c6f-45b1-abbf-2c7698754b46",
              name: "CPR2-S22",
              furnitureId: "294f5b13-a461-4bdf-b676-eec2b4fa072f",
              layerType: "furniture",
            },
            {
              id: "170cf3d1-7880-4a2e-9212-752d266fdae0",
              name: "CPR2-S23",
              furnitureId: "820f3f69-e48b-49ed-9853-ecbff99f5944",
              layerType: "furniture",
            },
            {
              id: "ee7f03a1-25a2-413b-96dd-e57398e02633",
              name: "CPR2-S24",
              furnitureId: "3f244aa7-9844-43b7-8641-678af3a203bd",
              layerType: "furniture",
            },
            {
              id: "fe0c88f1-3707-449a-b913-4f4bb29ff29b",
              name: "CPR2-S25",
              furnitureId: "919a333c-c8d2-4105-b0cb-78af945efffb",
              layerType: "furniture",
            },
            {
              id: "d9505390-aa44-4a55-afd4-46f4ee9e6f80",
              name: "CPR2-S26",
              furnitureId: "22550d33-2611-4a95-b418-906787b86512",
              layerType: "furniture",
            },
            {
              id: "9989c5ca-c115-4751-86ad-faaec1215da7",
              name: "CPR2-S20",
              furnitureId: "08a042a9-1c0a-4419-b616-eb54cd010d34",
              layerType: "furniture",
            },
            {
              id: "4c84eb50-7360-40e8-a0dc-9687e33cdd0e",
              name: "CPR2-S21",
              furnitureId: "35a73412-07e5-4c6c-bd85-1f4acde72fd1",
              layerType: "furniture",
            },
          ],
        },
        {
          id: "fa9b88ed-8719-4065-ae39-6ee3c4fc7ad4",
          name: "Female Toilet",
          type: "polygon",
          assets: [
            {
              id: "e7e8a617-9555-4885-a684-6a714e0a5366",
              name: "1F-FT1",
              levelIndex: 0,
              coordinates: [
                [
                  {
                    x: 120.192,
                    z: -38.986,
                    levelIndex: 0,
                  },
                  {
                    x: 120.196,
                    z: -40.713,
                    levelIndex: 0,
                  },
                  {
                    x: 121.513,
                    z: -40.734,
                    levelIndex: 0,
                  },
                  {
                    x: 121.505,
                    z: -41.954,
                    levelIndex: 0,
                  },
                  {
                    x: 123.244,
                    z: -41.942,
                    levelIndex: 0,
                  },
                  {
                    x: 123.273,
                    z: -43.826,
                    levelIndex: 0,
                  },
                  {
                    x: 126.812,
                    z: -43.802,
                    levelIndex: 0,
                  },
                  {
                    x: 126.699,
                    z: -39.006,
                    levelIndex: 0,
                  },
                ],
              ],
              layerType: "polygon",
              mapped: true,
            },
            {
              id: "2241ecad-c7aa-4c3a-99b6-8b2cb0e3f21d",
              name: "1F-FT2",
              levelIndex: 0,
              coordinates: [
                [
                  {
                    x: 12.927,
                    z: -43.834,
                    levelIndex: 0,
                  },
                  {
                    x: 16.219,
                    z: -43.849,
                    levelIndex: 0,
                  },
                  {
                    x: 16.23,
                    z: -42.024,
                    levelIndex: 0,
                  },
                  {
                    x: 18.011,
                    z: -42.014,
                    levelIndex: 0,
                  },
                  {
                    x: 17.978,
                    z: -40.792,
                    levelIndex: 0,
                  },
                  {
                    x: 19.369,
                    z: -40.806,
                    levelIndex: 0,
                  },
                  {
                    x: 19.368,
                    z: -38.959,
                    levelIndex: 0,
                  },
                  {
                    x: 13.364,
                    z: -38.898,
                    levelIndex: 0,
                  },
                  {
                    x: 13.3,
                    z: -39.477,
                    levelIndex: 0,
                  },
                  {
                    x: 12.723,
                    z: -39.484,
                    levelIndex: 0,
                  },
                ],
              ],
              layerType: "polygon",
              mapped: true,
            },
          ],
        },
        {
          id: "0bf87936-b707-4af8-a216-e10fa7010988",
          name: "Male Toilet",
          type: "polygon",
          assets: [
            {
              id: "c32790ee-18b4-4b8f-9de6-1d51a4f1e304",
              name: "1F-MT1",
              levelIndex: 0,
              coordinates: [
                [
                  {
                    x: 126.72,
                    z: -43.955,
                    levelIndex: 0,
                  },
                  {
                    x: 123.266,
                    z: -43.941,
                    levelIndex: 0,
                  },
                  {
                    x: 121.567,
                    z: -43.873,
                    levelIndex: 0,
                  },
                  {
                    x: 121.601,
                    z: -46.362,
                    levelIndex: 0,
                  },
                  {
                    x: 120.129,
                    z: -46.338,
                    levelIndex: 0,
                  },
                  {
                    x: 120.146,
                    z: -48.204,
                    levelIndex: 0,
                  },
                  {
                    x: 126.417,
                    z: -48.038,
                    levelIndex: 0,
                  },
                  {
                    x: 126.488,
                    z: -47.702,
                    levelIndex: 0,
                  },
                  {
                    x: 126.757,
                    z: -47.672,
                    levelIndex: 0,
                  },
                ],
              ],
              layerType: "polygon",
              mapped: true,
            },
            {
              id: "aa5ae6b9-012e-4417-afd2-54fc6d43ec4c",
              name: "1F-MT2",
              levelIndex: 0,
              coordinates: [
                [
                  {
                    x: 16.082,
                    z: -43.915,
                    levelIndex: 0,
                  },
                  {
                    x: 12.804,
                    z: -43.886,
                    levelIndex: 0,
                  },
                  {
                    x: 12.797,
                    z: -47.698,
                    levelIndex: 0,
                  },
                  {
                    x: 13.397,
                    z: -47.652,
                    levelIndex: 0,
                  },
                  {
                    x: 13.413,
                    z: -48.085,
                    levelIndex: 0,
                  },
                  {
                    x: 19.325,
                    z: -48.115,
                    levelIndex: 0,
                  },
                  {
                    x: 19.305,
                    z: -46.429,
                    levelIndex: 0,
                  },
                  {
                    x: 17.996,
                    z: -46.368,
                    levelIndex: 0,
                  },
                  {
                    x: 17.957,
                    z: -43.932,
                    levelIndex: 0,
                  },
                ],
              ],
              layerType: "polygon",
              mapped: true,
            },
          ],
        },
        {
          id: "8ced3f65-7f4d-483f-a336-a6de087fdb01",
          name: "UniToilet/Accsessible",
          type: "polygon",
          assets: [
            {
              id: "ca50785a-4d4a-42ea-8b2c-0f4b5dbda2fe",
              name: "1F-UT1",
              levelIndex: 0,
              coordinates: [
                [
                  {
                    x: 121.575,
                    z: -42.127,
                    levelIndex: 0,
                  },
                  {
                    x: 121.572,
                    z: -43.884,
                    levelIndex: 0,
                  },
                  {
                    x: 123.28,
                    z: -43.879,
                    levelIndex: 0,
                  },
                  {
                    x: 123.276,
                    z: -42.096,
                    levelIndex: 0,
                  },
                ],
              ],
              layerType: "polygon",
              mapped: true,
            },
            {
              id: "81bb538b-fe4a-420e-aad2-3287e9884c70",
              name: "1F-UT3",
              levelIndex: 0,
              coordinates: [
                [
                  {
                    x: 45.336,
                    z: -52.714,
                    levelIndex: 0,
                  },
                  {
                    x: 45.308,
                    z: -56.9,
                    levelIndex: 0,
                  },
                  {
                    x: 48.13,
                    z: -56.917,
                    levelIndex: 0,
                  },
                  {
                    x: 48.153,
                    z: -56.557,
                    levelIndex: 0,
                  },
                  {
                    x: 49.142,
                    z: -56.597,
                    levelIndex: 0,
                  },
                  {
                    x: 49.12,
                    z: -55.296,
                    levelIndex: 0,
                  },
                  {
                    x: 48.539,
                    z: -55.294,
                    levelIndex: 0,
                  },
                  {
                    x: 48.539,
                    z: -53.576,
                    levelIndex: 0,
                  },
                  {
                    x: 49.124,
                    z: -53.572,
                    levelIndex: 0,
                  },
                  {
                    x: 49.144,
                    z: -52.564,
                    levelIndex: 0,
                  },
                  {
                    x: 45.49,
                    z: -52.625,
                    levelIndex: 0,
                  },
                ],
              ],
              layerType: "polygon",
              mapped: true,
            },
            {
              id: "61a284a6-5161-4cd7-b8b0-7788e8ded470",
              name: "1F-UT2",
              levelIndex: 0,
              coordinates: [
                [
                  {
                    x: 16.287,
                    z: -41.959,
                    levelIndex: 0,
                  },
                  {
                    x: 16.223,
                    z: -43.878,
                    levelIndex: 0,
                  },
                  {
                    x: 18.018,
                    z: -43.896,
                    levelIndex: 0,
                  },
                  {
                    x: 18.012,
                    z: -41.983,
                    levelIndex: 0,
                  },
                ],
              ],
              layerType: "polygon",
              mapped: true,
            },
          ],
        },
      ];

      const color_dict = {
        occupied: "#ff3f34",
        countdown: "#ff3f34",
        vacant: "#3aa655",
        free: "#3aa655",
        unoccupied: "#3aa655",
        passive_occupied: "#ffbf00",
        away: "#ffbf00",
        demo: "#6888be",
        unavailable: "#768590",
      };

      // smplrspace-script.js
      class Space {
        constructor(
          spaceId,
          clientToken,
          desks,
          rooms,
          sensors,
          Notaccessible,
          toiletAreas
        ) {
          this.spaceId = spaceId;
          this.clientToken = clientToken;
          this.space = null;
          this.rooms = rooms;
          this.desks = desks;
          this.sensors = sensors;
          this.Notaccessible = Notaccessible;
          this.toiletAreas = toiletAreas;
        }

        initSpace(smplr) {
          this.space = new smplr.Space({
            spaceId: this.spaceId,
            clientToken: this.clientToken,
            containerId: "smplrspace-container",
          });
         this.space.startViewer({
            preview: false,
            cameraPlacement: {
              alpha: 1.5707963267948966,
              beta: 0.5,
              radius: 2,
              target: { x: 70, y: 1, z: -51 },
            },
            onReady: () => this.fetchAll(),
            onError: (error) => console.error("Could not start viewer", error),
          });
        }
           

        updateDataLayers() {
          // remove previous layers if any
          this.space.removeDataLayer("rooms");
          this.space.removeDataLayer("desks");
          this.space.removeDataLayer("Notaccessible");

          const isRoomsEmpty = !this.rooms || this.rooms.length === 0;
          const isDesksEmpty = !this.desks || this.desks.length === 0;
          const isNotaccessibleEmpty =
            !this.Notaccessible || this.Notaccessible.length === 0;
          const isToiletAreasEmpty =
            !this.toiletAreas || this.toiletAreas.length === 0;

          if (!isRoomsEmpty) {
            // add new layers
            this.space.addDataLayer({
              id: "rooms",
              type: "polygon",
              data: this.rooms,
              tooltip: (d) => `${d.name} - ${d.available}`,
              color: (d) => d.color,
              alpha: 0.7,
              height: 1.0,
            });
          }

          if (!isDesksEmpty) {
            this.space.addDataLayer({
              id: "desks",
              type: "furniture",
              data: this.desks,
              tooltip: (d) => `${d.name} - ${d.available}`,
              color: (d) => d.color,
            });
          }

          if (!isNotaccessibleEmpty) {
            this.space.addDataLayer({
              id: "Notaccessible",
              type: "polygon",
              data: this.Notaccessible,
              tooltip: (d) => ` ${d.available}`,
              color: (d) => d.color,
              alpha: 2.6,
              height: (d) => d.height,
            });
          }
        }

        fetchAll() {
          this.fetchData();
        }

        fetchData() {
          fetch(API_ENDPOINT)
            .then((res) => res.json())
            .then((data) => {
              let occupancy = {};
              for (let i = 0; i < data.length; i++) {
                let value = data[i];
                let loc = value.area;
                let timestamp = value.timestamp;
                let available = value.occupancy;

                let color = color_dict.hasOwnProperty(available)
                  ? color_dict[available]
                  : "#ffa500";

                if (!occupancy.hasOwnProperty(loc)) {
                  occupancy[loc] = {
                    timestamp: timestamp,
                    available: available,
                    occupancy: value.occupancy,
                    color: color,
                  };
                } else if (occupancy[loc].timestamp < timestamp) {
                  occupancy[loc] = {
                    timestamp: timestamp,
                    available: available,
                    occupancy: value.occupancy,
                    color: color,
                  };
                }
              }

              for (let key in occupancy) {
                if (
                  occupancy.hasOwnProperty(key) &&
                  desk_filter.hasOwnProperty(key)
                ) {
                  const jsonKey = desk_filter[key];
                  const _index = desk_index[jsonKey];

                  this.desks[_index]["available"] = occupancy[key]["available"];
                  this.desks[_index]["color"] = occupancy[key]["color"];
                } else if (
                  occupancy.hasOwnProperty(key) &&
                  room_filter.hasOwnProperty(key)
                ) {
                  const jsonKey = room_filter[key];
                  const _index = room_index[jsonKey];

                  if (this.rooms && this.rooms[_index]) {
                    this.rooms[_index]["available"] =
                      occupancy[key]["available"];
                    this.rooms[_index]["numberOfPeople"] =
                      occupancy[key]["numberOfPeople"];
                    this.rooms[_index]["color"] = occupancy[key]["color"];
                  }
                } else if (
                  occupancy.hasOwnProperty(key) &&
                  color_overlay_filter.hasOwnProperty(key)
                ) {
                  const jsonKey = color_overlay_filter[key];
                  const _index = color_overlay_index[jsonKey];

                  if (this.Notaccessible && this.Notaccessible[_index]) {
                    this.Notaccessible[_index]["available"] =
                      occupancy[key]["available"];
                    this.Notaccessible[_index]["color"] =
                      occupancy[key]["color"];
                  }
                }
              }
              this.updateDataLayers();
            });
        }
      }

      const customHeightIds = [
        "031bae15-7140-44c3-b06a-eb777de0ee23",
        "5a9bbacf-986a-4ec8-ba38-837e646edba8",
      ];

      const Notaccessible = dict[1]["assets"].map((area) => {
        return {
          ...area,
          available: "Not Accessible",
          color: color_dict["unavailable"],
          height: customHeightIds.includes(area.id) ? 3.0 : 1.0,
        };
      });

      // Get the current URL
      const currentUrl = window.location.href;

      // Create a URL object
      const url = new URL(currentUrl);

      // Use URLSearchParams to get query parameters
      const params = new URLSearchParams(url.search);

      // Example: Get a specific query parameter by name
      const facility = params.get("facility"); // Replace 'yourParameterName' with the actual parameter name


      if (!!facility) {
        if (facility === "Service Counter") {
          // Use the first facility
          dict[0]["assets"].push({
            id: "53c88883-8018-4407-8b8b-5b08e4c84866",
            name: "ServiceCounter",
            furnitureId: "de7dd1fb-e868-46a6-a77f-fdfee928ad06",
            layerType: "furniture",
          });
        } else if (facility === "Study Rooms") {
          dict[2]["assets"].push({
            id: "2c742e1d-1ab7-4600-8376-76626e90c084",
            name: "Individual Study Room 1",
            levelIndex: 0,
            coordinates: [
              [
                {
                  x: 117.426,
                  z: -56.963,
                  levelIndex: 0,
                },
                {
                  x: 119.377,
                  z: -56.963,
                  levelIndex: 0,
                },
                {
                  x: 119.377,
                  z: -54.059,
                  levelIndex: 0,
                },
                {
                  x: 117.426,
                  z: -54.059,
                  levelIndex: 0,
                },
                {
                  x: 117.426,
                  z: -56.963,
                  levelIndex: 0,
                },
              ],
            ],
            layerType: "polygon",
            mapped: true,
          });
        } else if (facility === "Computers") {

        } else if (facility === "Study Spaces") {
        } else if (facility === "Drinking Water Stations") {
        }
      }

      // Create the Space instance with the updated parameters
      spc = new Space(
        SPACE_ID,
        CLIENT_ID,
        [...dict[0]["assets"], ...dict[2]["assets"]],
        [],
        [],
        Notaccessible
      );

      delete dict;

      async function wait() {
        return new Promise((resolve) => {
          setTimeout(() => {
            resolve();
          }, 500);
        });
      }

      async function start() {
        while (typeof smplr === "undefined") {
          await wait();
        }
        spc.initSpace(smplr);
        setInterval(() => {
          spc.fetchAll();
        }, UPDATE_FREQUENCY * 1000);
      }

      start();
    </script>
  </body>
</html>
