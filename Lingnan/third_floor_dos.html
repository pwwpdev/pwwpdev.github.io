<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Third Floor Smplrspace Viewer</title>
  </head>
  <body>
    <script src="https://app.smplrspace.com/lib/smplr.js"></script>
    <link href="https://app.smplrspace.com/lib/smplr.css" rel="stylesheet" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />

    <div id="wrapper">
      <div id="smplrspace-container" class="gap"></div>
    </div>

    <script>
      const API_ENDPOINT =
        "https://optimusc.flowfuse.cloud/lingnan-library-dos";

      const CLIENT_ID = "pub_45cf413215bd43f79621e0b28f8a815b";
      const SPACE_ID = "spc_v2qssnrl";

      const UPDATE_FREQUENCY = 60;

      // Keep non-accessible area index
      const non_accessible_area_index = {
        1: 0,
        2: 1,
        3: 2,
        4: 3,
        5: 4,
      };

      // Filter for non-accessible areas
      const non_accessible_area_filter = {
        1: "1",
        2: "2",
        3: "3",
        4: "4",
        5: "5",
      };

      // Toilet area indexes
      const toilet_area_index = {
        "3F-MT1": 0, // Male toilet
        "3F-FT1": 1, // Female toilet
        "3F-UT1": 2, // Unisex toilet
      };

      // Study carrel indexes (similar to your desk_index example)
      const study_carrel_index = {
        "3FS-S01": 0,
        "3FS-S02": 1,
        "3FS-S03": 2,
        "3FS-S04": 3,
        "3FS-S05": 4,
        "3FS-S06": 5,
        "3FS-S07": 6,
        "3FS-S08": 7,
        "3FS-S09": 8,
        "3FS-S10": 9,
        "3FS-S11": 10,
        "3FS-S12": 11,
        "3FN-S01": 12,
        "3FN-S02": 13,
        "3FN-S03": 14,
        "3FN-S04": 15,
        "3FN-S05": 16,
        "3FN-S06": 17,
        "3FN-S07": 18,
      };

      // Filters for these areas
      const toilet_area_filter = {
        "3F-MT1": "3F-MT1",
        "3F-FT1": "3F-FT1",
        "3F-UT1": "3F-UT1",
      };

      const study_carrel_filter = {
        "3FS-S01": "3FS-S01",
        "3FS-S02": "3FS-S02",
        "3FS-S03": "3FS-S03",
        "3FS-S04": "3FS-S04",
        "3FS-S05": "3FS-S05",
        "3FS-S06": "3FS-S06",
        "3FS-S07": "3FS-S07",
        "3FS-S08": "3FS-S08",
        "3FS-S09": "3FS-S09",
        "3FS-S10": "3FS-S10",
        "3FS-S11": "3FS-S11",
        "3FS-S12": "3FS-S12",
        "3FN-S01": "3FN-S01",
        "3FN-S02": "3FN-S02",
        "3FN-S03": "3FN-S03",
        "3FN-S04": "3FN-S04",
        "3FN-S05": "3FN-S05",
        "3FN-S06": "3FN-S06",
        "3FN-S07": "3FN-S07",
      };

      const color_dict = {
        occupied: "#ff3f34",
        countdown: "#ff3f34",
        vacant: "#3aa655",
        free: "#3aa655",
        unoccupied: "#3aa655",
        passive_occupied: "#ffbf00",
        away: "#ffbf00",
        demo: "#6888be",
        unavailable: "#949494",
        restricted: "#768590",
      };

      // Non-accessible area data
      const nonAccessibleAreaData =    {
    "id": "2e95877e-f91c-4a3b-b6c4-7eb1281ed8d4",
    "name": "NonAccessibleArea",
    "type": "polygon",
    "assets": [
      {
        "id": "57ea7aa9-ae01-4590-a2a8-2e4fcfd8693f",
        "name": "1",
        "levelIndex": 0,
        "coordinates": [
          [
            {
              "x": 67.181,
              "z": -47.414,
              "levelIndex": 0
            },
            {
              "x": 67.189,
              "z": -48.636,
              "levelIndex": 0
            },
            {
              "x": 73.109,
              "z": -48.689,
              "levelIndex": 0
            },
            {
              "x": 73.144,
              "z": -41.197,
              "levelIndex": 0
            },
            {
              "x": 68.55,
              "z": -41.12,
              "levelIndex": 0
            },
            {
              "x": 68.648,
              "z": -46.021,
              "levelIndex": 0
            },
            {
              "x": 66.616,
              "z": -46.052,
              "levelIndex": 0
            },
            {
              "x": 66.601,
              "z": -46.944,
              "levelIndex": 0
            },
            {
              "x": 67.204,
              "z": -46.932,
              "levelIndex": 0
            },
            {
              "x": 67.191,
              "z": -46.934,
              "levelIndex": 0
            },
            {
              "x": 67.196,
              "z": -47.219,
              "levelIndex": 0
            }
          ]
        ],
        "layerType": "polygon",
        "mapped": true
      },
      {
        "id": "25ff2879-8cdd-4862-b74d-34ba861bc3c0",
        "name": "2",
        "levelIndex": 0,
        "coordinates": [
          [
            {
              "x": 50.044,
              "z": -41.234,
              "levelIndex": 0
            },
            {
              "x": 50.072,
              "z": -46.925,
              "levelIndex": 0
            },
            {
              "x": 60.152,
              "z": -47.025,
              "levelIndex": 0
            },
            {
              "x": 60.357,
              "z": -41.315,
              "levelIndex": 0
            }
          ]
        ],
        "layerType": "polygon",
        "mapped": true
      },
      {
        "id": "7096e5ec-9195-4120-80b7-e12cd072c308",
        "name": "3",
        "levelIndex": 0,
        "coordinates": [
          [
            {
              "x": 2.154,
              "z": -41.138,
              "levelIndex": 0
            },
            {
              "x": 2.062,
              "z": -48.787,
              "levelIndex": 0
            },
            {
              "x": 9.6,
              "z": -48.713,
              "levelIndex": 0
            },
            {
              "x": 9.645,
              "z": -41.282,
              "levelIndex": 0
            }
          ]
        ],
        "layerType": "polygon",
        "mapped": true
      },
      {
        "id": "7eddaca0-1c0f-4dd7-97dd-8475c95cf139",
        "name": "4",
        "levelIndex": 0,
        "coordinates": [
          [
            {
              "x": -9.589,
              "z": -41.205,
              "levelIndex": 0
            },
            {
              "x": -5.233,
              "z": -41.193,
              "levelIndex": 0
            },
            {
              "x": -2.208,
              "z": -41.27,
              "levelIndex": 0
            },
            {
              "x": -2.172,
              "z": -49.286,
              "levelIndex": 0
            },
            {
              "x": -9.589,
              "z": -49.201,
              "levelIndex": 0
            },
            {
              "x": -9.636,
              "z": -47.81,
              "levelIndex": 0
            }
          ]
        ],
        "layerType": "polygon",
        "mapped": true
      },
      {
        "id": "abf5f4c8-f212-4933-aec5-baead404d018",
        "name": "5",
        "levelIndex": 0,
        "coordinates": [
          [
            {
              "x": 16.64,
              "z": -41.134,
              "levelIndex": 0
            },
            {
              "x": 16.611,
              "z": -38.482,
              "levelIndex": 0
            },
            {
              "x": 15.71,
              "z": -38.455,
              "levelIndex": 0
            },
            {
              "x": 15.801,
              "z": -36.765,
              "levelIndex": 0
            },
            {
              "x": 16.604,
              "z": -36.689,
              "levelIndex": 0
            },
            {
              "x": 16.636,
              "z": -35.083,
              "levelIndex": 0
            },
            {
              "x": 46.51,
              "z": -35.145,
              "levelIndex": 0
            },
            {
              "x": 46.614,
              "z": -36.693,
              "levelIndex": 0
            },
            {
              "x": 47.772,
              "z": -36.643,
              "levelIndex": 0
            },
            {
              "x": 47.852,
              "z": -38.602,
              "levelIndex": 0
            },
            {
              "x": 45.557,
              "z": -38.447,
              "levelIndex": 0
            },
            {
              "x": 45.62,
              "z": -41.138,
              "levelIndex": 0
            }
          ]
        ],
        "layerType": "polygon",
        "mapped": true
      },
      {
        "id": "7c94bcba-cf31-4d4c-8efe-6a96ac61d5ec",
        "name": "7",
        "levelIndex": 0,
        "coordinates": [
          [
            {
              "x": 6.993,
              "z": -54.031,
              "levelIndex": 0
            },
            {
              "x": 8.486,
              "z": -54.057,
              "levelIndex": 0
            },
            {
              "x": 8.562,
              "z": -61.953,
              "levelIndex": 0
            },
            {
              "x": 7.069,
              "z": -61.974,
              "levelIndex": 0
            }
          ]
        ],
        "layerType": "polygon",
        "mapped": true
      },
      {
        "id": "9fed06fe-4105-42cb-b825-a0621e6e6fe7",
        "name": "8",
        "levelIndex": 0,
        "coordinates": [
          [
            {
              "x": 4.35,
              "z": -28.96,
              "levelIndex": 0
            },
            {
              "x": 4.21,
              "z": -23.982,
              "levelIndex": 0
            },
            {
              "x": 7.649,
              "z": -24.007,
              "levelIndex": 0
            },
            {
              "x": 7.552,
              "z": -24.908,
              "levelIndex": 0
            },
            {
              "x": 14.911,
              "z": -24.79,
              "levelIndex": 0
            },
            {
              "x": 14.942,
              "z": -24.073,
              "levelIndex": 0
            },
            {
              "x": 19.209,
              "z": -24.045,
              "levelIndex": 0
            },
            {
              "x": 19.122,
              "z": -29.004,
              "levelIndex": 0
            }
          ]
        ],
        "layerType": "polygon",
        "mapped": true
      },
      {
        "id": "a60ed5f1-4a00-4775-ac01-4d52d5688733",
        "name": "9",
        "levelIndex": 0,
        "coordinates": [
          [
            {
              "x": 46.557,
              "z": -28.975,
              "levelIndex": 0
            },
            {
              "x": 44.336,
              "z": -29.007,
              "levelIndex": 0
            },
            {
              "x": 44.349,
              "z": -23.906,
              "levelIndex": 0
            },
            {
              "x": 48.028,
              "z": -23.999,
              "levelIndex": 0
            },
            {
              "x": 47.845,
              "z": -24.841,
              "levelIndex": 0
            },
            {
              "x": 55.411,
              "z": -24.851,
              "levelIndex": 0
            },
            {
              "x": 55.405,
              "z": -23.975,
              "levelIndex": 0
            },
            {
              "x": 59.004,
              "z": -24.053,
              "levelIndex": 0
            },
            {
              "x": 58.914,
              "z": -29.082,
              "levelIndex": 0
            }
          ]
        ],
        "layerType": "polygon",
        "mapped": true
      },
      {
        "id": "17807932-1646-405c-9c1f-61108fce0a34",
        "name": "6",
        "levelIndex": 0,
        "coordinates": [
          [
            {
              "x": 58.189,
              "z": -65.778,
              "levelIndex": 0
            },
            {
              "x": 58.152,
              "z": -63.127,
              "levelIndex": 0
            },
            {
              "x": 59.66,
              "z": -62.462,
              "levelIndex": 0
            },
            {
              "x": 62.787,
              "z": -62.439,
              "levelIndex": 0
            },
            {
              "x": 64.921,
              "z": -63.172,
              "levelIndex": 0
            },
            {
              "x": 69.575,
              "z": -63.177,
              "levelIndex": 0
            },
            {
              "x": 69.622,
              "z": -66.959,
              "levelIndex": 0
            },
            {
              "x": 65.041,
              "z": -66.99,
              "levelIndex": 0
            },
            {
              "x": 65.038,
              "z": -65.761,
              "levelIndex": 0
            }
          ]
        ],
        "layerType": "polygon",
        "mapped": true
      }
    ]
  };

      // Male Toilet data
      const maleToiletData =   {
    "id": "92f435fc-d529-4006-a205-b8c74841ead8",
    "name": "Male Toilet",
    "type": "polygon",
    "assets": [
      {
        "id": "f1056163-33ef-44fe-a3bb-45e7cdf92021",
        "name": "3F-MT1",
        "levelIndex": 0,
        "coordinates": [
          [
            {
              "x": -2.243,
              "z": -41.355,
              "levelIndex": 0
            },
            {
              "x": -2.262,
              "z": -46.626,
              "levelIndex": 0
            },
            {
              "x": -0.156,
              "z": -46.66,
              "levelIndex": 0
            },
            {
              "x": -0.19,
              "z": -48.743,
              "levelIndex": 0
            },
            {
              "x": 2.178,
              "z": -48.705,
              "levelIndex": 0
            },
            {
              "x": 2.177,
              "z": -41.423,
              "levelIndex": 0
            }
          ]
        ],
        "layerType": "polygon",
        "mapped": true
      }
    ]
  };

      // Female Toilet data
      const femaleToiletData = {
    "id": "63c8526e-be69-4754-92f7-49a729fc0e1c",
    "name": "Female Toilet",
    "type": "polygon",
    "assets": [
      {
        "id": "cbd9ef5f-471f-4c4d-8c0c-8c88eab0fedb",
        "name": "3F-FT1",
        "levelIndex": 0,
        "coordinates": [
          [
            {
              "x": 60.158,
              "z": -41.201,
              "levelIndex": 0
            },
            {
              "x": 64.909,
              "z": -41.23,
              "levelIndex": 0
            },
            {
              "x": 64.935,
              "z": -48.626,
              "levelIndex": 0
            },
            {
              "x": 60.233,
              "z": -48.646,
              "levelIndex": 0
            }
          ]
        ],
        "layerType": "polygon",
        "mapped": true
      }
    ]
  };

      // Unisex Toilet data
      const uniToiletData = {
    "id": "f591f3ae-d03b-4f3f-9125-a40306509203",
    "name": "UniToilet/Accsessible",
    "type": "polygon",
    "assets": [
      {
        "id": "befd02b8-25f3-4098-bc51-365f4cb83089",
        "name": "3F-UT1",
        "levelIndex": 0,
        "coordinates": [
          [
            {
              "x": 68.555,
              "z": -41.176,
              "levelIndex": 0
            },
            {
              "x": 65.011,
              "z": -41.184,
              "levelIndex": 0
            },
            {
              "x": 64.953,
              "z": -45.963,
              "levelIndex": 0
            },
            {
              "x": 68.462,
              "z": -46.095,
              "levelIndex": 0
            }
          ]
        ],
        "layerType": "polygon",
        "mapped": true
      }
    ]
  };

      // Study Carrels data
      const studyCarrelsData = {
        id: "2a157564-9754-4704-b4ea-09c508103eac",
        name: "Study Carrels",
        type: "furniture",
        assets: [
          {
            id: "cd1783b4-9d52-4e13-a472-fe64a69294b7",
            name: "3FS-S01",
            furnitureId: "64564b70-f27e-4458-85c7-008dc7171a5c",
            layerType: "furniture",
          },
          {
            id: "00ec65c9-7eb8-4957-bc64-e06f859281b2",
            name: "3FS-S02",
            furnitureId: "3fd5bfc7-f79c-4761-b52c-17096d4deaa2",
            layerType: "furniture",
          },
          {
            id: "3fe617f5-26e0-48d4-86e6-29ab47452447",
            name: "3FS-S03",
            furnitureId: "20a6b627-4152-4e10-bf48-b7dc1a99895e",
            layerType: "furniture",
          },
          {
            id: "488337aa-7f91-495e-85f0-d71961f72d8f",
            name: "3FS-S04",
            furnitureId: "60caa7a0-cbad-43c7-983e-4220381e313f",
            layerType: "furniture",
          },
          {
            id: "e190788d-c0dd-40b9-a22e-c0a4acfee95e",
            name: "3FS-S05",
            furnitureId: "b01d26cc-cb8c-46cb-acaf-1d4ff636e7e9",
            layerType: "furniture",
          },
          {
            id: "0d923746-f964-4783-bc27-705f1077adbb",
            name: "3FS-S06",
            furnitureId: "ec1ea0db-0a83-42bc-b33d-f5d08eea4083",
            layerType: "furniture",
          },
          {
            id: "d99cb602-c972-4873-9702-ad5b4c42af48",
            name: "3FS-S07",
            furnitureId: "777432af-115a-47e9-82fc-86bf6b496119",
            layerType: "furniture",
          },
          {
            id: "902c7ae3-27ce-4aca-af01-89242cdbf4e8",
            name: "3FS-S08",
            furnitureId: "d9b290e5-d7a7-447b-a67b-7691949c0b80",
            layerType: "furniture",
          },
          {
            id: "e74916c4-e4bf-40bf-a6cf-7e817ebd33e2",
            name: "3FS-S09",
            furnitureId: "fb83c9a1-c37c-4a22-8669-dce128cab370",
            layerType: "furniture",
          },
          {
            id: "e88822bf-7b30-4b9c-b2bb-f5e390547a1a",
            name: "3FS-S10",
            furnitureId: "0543baf9-c6b7-4df4-b2e1-f0ca75bcbee5",
            layerType: "furniture",
          },
          {
            id: "28bffe88-b5bf-4a7d-954a-0fc20cf6df10",
            name: "3FS-S11",
            furnitureId: "dc7267e0-7126-4faf-9e04-b83ecf64cace",
            layerType: "furniture",
          },
          {
            id: "215eeb30-fe2e-4f1c-82cc-d36d7b9db25c",
            name: "3FS-S12",
            furnitureId: "0ff02935-d46e-4dd8-8194-d7b1bc00a9aa",
            layerType: "furniture",
          },
          {
            id: "6bc01d8d-8372-4136-85b4-40722b9ac209",
            name: "3FN-S01",
            furnitureId: "97e12b06-6dff-47ad-ace2-c8894324204a",
            layerType: "furniture",
          },
          {
            id: "3b92faf3-ce0d-428e-b04d-abdbc456758e",
            name: "3FN-S02",
            furnitureId: "6260e985-d626-4779-9e95-f5f47d3054fb",
            layerType: "furniture",
          },
          {
            id: "97568c09-48f1-4b4d-9655-6c78d542fc01",
            name: "3FN-S03",
            furnitureId: "767fa843-ab9e-4b3a-92f9-fa9c9c322ae2",
            layerType: "furniture",
          },
          {
            id: "43aecc11-f9f8-4a34-a978-a5d733e05d7e",
            name: "3FN-S04",
            furnitureId: "2ae7d26f-7d3c-4008-8bcd-c3dddd29a3be",
            layerType: "furniture",
          },
          {
            id: "5f3614e0-c7a8-4804-8a54-bf754e8203c4",
            name: "3FN-S05",
            furnitureId: "67becb20-a4bc-4836-9448-6b7cde70db28",
            layerType: "furniture",
          },
          {
            id: "11617b47-415c-4e10-9a7d-bff80d8a89be",
            name: "3FN-S06",
            furnitureId: "f5b2807a-0cc7-44b2-a1d0-996963568eb8",
            layerType: "furniture",
          },
          {
            id: "4e02a1cb-f73d-40a1-9eb0-18db02499a2e",
            name: "3FN-S07",
            furnitureId: "5087463c-386c-4009-9b74-adb9666f46d8",
            layerType: "furniture",
          },
        ],
      };

       // book shelves data
       const bookShelves = {
    "id": "228914d6-0bdd-41b6-9178-ea575ccf3f04",
    "name": "BookShelves",
    "type": "furniture",
    "assets": [
      {
        "id": "fe04fc34-f554-4861-9a1f-f2e54c98c063",
        "name": "3A01",
        "furnitureId": "807f23df-e6b6-4c6b-9b30-196b73585e09",
        "layerType": "furniture"
      },
      {
        "id": "59967c16-259c-4198-9c04-b701ebe0b356",
        "name": "3A02",
        "furnitureId": "626b7c26-b157-449e-b276-a8e5d5242749",
        "layerType": "furniture"
      },
      {
        "id": "8e70082d-44b9-42a1-b7fd-2aaaabd695ed",
        "name": "3A03",
        "furnitureId": "2866de7d-2ef5-4339-b24c-19b27a8c4138",
        "layerType": "furniture"
      },
      {
        "id": "274bcb0c-760a-4947-8025-305029c694c7",
        "name": "3A04",
        "furnitureId": "270149b1-259e-45fb-803f-4e957e0c132e",
        "layerType": "furniture"
      },
      {
        "id": "69b636c1-9708-408f-9c17-b3c8903ac95c",
        "name": "3A05",
        "furnitureId": "e26dcfff-ed74-45bb-95c6-caad5d635844",
        "layerType": "furniture"
      },
      {
        "id": "d32465fb-92ad-4c4d-95c6-920f4b576f05",
        "name": "3A06",
        "furnitureId": "675aaad8-cca8-4389-a96d-45d4c6c247c1",
        "layerType": "furniture"
      },
      {
        "id": "ba47f2fb-1acb-4b25-ab59-e96300bc7732",
        "name": "3A07",
        "furnitureId": "675e26e1-062a-49ee-9b9e-532a23f22720",
        "layerType": "furniture"
      },
      {
        "id": "3bd400c1-6918-450b-8aec-b7f689671bf8",
        "name": "3A08",
        "furnitureId": "f0a50109-af97-4071-bd77-377af38c2b13",
        "layerType": "furniture"
      },
      {
        "id": "067fc4cd-9a13-4f36-a1af-5116d60dd5a8",
        "name": "3A09",
        "furnitureId": "d50a7315-694f-436a-8180-395e5b253920",
        "layerType": "furniture"
      },
      {
        "id": "91766133-de13-45be-8971-5cb7e66085b1",
        "name": "3A10",
        "furnitureId": "47a0ef2a-2778-4804-b67a-166303b228bd",
        "layerType": "furniture"
      },
      {
        "id": "946978fb-4ee1-4d04-a315-d940636cb262",
        "name": "3A11",
        "furnitureId": "0c2c87a4-14e3-4e4d-a143-0b454663dbfa",
        "layerType": "furniture"
      },
      {
        "id": "e86adf14-6bb0-43c4-b1a5-5e3bfebb4e97",
        "name": "3A12",
        "furnitureId": "f21b514c-810b-494e-b291-b2b12996e7be",
        "layerType": "furniture"
      },
      {
        "id": "e9be8865-618f-4b3e-848a-d38668249532",
        "name": "3A13",
        "furnitureId": "00e6d7a9-6d04-4a9b-95c2-641d846597d8",
        "layerType": "furniture"
      },
      {
        "id": "c6ddcd31-2891-46cd-afcd-b070277cfc5d",
        "name": "3A14",
        "furnitureId": "442df79a-1bbd-444b-9eed-660d8d3eb9cb",
        "layerType": "furniture"
      },
      {
        "id": "2b49e728-2304-42a2-83db-f62986205489",
        "name": "3A15",
        "furnitureId": "3b97508f-93a7-4be5-8656-7f50ea907d64",
        "layerType": "furniture"
      },
      {
        "id": "34b30c56-8f38-4d4b-adc0-3ddf7a43dc3a",
        "name": "3A16",
        "furnitureId": "150d8a32-9b0c-41ce-b940-2c3f9c238c81",
        "layerType": "furniture"
      },
      {
        "id": "d3a8e6af-795d-4e64-a8e2-d4226aca9981",
        "name": "3A17",
        "furnitureId": "8af3e625-463f-484c-8815-60f5e2c7d296",
        "layerType": "furniture"
      },
      {
        "id": "00f83069-a817-4b60-91df-911c5b1322d9",
        "name": "3B01",
        "furnitureId": "f8b76780-61bd-441a-ab18-a1986b556847",
        "layerType": "furniture"
      },
      {
        "id": "8653f674-07ac-4670-9e49-dcfff6f82382",
        "name": "3B02",
        "furnitureId": "5c330546-c0fe-458b-a123-3ee70ecbdc67",
        "layerType": "furniture"
      },
      {
        "id": "7a0b30d0-719d-4464-95e0-5f7196610871",
        "name": "3B03",
        "furnitureId": "3de9120a-dad6-40ae-b235-581b6445f462",
        "layerType": "furniture"
      },
      {
        "id": "90e86731-a99b-4962-b484-a5de29996f8c",
        "name": "3B04",
        "furnitureId": "282db199-d2ef-4ce1-82e4-03ecba500a86",
        "layerType": "furniture"
      },
      {
        "id": "284d728a-6112-4e57-9d1f-e42901a14c99",
        "name": "3B05",
        "furnitureId": "67c6ddf7-c365-4d99-ae13-70a7d87e651c",
        "layerType": "furniture"
      },
      {
        "id": "692511c0-ecfe-44f5-a130-87a6baf92dad",
        "name": "3B06",
        "furnitureId": "79b19978-ab2d-4774-a864-1ff39f550bf3",
        "layerType": "furniture"
      },
      {
        "id": "3b1ef98a-0fb9-4954-a7e9-a3ec69565463",
        "name": "3B07",
        "furnitureId": "a6cc7a0f-ab38-4bfb-927e-9cebfa69aee6",
        "layerType": "furniture"
      },
      {
        "id": "2ee349b3-5dab-4b78-9bf2-a678fc67a672",
        "name": "3B08",
        "furnitureId": "5d1ba20a-461e-4e5d-8400-95e9d42cb840",
        "layerType": "furniture"
      },
      {
        "id": "f25993bc-303a-4454-b892-b5d2d8dd80e6",
        "name": "3B09",
        "furnitureId": "8fee0771-7124-4c0f-9799-c46edd3f992e",
        "layerType": "furniture"
      },
      {
        "id": "82309b8b-b656-40d3-acce-dd6b52644d3a",
        "name": "3B10",
        "furnitureId": "e526474a-e45a-4ab6-b8ce-58cc9f2dc739",
        "layerType": "furniture"
      },
      {
        "id": "853835e8-cb5c-43d5-b551-f8dc5729f09b",
        "name": "3B11",
        "furnitureId": "6c93aab3-3a54-4ecf-b142-5a267da9f7c9",
        "layerType": "furniture"
      },
      {
        "id": "a04eebcf-2df6-4ebb-82bf-8bf3dc4623f1",
        "name": "3B12",
        "furnitureId": "f8b285e2-133c-4191-87d8-55a44328a6bd",
        "layerType": "furniture"
      },
      {
        "id": "6c47dc95-6a99-48d1-90d2-4a1a4b232044",
        "name": "3B13",
        "furnitureId": "fb0d717f-cd41-4f7b-a335-c3ba85802fc6",
        "layerType": "furniture"
      },
      {
        "id": "8ee440ea-d682-4efa-b5e2-1e3fb828b60a",
        "name": "3B14",
        "furnitureId": "4030c3e1-bd40-465b-99bd-1c9c2f377f6d",
        "layerType": "furniture"
      },
      {
        "id": "f21fe107-b880-4a59-935e-396898afc7c7",
        "name": "3B15",
        "furnitureId": "7b88e82e-f313-46a8-a86a-edc6744068d2",
        "layerType": "furniture"
      },
      {
        "id": "9f449153-8233-4bd9-b68f-3be79f889af8",
        "name": "3C01",
        "furnitureId": "a73f568a-f307-4635-a4b0-4639b24a8b3e",
        "layerType": "furniture"
      },
      {
        "id": "6b69d588-299c-4647-998d-5a7a80003402",
        "name": "3C02",
        "furnitureId": "67a47211-611f-46db-8a59-240db7de2798",
        "layerType": "furniture"
      },
      {
        "id": "12bf5ca3-d738-4517-9fd0-39d4123e4a66",
        "name": "3C03",
        "furnitureId": "a3b108ea-395f-4bd5-be2a-0fa20c343b47",
        "layerType": "furniture"
      },
      {
        "id": "c8b08102-f2e0-4303-bee1-85db07199a48",
        "name": "3C04",
        "furnitureId": "fac74240-8163-49e9-9c14-fd8be7eef47e",
        "layerType": "furniture"
      },
      {
        "id": "4f6761d8-2880-4e4b-8d91-c66b1f75bf6e",
        "name": "3C05",
        "furnitureId": "3e3054af-c899-49cf-98f0-d15a354aedc2",
        "layerType": "furniture"
      },
      {
        "id": "579a4332-19c8-44b9-bfa8-f4fe8e22cc20",
        "name": "3C06",
        "furnitureId": "18e6eaca-170e-4333-8e7f-1a902c652e72",
        "layerType": "furniture"
      },
      {
        "id": "7cb936f3-6fd3-47e0-849f-962101c18e07",
        "name": "3C07",
        "furnitureId": "31542a32-15bd-4df1-b9fa-a59382db2f1a",
        "layerType": "furniture"
      },
      {
        "id": "454794d8-9542-45b8-9fe1-e45f3a278ed6",
        "name": "3C08",
        "furnitureId": "4cadb6c8-e3e4-4e07-92fc-50ddee12dde8",
        "layerType": "furniture"
      },
      {
        "id": "de2d205d-8ccb-45c3-9661-9f03f7593b09",
        "name": "3C09",
        "furnitureId": "e4e8bb82-86e0-485c-9198-f91de9ab7b6d",
        "layerType": "furniture"
      },
      {
        "id": "38478d50-1dc1-4640-b88c-226c9693949d",
        "name": "3C10",
        "furnitureId": "9a01331c-c9a3-4658-a593-b3494bc9dbe5",
        "layerType": "furniture"
      },
      {
        "id": "d00984f6-9bbf-4465-958f-ac05533bab02",
        "name": "3C11",
        "furnitureId": "898cc33f-e214-4669-8300-5d1b051e43d3",
        "layerType": "furniture"
      },
      {
        "id": "d30f46ef-e2e2-4810-9b14-de363bca6f74",
        "name": "3C12",
        "furnitureId": "ccfff782-7f97-4915-bafe-a86bda5f5bb0",
        "layerType": "furniture"
      },
      {
        "id": "fe462087-e81e-4d80-a2c9-9db751663276",
        "name": "3C13",
        "furnitureId": "bb02cd5a-ec12-48d7-b18d-d227b1f7950d",
        "layerType": "furniture"
      },
      {
        "id": "f5e696b2-b441-4f0f-b44c-7274333f8dcc",
        "name": "3C14",
        "furnitureId": "87bf75dd-b69e-4ac1-8eb7-0a4e6a7acc70",
        "layerType": "furniture"
      },
      {
        "id": "8789d178-f69d-4271-addf-7c854f800fd0",
        "name": "3C15",
        "furnitureId": "8c6537bc-f267-4b40-ad00-d9a649ed26c2",
        "layerType": "furniture"
      },
      {
        "id": "2ca2594c-5f14-4b6d-b977-3fba34616c6f",
        "name": "3C16",
        "furnitureId": "a8356fa8-dd3e-4525-945a-3ca3e9b4ca14",
        "layerType": "furniture"
      },
      {
        "id": "9dfbf363-419a-4457-97da-6b9346298c34",
        "name": "3C17",
        "furnitureId": "2b99c485-a79c-4808-828e-bd2d803a5778",
        "layerType": "furniture"
      },
      {
        "id": "8b12e802-85f9-4f9a-a320-a4380a99f1c8",
        "name": "3C18",
        "furnitureId": "341627de-58a7-4885-a677-2577abb39284",
        "layerType": "furniture"
      },
      {
        "id": "06ed64e7-6a80-4734-bec1-24c1c0001dc3",
        "name": "3C19",
        "furnitureId": "69307403-04f9-43ce-886e-0db62d759d08",
        "layerType": "furniture"
      },
      {
        "id": "889f538a-be89-476a-8da1-c88c0a4a6649",
        "name": "3C20",
        "furnitureId": "3fc432a3-e237-4180-8fb9-2c97bfbcca7f",
        "layerType": "furniture"
      },
      {
        "id": "d99e0b3a-6470-4108-a950-735635ccb519",
        "name": "3C21",
        "furnitureId": "1129d946-8d62-4bf2-9c2b-736bf8dbe82b",
        "layerType": "furniture"
      },
      {
        "id": "e4f5ede0-bc2f-45d0-bccc-f57aef42c8b3",
        "name": "3C22",
        "furnitureId": "24ec6c08-9bb8-4c3d-a2c8-1f4ed953abfa",
        "layerType": "furniture"
      },
      {
        "id": "0547fb80-de85-4c94-ba41-8b26d18a1377",
        "name": "3C23",
        "furnitureId": "a73f52fc-7a30-4107-90e0-67b3947a1a0c",
        "layerType": "furniture"
      },
      {
        "id": "4cc0731a-25b0-40ec-82c2-de2ca61d3c3d",
        "name": "3C24",
        "furnitureId": "e4b18f05-f2f7-4e5f-be0a-e51c8bb8b3d8",
        "layerType": "furniture"
      },
      {
        "id": "5989a219-a23d-45e3-a84f-f7cc9c094b44",
        "name": "3C25",
        "furnitureId": "c099ee28-0470-46c9-bcc4-7e559b63b705",
        "layerType": "furniture"
      },
      {
        "id": "1c4762b2-b328-43a6-8b5f-e32506b2f339",
        "name": "3C26",
        "furnitureId": "ecbc3d8c-55cb-40b7-ac5b-ad14c48b1621",
        "layerType": "furniture"
      },
      {
        "id": "2e2a81c1-47ab-498a-b281-c86acdb2e1eb",
        "name": "3C27",
        "furnitureId": "857c83b1-0810-4425-ba99-7a35407acc09",
        "layerType": "furniture"
      },
      {
        "id": "b048020b-af9e-45bc-982d-6ed54d5298d2",
        "name": "3C28",
        "furnitureId": "a889f748-7af5-470d-ba89-163a1c1e435e",
        "layerType": "furniture"
      },
      {
        "id": "bed87868-64eb-4467-9806-9de5f87434f9",
        "name": "3C29",
        "furnitureId": "e3d551c7-e223-4828-ae6a-a772eb5775cc",
        "layerType": "furniture"
      },
      {
        "id": "b7f1642a-1a4e-4223-a956-8a40919c3721",
        "name": "3C30",
        "furnitureId": "d26af154-fb25-461a-bdd1-1293aa42419a",
        "layerType": "furniture"
      },
      {
        "id": "49704f54-2e72-4f7d-9652-ed76235f1f77",
        "name": "3C31",
        "furnitureId": "9e7e0f08-8610-47cb-90aa-533a1f16bf0b",
        "layerType": "furniture"
      },
      {
        "id": "b08cc0b0-75f4-45cc-a2a1-7739a52e20b5",
        "name": "3C32",
        "furnitureId": "1b027147-b21a-45f0-a720-008d20735a09",
        "layerType": "furniture"
      },
      {
        "id": "801d3317-d514-4fe9-aa9c-a3c75d58a292",
        "name": "3C33",
        "furnitureId": "4a66b455-6ac7-46e4-823d-d687716afd2e",
        "layerType": "furniture"
      },
      {
        "id": "d4430bee-8f5f-4e89-8e0b-1cae3c072258",
        "name": "3C34",
        "furnitureId": "f51fed97-b821-4e66-96f0-156255ee8cf9",
        "layerType": "furniture"
      },
      {
        "id": "df1112a3-8a86-48c0-bb7b-e56e110b9098",
        "name": "3C35",
        "furnitureId": "72d8a06c-740b-474d-b572-e25f9f81cad4",
        "layerType": "furniture"
      },
      {
        "id": "fde69fcb-44e7-4628-bab7-f62b5a4a8b9b",
        "name": "3C36",
        "furnitureId": "ba1c506e-df1f-48a6-a2a9-93b4d932e5f4",
        "layerType": "furniture"
      },
      {
        "id": "8b2ded1e-fe0c-47fb-9982-853fe010875e",
        "name": "3C37",
        "furnitureId": "95c21b01-3afd-403f-8a2b-2860f1d6afe4",
        "layerType": "furniture"
      },
      {
        "id": "d6b9a883-f520-462e-8907-e6c026cb6a12",
        "name": "3C38",
        "furnitureId": "09591e4c-092e-4e49-8385-ad61b3d32ebf",
        "layerType": "furniture"
      },
      {
        "id": "62358261-07b0-430e-b0c1-51cc892657d1",
        "name": "3C39",
        "furnitureId": "59e96d23-8e12-41c6-96d2-ee99dc82b738",
        "layerType": "furniture"
      },
      {
        "id": "881b06d9-cb18-46d4-a1e8-8d53ec6d4305",
        "name": "3C40",
        "furnitureId": "39d0e8fb-d27b-4687-a09c-417ed1705142",
        "layerType": "furniture"
      },
      {
        "id": "b52a5a09-2e92-4c6b-b933-7cb797c2b852",
        "name": "3C41",
        "furnitureId": "0a2f9bec-1faf-41cc-985a-f0eb8f09024e",
        "layerType": "furniture"
      },
      {
        "id": "ee4c326d-0062-4d95-bfc7-7791dbaf43b1",
        "name": "3C42",
        "furnitureId": "0d6e5063-8ae0-411a-86ec-879ccbded9c0",
        "layerType": "furniture"
      },
      {
        "id": "6df65fe0-742d-41c6-b513-adf47dd5ff55",
        "name": "3C43",
        "furnitureId": "c2777c26-ce72-4562-9ffa-fa5ab399ddcd",
        "layerType": "furniture"
      },
      {
        "id": "7a4d1b3c-63cd-4708-94a2-c7bad47572c1",
        "name": "3C44",
        "furnitureId": "d9470431-a218-42da-b665-b19cf3f800c4",
        "layerType": "furniture"
      },
      {
        "id": "a6eb22e3-b416-4865-a2f7-9ccdeb8abcb2",
        "name": "3C45",
        "furnitureId": "e88f2062-191f-4daf-b0a4-e3f690c120ac",
        "layerType": "furniture"
      },
      {
        "id": "d0abac66-538f-4165-9d1c-88c3af92a5de",
        "name": "3C46",
        "furnitureId": "5c1cf349-c95b-41ce-a563-de0e96ca22c1",
        "layerType": "furniture"
      },
      {
        "id": "7b286101-ad63-4c77-8b82-c443abbef7fa",
        "name": "3C47",
        "furnitureId": "842b8d63-2c33-42c3-9507-3b8653578526",
        "layerType": "furniture"
      },
      {
        "id": "fe9d6f67-7978-4750-a29a-39cf7e216d72",
        "name": "3C48",
        "furnitureId": "ea961f6c-e504-4354-8208-8a9b8858d9f1",
        "layerType": "furniture"
      },
      {
        "id": "515d77e3-380a-4674-b96f-0465ded9c704",
        "name": "3C49",
        "furnitureId": "3ddd6c65-1a4e-4e97-98f9-f27cdb53a08c",
        "layerType": "furniture"
      },
      {
        "id": "b32af43f-1e31-4ce9-9a38-3912e9d9d712",
        "name": "3C50",
        "furnitureId": "e2bac40e-92ef-4b3b-bb54-69fc8e6f362e",
        "layerType": "furniture"
      },
      {
        "id": "478e4b49-2454-4ec5-92ad-5a1712d99d07",
        "name": "3C51",
        "furnitureId": "6d073eee-4b3f-4814-823b-7dacfb873669",
        "layerType": "furniture"
      },
      {
        "id": "b3c75c3a-6ae0-4b8d-93a8-05a78c18ff9e",
        "name": "3C52",
        "furnitureId": "ee522278-69e8-4040-a169-1c433763897b",
        "layerType": "furniture"
      },
      {
        "id": "bf91854c-ffff-49d6-884c-b78b57336634",
        "name": "3C53",
        "furnitureId": "1923a5c0-863f-4632-af00-083fc7674348",
        "layerType": "furniture"
      },
      {
        "id": "6d95c106-8b7d-48d7-82e6-ffa1491778d8",
        "name": "3C54",
        "furnitureId": "b24f0a7f-b0db-4371-a58a-e8c28ab1f7e7",
        "layerType": "furniture"
      },
      {
        "id": "a686e6be-27c6-490e-afc2-fec7fb473558",
        "name": "3C55",
        "furnitureId": "8a7143af-c58f-4d37-adfb-a2e05a554d93",
        "layerType": "furniture"
      },
      {
        "id": "f2e72de7-9855-4640-b650-41aaad9de20b",
        "name": "3C56",
        "furnitureId": "65ce83b9-ade6-4a5e-9279-0c0d43bd0f7f",
        "layerType": "furniture"
      },
      {
        "id": "d4a07f05-1324-40fd-8317-dccef275958e",
        "name": "3C57",
        "furnitureId": "d80d65e2-2b9b-4e9d-8929-5f6408d93a4e",
        "layerType": "furniture"
      },
      {
        "id": "fd609170-ada9-4bfc-a8d1-652505caaea8",
        "name": "3C58",
        "furnitureId": "5adaf706-52b0-47c4-9af1-49e84487e605",
        "layerType": "furniture"
      },
      {
        "id": "ad62bede-2a93-4981-959d-a351f2bac5cd",
        "name": "3C59",
        "furnitureId": "108afbb5-490f-4867-a94b-b4151ceb0fea",
        "layerType": "furniture"
      },
      {
        "id": "7c088802-0ad9-4df2-b249-51a6aab8c602",
        "name": "3C60",
        "furnitureId": "7c186142-751c-44ed-8c68-51dae1d9ed33",
        "layerType": "furniture"
      },
      {
        "id": "e4e28b18-bc57-41eb-8f0e-feb5d91d5888",
        "name": "3C61",
        "furnitureId": "dfa1b4b2-4dc1-4c39-9c4d-cad732b35f7f",
        "layerType": "furniture"
      },
      {
        "id": "94455efb-5e80-4ced-8c54-2be4d423ad8f",
        "name": "3C62",
        "furnitureId": "9404543b-de1b-436e-9c09-bd2a24df2b7f",
        "layerType": "furniture"
      },
      {
        "id": "26b42db0-7e00-4f87-aa30-59cd410ada23",
        "name": "3C63",
        "furnitureId": "4240dfc4-e81f-413a-821c-04aeef463ba3",
        "layerType": "furniture"
      },
      {
        "id": "21cef959-f278-4afd-aa04-4e8ed3ed180c",
        "name": "3C64",
        "furnitureId": "5ece5304-f84f-4088-938d-e2486ed788cd",
        "layerType": "furniture"
      },
      {
        "id": "515e5ad7-02f7-4dee-a17d-4d9ff0c48feb",
        "name": "3C65",
        "furnitureId": "cd298c96-55f0-4e4b-b34a-494a0537b078",
        "layerType": "furniture"
      },
      {
        "id": "eb1c0704-5f87-40c0-9e4d-c6c06806bab7",
        "name": "3C66",
        "furnitureId": "2c2a9a93-084a-4656-a266-7bb94cebd49e",
        "layerType": "furniture"
      }
    ]
  };

      // Space class to handle the Smplrspace viewer and data
      class Space {
        constructor(spaceId, clientToken, nonAccessibleArea) {
          this.spaceId = spaceId;
          this.clientToken = clientToken;
          this.space = null;
          this.nonAccessibleArea = nonAccessibleArea;
          this.toiletAreas = toiletAreas;
          this.studyCarrels = studyCarrels;
          this.deskStatus = [];
        }

        initSpace(smplr) {
          this.space = new smplr.Space({
            spaceId: this.spaceId,
            clientToken: this.clientToken,
            containerId: "smplrspace-container",
          });
          this.space.startViewer({
            preview: false,
            allowModeChange: true,
            cameraPlacement: {
              alpha: -1.5721425958892115,
              beta: 0.22414041027672915,
              radius: 76.16809499700365,
              target: {
                x: 44.939410866804785,
                y: 1,
                z: -48.16045790160895,
              },
            },
            onReady: () => this.fetchAll(),
            onError: (error) => console.error("Could not start viewer", error),
          });
        }

        updateDataLayers() {
          // Remove previous layers if any
          this.space.removeDataLayer("nonAccessibleArea");
          this.space.removeDataLayer("maleToiletArea");
          this.space.removeDataLayer("femaleToiletArea");
          this.space.removeDataLayer("uniToiletArea");
          this.space.removeDataLayer("studyCarrels");

          const isNonAccessibleAreaEmpty =
            !this.nonAccessibleArea || this.nonAccessibleArea.length === 0;

          if (!isNonAccessibleAreaEmpty) {
            this.space.addDataLayer({
              id: "nonAccessibleArea",
              type: "polygon",
              data: this.nonAccessibleArea,
              tooltip: (d) => `Not Accessible`,
              color: (d) => d.color || color_dict.restricted,
              alpha: 2.2,
              height: (d) => (d.name === "8" || d.name === "9") ? 3.0 : 1.0,
            });
          }

          // Replace the existing toiletAreas code block with these three separate data layers

          const isToiletAreasEmpty =
            !this.toiletAreas || this.toiletAreas.length === 0;

          if (!isToiletAreasEmpty) {
            // Add Male Toilet layer
            this.space.addDataLayer({
              id: "maleToiletArea",
              type: "polygon",
              data: this.toiletAreas.filter((d) => d.name === "3F-MT1"),
              tooltip: (d) => `Male Toilet`,
              color: (d) => "#1D547D",
              alpha: 2.2,
              height: 1.0,
            });

            // Add Female Toilet layer
            this.space.addDataLayer({
              id: "femaleToiletArea",
              type: "polygon",
              data: this.toiletAreas.filter((d) => d.name === "3F-FT1"),
              tooltip: (d) => `Female Toilet`,
              color: (d) => "#A7384E",
              alpha: 2.2,
              height: 1.0,
            });

            // Add Unisex/Accessible Toilet layer
            this.space.addDataLayer({
              id: "uniToiletArea",
              type: "polygon",
              data: this.toiletAreas.filter((d) => d.name === "3F-UT1"),
              tooltip: (d) => `Unisex Toilet/Accessible`,
              color: (d) => "#023b8c",
              alpha: 2.2,
              height: 1.0,
            });
          }

          const isStudyCarrelsEmpty =
            !this.studyCarrels || this.studyCarrels.length === 0;

          if (!isStudyCarrelsEmpty) {
            this.space.addDataLayer({
              id: "studyCarrels",
              type: "furniture",
              data: this.studyCarrels,
              tooltip: (d) => `${d.name} - ${d.available || "Unknown"}`,
              color: (d) => d.color || color_dict.unavailable,
            });
          }
        }
        fetchAll() {
          this.fetchData();
        }

        fetchData() {
          fetch(API_ENDPOINT)
            .then((res) => res.json())
            .then((data) => {
              let occupancy = {};
              for (let i = 0; i < data.length; i++) {
                let value = data[i];
                let loc = value.area;
                let timestamp = value.timestamp;
                let available = value.occupancy;

                let color = color_dict.hasOwnProperty(available)
                  ? color_dict[available]
                  : "#ffffff";

                if (!occupancy.hasOwnProperty(loc)) {
                  occupancy[loc] = {
                    timestamp: timestamp,
                    available: available,
                    occupancy: value.occupancy,
                    color: color,
                  };
                } else if (occupancy[loc].timestamp < timestamp) {
                  occupancy[loc] = {
                    timestamp: timestamp,
                    available: available,
                    occupancy: value.occupancy,
                    color: color,
                  };
                }
              }

              // Update study carrels based on occupancy data
              for (let key in occupancy) {
                if (
                  occupancy.hasOwnProperty(key) &&
                  study_carrel_filter.hasOwnProperty(key)
                ) {
                  const jsonKey = study_carrel_filter[key];
                  const _index = study_carrel_index[jsonKey];

                  console.log("updated " + jsonKey);
                  console.log(occupancy[key]);
                  this.studyCarrels[_index]["available"] =
                    occupancy[key]["available"];
                  this.studyCarrels[_index]["color"] = occupancy[key]["color"];
                }
              }
              this.updateDataLayers();
            });
        }
      }

      

      const nonAccessibleArea_assets = nonAccessibleAreaData.assets.map(
        (area, index) => {
          const areaName = area.name;
          return {
            ...area,
            index:
              non_accessible_area_index[areaName] !== undefined
                ? non_accessible_area_index[areaName]
                : index,
            available: "restricted",
            color: color_dict["restricted"],
          };
        }
      );

      // Initialize toilet areas with specific colors
      const toiletAreas = [
        ...maleToiletData.assets.map((area) => ({
          ...area,
          color: "#1D547D",
          index: toilet_area_index[area.name] || 0,
        })),
        ...femaleToiletData.assets.map((area) => ({
          ...area,
          color: "#A7384E",
          index: toilet_area_index[area.name] || 1,
        })),
        ...uniToiletData.assets.map((area) => ({
          ...area,
          color: "#3aa655",
          index: toilet_area_index[area.name] || 2,
        })),
      ];

      // Initialize study carrels with default status
      const studyCarrels = studyCarrelsData.assets.map((carrel) => ({
        ...carrel,
        available: "unavailable", // Default status until API provides data
        color: color_dict["unavailable"],
        index: study_carrel_index[carrel.name] || 0,
      }));

      // Create the Space instance with only non-accessible areas
      let spc = new Space(
        SPACE_ID,
        CLIENT_ID,
        nonAccessibleArea_assets,
        toiletAreas,
        studyCarrels
      );

      async function wait() {
        return new Promise((resolve) => {
          setTimeout(() => {
            resolve();
          }, 500);
        });
      }

      async function start() {
        while (typeof smplr === "undefined") {
          await wait();
        }
        spc.initSpace(smplr);
        setInterval(() => {
          spc.fetchAll();
        }, UPDATE_FREQUENCY * 1000);
      }

      start();
    </script>
  </body>
</html>
